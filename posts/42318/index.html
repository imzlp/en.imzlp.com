<!DOCTYPE html>
<html lang="en,default">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon-32x32-tilt-brush.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-tilt-brush.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-tilt-brush.png">
  <link rel="mask-icon" href="/images/favicon-32x32-tilt-brush.png" color="#222">
  <meta name="google-site-verification" content="ttIkhAIFZQM9Huj8roB0l95ePN2Tv2zv2wRFksi09WA">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noto Serif SC:300,300italic,400,400italic,700,700italic|Pacifico:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Roboto Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="//lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/5.15.2/css/all.min.css">
  <link rel="stylesheet" href="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/fancybox/3.5.7/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"en.imzlp.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false,"width":280},"copycode":{"enable":true,"show_result":true,"style":"flat"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"manual"},"fancybox":true,"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":false,"nav":null,"activeClass":"valine"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"code_unfold":{"enable":true,"CODE_MAX_HEIGHT":600},"path":"search.xml"};
  </script>

  <meta name="description" content="This blog has switched to Github Action for automated deployment.  Using Hexo to generate a static blog and then deploying it to Github&#x2F;Coding Pages is currently how my blog is hosted. It’s quite enj">
<meta property="og:type" content="article">
<meta property="og:title" content="Automatically deploy Github&#x2F;Coding Pages blog using Travis CI">
<meta property="og:url" content="https://en.imzlp.com/posts/42318/index.html">
<meta property="og:site_name" content="Z&#39;s Blog">
<meta property="og:description" content="This blog has switched to Github Action for automated deployment.  Using Hexo to generate a static blog and then deploying it to Github&#x2F;Coding Pages is currently how my blog is hosted. It’s quite enj">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/blog/posts/42318/0.webp">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/blog/posts/42318/1.webp">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/blog/posts/42318/2.webp">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/blog/posts/42318/3.webp">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/blog/posts/42318/4.webp">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/blog/posts/42318/EnvironmentVariables.webp">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/blog/posts/42318/5.webp">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/blog/posts/42318/7.webp">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/blog/posts/42318/6.webp">
<meta property="article:published_time" content="2016-10-21T06:36:49.000Z">
<meta property="article:modified_time" content="2016-10-21T06:36:49.000Z">
<meta property="article:author" content="LIPENGZHA">
<meta property="article:tag" content="Github">
<meta property="article:tag" content="Hexo">
<meta property="article:tag" content="工具集锦">
<meta property="article:tag" content="持续集成">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img.imzlp.com/imgs/zlp/blog/posts/42318/0.webp">

<link rel="canonical" href="https://en.imzlp.com/posts/42318/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>Automatically deploy Github/Coding Pages blog using Travis CI | Z's Blog</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-FDCJ41EFP5"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-FDCJ41EFP5');
      }
    </script>






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.staticfile.org/lxgw-wenkai-screen-webfont/1.7.0/style.min.css" /><!-- hexo injector head_end end --><link rel="alternate" href="/atom.xml" title="Z's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Z's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        
            
  <li class="menu-item menu-item-notes">

    <a href="/notes/" rel="section"><i class="fa fa-edit fa-fw"></i>Notes</a>

  </li>


      
        
            
  <li class="menu-item menu-item-essay">

    <a href="/essay/" rel="section"><i class="fas fa-feather-alt fa-fw"></i>Essay</a>

  </li>


      
        
            
  <li class="menu-item menu-item-resources">

    <a href="/resources/" rel="section"><i class="fa fa-inbox fa-fw"></i>Resources</a>

  </li>


      
        <li class="menu-item menu-item-friends">

    <a href="/friends/" rel="section"><i class="fas fa-link fa-fw"></i>Friends</a>

  </li>
        
            
  <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About Me</a>

  </li>


      
        <li class="menu-item menu-item-showcase">

    <a href="/showcase/" rel="section"><i class="fa fa-solid fa-trophy fa-fw"></i>ShowCase</a>

  </li>
        <li class="menu-item menu-item-changelog">

    <a href="/changelog/" rel="section"><i class="fa fa-history fa-fw"></i>Site Log</a>

  </li>
        <li class="menu-item menu-item-opensource">

    <a href="/opensource/" rel="section"><i class="fas fa-code-branch fa-fw"></i>Open Source</a>

  </li>
        <li class="menu-item menu-item-uewiki">

    <a href="https://ue5wiki.com/" rel="noopener" target="_blank"><i class="fab fa-wikipedia-w fa-fw"></i>Unreal Wiki</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>



<script type="text/javascript">
  let domain='en.imzlp.com';
  let domain_str = atob(domain);
  let pathname = location.pathname;
  if (domain_str!= location.host.toLowerCase()){
        console.log(`this host is not safe,jump to https://${domain_str}${pathname}`);
        location.href=`https://${domain_str}${pathname}`;
  }
</script>

</div>
    </header>

    
  <div class="reading-progress-bar"></div>
  <div class="l10n-header-widget">
    <script>
      // 获取当前页面的 URL
      const currentUrl = window.location.href;
      // 替换 URL 中的部分内容
      const jumpToL10nLink = currentUrl.replace('en.imzlp.com', 'imzlp.com');
      // 将 jumpToL10nLink 绑定到一个全局变量
      window.jumpToL10nLink = jumpToL10nLink;
    </script>

    <a href="#" class="post-l10n-link" title="切换至中文版本" style="float: left;border-bottom: none;" rel="noopener" target="_blank" onclick="window.open(window.jumpToL10nLink, '_blank'); return false;">
      <i class="fa fa-solid fa-language"></i>
    </a>
  </div>



    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en"
  >
    <link itemprop="mainEntityOfPage" href="https://en.imzlp.com/posts/42318/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://img.imzlp.com/imgs/zlp/picgo/2023/202304152112902.webp">
      <meta itemprop="name" content="LIPENGZHA">
      <meta itemprop="description" content=""I think, therefore I am"">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Z's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Automatically deploy Github/Coding Pages blog using Travis CI<a href="https://github.com/imzlp/blog-md/blob/en/_posts/2016-10-21-42318.md" class="post-edit-link" title="Edit this post" style="float: right;border-bottom: 0px;" rel="noopener" target="_blank"><i class="fa fa-pen-nib"></i></a><a href="https://imzlp.com/posts/42318/" class="post-l10n-link" title="切换至中文版本" style="float: left;border-bottom: 0px;" rel="noopener" target="_blank"><i class="fa fa-solid fa-language"></i></a>
        </h1>

        
          <div class="post-subtitle" style="text-align: center;line-height: 1;">
            <sub text-align="center" style="font-size: 15px;align-content: center;font-style: italic;bottom: 0em;">使用Travis CI自动部署Github/Coding Pages博客</sub>
          </div>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-10-21 06:36 06:36:49:36" itemprop="dateCreated datePublished" datetime="2016-10-21T06:36:49+00:00">2016-10-21 06:36</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%8D%9A%E5%AE%A2%E7%AE%A1%E7%90%86/" itemprop="url" rel="index"><span itemprop="name">博客管理</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%8D%9A%E5%AE%A2%E7%AE%A1%E7%90%86/Hexo/" itemprop="url" rel="index"><span itemprop="name">Hexo</span></a>
                </span>
            </span>

          
            <span id="/posts/42318/" class="post-meta-item leancloud_visitors" data-flag-title="Automatically deploy Github/Coding Pages blog using Travis CI" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>9.9k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>25 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <blockquote>
<p>This blog has switched to Github Action for automated deployment.</p>
</blockquote>
<p>Using Hexo to generate a static blog and then deploying it to Github/Coding Pages is currently how my blog is hosted. It’s quite enjoyable to use, but there are several issues:</p>
<ol>
<li>The environment configuration for Hexo is too cumbersome; it’s almost impossible to update the blog when changing to a new computer.</li>
<li>Each time I modify an article, I have to regenerate everything.</li>
<li>Additionally, the number of command executions for submitting the blog source files is too high (mainly the first step).</li>
</ol>
<p>I wasted a lot of time submitting articles, so I optimized the process to almost achieve fully automated submissions.  </p>
<span id="more"></span>  
<p>According to the steps above, even if the deployment environment is already set up, the most basic modification/synchronization of an article still involves the following steps:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Modify the article</span><br><span class="line">Execute hexo d -g</span><br></pre></td></tr></table></figure>

<blockquote>
<p>This blog has switched to Github Action for automated deployment.</p>
</blockquote>
<p>Using Hexo to generate a static blog and then deploying it to Github/Coding Pages is currently how my blog is hosted. It’s quite enjoyable to use, but there are several issues:</p>
<ol>
<li>The environment configuration for Hexo is too cumbersome; it’s almost impossible to update the blog when changing to a new computer.</li>
<li>Each time I modify an article, I have to regenerate everything.</li>
<li>Additionally, the number of command executions for submitting the blog source files is too high (mainly the first step).</li>
</ol>
<p>I wasted a lot of time submitting articles, so I optimized the process to almost achieve fully automated submissions.  </p>
<!-- more -->  
<p>According to the steps above, even if the deployment environment is already set up, the most basic modification/synchronization of an article still involves the following steps:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Modify the article</span><br><span class="line">Execute hexo d -g</span><br><span class="line"># The following is to synchronize the blog source files</span><br><span class="line">git add .</span><br><span class="line">git commit -m &quot;commit message&quot;</span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure>

<p>If there are errors in the written article, after correcting them, I have to start over with the above steps, wasting a lot of time. Fortunately, I recently discovered a <strong>Continuous Integration</strong> deployment method that I think can also be applied to my blog to simplify these steps as much as possible.</p>
<p>The main concept is: when I push new files (code) to the Github repository, a series of actions are triggered. We can set a series of commands to automatically execute <code>hexo d -g</code> when we add/modify <strong>.md</strong> articles to generate and deploy to the Github/Coding Pages repository.</p>
<p>For <strong>Continuous Integration</strong>, I chose <a target="_blank" rel="noopener" href="https://travis-ci.org/">Travis CI</a> because it seamlessly integrates with Github and offers free access to public repositories. Additionally, since Travis CI can only import repositories from Github and currently coding.net does not support Tokens, we can’t push directly to the coding.net repository on Travis, which requires some tweaking with private keys, but that is not discussed for now.</p>
<p>First, you need to have a successfully deployed hexo repository, for example:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git@github.com:imzlp/blog-source.git,gh-pages</span><br></pre></td></tr></table></figure>
<p>And your blog source files are in:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git@github.com:imzlp/blog-source.git,master</span><br></pre></td></tr></table></figure>

<p>First, open <a target="_blank" rel="noopener" href="https://travis-ci.org/">Travis CI</a> and log in using your Github account.</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/42318/0.webp"></p>
<p>Click on the + sign in the red box and select the repository where your blog is located.</p>
<p>If it does not show up, click the “Sync account” button in the upper right corner to synchronize it.</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/42318/1.webp"></p>
<p>Then return to the main interface, and you will see your selected repository in the list.</p>
<p>Since I have deployed successfully before, it will display a green checkmark.</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/42318/2.webp"></p>
<p>Open the settings and enable <code>Build only if .travis.yml is present</code> and <code>Build pushes</code>.</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/42318/3.webp"></p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/42318/4.webp"></p>
<p>The meanings of these two options are:</p>
<ul>
<li><strong>Build only if .travis.yml is present</strong>: Only build if the branch configured in .travis.yml has changed.</li>
<li><strong>Build pushes</strong>: Start building after pushing to this branch.</li>
</ul>
<p>The basic idea is to create a <code>.travis.yml</code> file in the directory where the blog source code is located and write your configuration file there. Once you push to this branch, Travis CI will detect the changes in the repository and execute the commands configured in the <code>.travis.yml</code> file.</p>
<p>However, there is a problem; pushing to Github or Coding requires an SSH private key, but we cannot put the key created in Travis CI into the Github/Coding ssh-key. Currently, Github supports token-key, which allows for pushes without an ssh-key, but if you want to deploy your blog to different service providers’ repositories (Github Pages/Coding Pages), this is not a universal solution.</p>
<p>So my idea is that since a private key is to be generated anyway, I can directly upload the SSH private key from my VPS to Travis CI, allowing smooth deployment (the public key on the VPS has already been added to the Github/Coding ssh-key), but then there’s the issue of security…</p>
<p>Fortunately, I found that I could encrypt the private key before pushing it to the blog source repository. Then, after cloning the repository in Travis CI, I can decrypt the file of the encrypted private key, execute <code>hexo d -g</code>, and finally delete the private key, which solves part of the security issue (the private key pushed to the blog source files is encrypted, ensuring security even in a public repository, the only security vulnerability is that you need to ensure that your Travis (Github) account is secure…).</p>
<p>First, install the Ruby environment on your VPS (Linux environment) where you can deploy hexo (choose according to your environment):</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># For Debian and other distributions using Debian style packaging the ruby development headers are installed by:</span></span><br><span class="line">$ sudo apt-get install ruby-dev</span><br><span class="line"><span class="comment"># For Ubuntu the ruby development headers are installed by:</span></span><br><span class="line">$ sudo apt-get install ruby-all-dev</span><br><span class="line"><span class="comment"># If you are using an earlier version of ruby (such as 2.2), then you will need to run:</span></span><br><span class="line">$ sudo apt-get install ruby2.2-dev</span><br></pre></td></tr></table></figure>
<p>Then install the <code>gem</code> and <code>travis</code> client:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># install gem</span></span><br><span class="line">$ apt-get install gem</span><br><span class="line"><span class="comment"># install travis</span></span><br><span class="line">$ gem install travis</span><br></pre></td></tr></table></figure>
<p>After installation, log in to Travis with the following command:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># travis-ci.org</span></span><br><span class="line">$ travis login --auto</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Note: If using <a href="travis-ci.com">travis-ci.com</a>, then you need to use the command <code>travis login --pro</code>.</p>
</blockquote>
<p>You will be prompted to enter your username and password; here you should use your Github account.</p>
<p>Once logged in, we can encrypt our private key and place it into the blog source repository for later decryption during deployment by Travis CI.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Encrypt the private key id_rsa; pay attention to specify your private key location, and also specify the repository -r $&#123;Repo_Name&#125;</span></span><br><span class="line">$ travis encrypt-file ~/.ssh/id_rsa --add -r imzlp/blog-source</span><br></pre></td></tr></table></figure>
<p>At this point, you will see two environment variables created in the settings of the imzlp/blog-source repository in travis-ci: <code>$encrypted_1fc90f464345_key</code> and <code>$encrypted_1fc90f464345_iv</code>. The contents defined by these two environment variables are not visible to others, ensuring the safety of our private key, which will be used to decrypt it.<br><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/42318/EnvironmentVariables.webp"><br>Then, the current directory will generate two files: <code>.travis.yml</code> and <code>id_rsa.enc</code>. The <code>id_rsa.enc</code> is the file obtained after encrypting our private key, and in <code>.travis.yml</code> we will add commands to decrypt <code>id_rsa.enc</code>, in a format like this (note that everyone’s will be different, do not directly copy my code):</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- openssl aes-256-cbc -K <span class="variable">$encrypted_1fc90f464345_key</span> -iv <span class="variable">$encrypted_1fc90f464345_iv</span></span><br><span class="line">  -<span class="keyword">in</span> .travis/id_rsa.enc -out ~/.ssh/id_rsa -d</span><br></pre></td></tr></table></figure>

<p>This command uses openssl and the two environment variables defined above to decrypt the private key and store the decrypted private key in <code>~/.ssh/id_rsa</code>.</p>
<p>Next, we need to add a command in <code>.travis.yml</code> to set the permission of the private key, making it readable:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- <span class="built_in">chmod</span> 600 ~/.ssh/id_rsa</span><br></pre></td></tr></table></figure>

<p>Then add this private key to the system:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- <span class="built_in">eval</span> $(ssh-agent)</span><br><span class="line">- ssh-add ~/.ssh/id_rsa</span><br></pre></td></tr></table></figure>

<p>Subsequently, move <code>id_rsa.enc</code> to <code>.travis</code>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mv</span> id_rsa.enc .travis</span><br></pre></td></tr></table></figure>

<p>When we connect to a remote host via SSH, it will check the host’s public key. If it’s the first time connecting to that host, it will display a fingerprint of the host’s public key, prompting users to trust the host, but during continuous integration with Travis, we can’t input yes… Hence, if you directly push, it will hang here. The solution is to disable public key checking for remote hosts in SSH.</p>
<p>Create a new file named <code>ssh_config</code> in <code>.travis</code> and fill in the following content:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Host *</span><br><span class="line">StrictHostKeyChecking no</span><br><span class="line">IdentityFile ~/.ssh/id_rsa</span><br><span class="line">IdentitiesOnly <span class="built_in">yes</span></span><br></pre></td></tr></table></figure>

<p>This means that public key checking for all hosts is disabled, and the private key address is specified as <code>~/.ssh/id_rsa</code>.</p>
<p>In Travis, I will overwrite the default ssh_config from Travis (<code>/etc/ssh/ssh_config</code>).</p>
<p>Next, move both <code>.travis</code> and <code>.travis.yml</code> to the blog source files, with the following directory structure:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">.deploy_git</span><br><span class="line">.git</span><br><span class="line">.travis</span><br><span class="line">node_modules</span><br><span class="line">public</span><br><span class="line">scaffolds</span><br><span class="line"><span class="built_in">source</span></span><br><span class="line">themes</span><br><span class="line">.directory</span><br><span class="line">.gitignore</span><br><span class="line">.travis.yml</span><br><span class="line">README.md</span><br><span class="line">_config.yml</span><br><span class="line">package.json</span><br></pre></td></tr></table></figure>

<p>Open <code>.travis.yml</code> and fill in the content from the code block below, ensuring you modify the decryption code with your own parameters.<br><strong>Note:</strong> Do not set the node_js version to stable, as the recent update to nodejs 7.0 is not compatible with some hexo plugins. It’s best not to write stable; since Travis uses nvm to manage node versions, we can directly specify the version number. To prevent unnecessary issues, I recommend setting it to 5.9.1.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">language: node_js</span><br><span class="line">node_js: 5.9.1</span><br><span class="line">install:</span><br><span class="line">- npm install</span><br><span class="line">- npm install hexo-cli -g</span><br><span class="line">script:</span><br><span class="line">- hexo g</span><br><span class="line">- hexo d</span><br><span class="line">- <span class="built_in">rm</span> -rf ~/.ssh</span><br><span class="line">branches:</span><br><span class="line">  only:</span><br><span class="line">  - master</span><br><span class="line">before_install:</span><br><span class="line">- openssl aes-256-cbc -K <span class="variable">$encrypted_1fc90f464345_key</span> -iv <span class="variable">$encrypted_1fc90f464345_iv</span></span><br><span class="line">  -<span class="keyword">in</span> .travis/id_rsa.enc -out ~/.ssh/id_rsa -d</span><br><span class="line">- <span class="built_in">chmod</span> 600 ~/.ssh/id_rsa</span><br><span class="line">- sudo <span class="built_in">cp</span> .travis/ssh_config /etc/ssh/ssh_config</span><br><span class="line">- sudo <span class="built_in">chmod</span> 755 /etc/ssh/ssh_config</span><br><span class="line">- <span class="built_in">eval</span> <span class="string">&quot;<span class="subst">$(ssh-agent -s)</span>&quot;</span></span><br><span class="line">- ssh-add ~/.ssh/id_rsa</span><br><span class="line">- git config --global user.name <span class="string">&quot;userName&quot;</span></span><br><span class="line">- git config --global user.email <span class="string">&quot;userName@gmail.com&quot;</span></span><br></pre></td></tr></table></figure>

<p>As can be seen, it’s akin to a bash command that can be executed on a Linux host. The <code>install</code> part is executed first, followed by the <code>before_install</code> part, and finally the <code>script</code> part. Essentially, it sets up an environment on <code>travis-ci</code> for deploying the blog to GithubPages/CodingPages and performs the <code>hexo d -g</code> operation.</p>
<p>You can then push the blog source files to the Github repository (note that this is the blog source files, not the files in the <code>public</code> folder generated by <code>hexo g</code>).</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git add .</span><br><span class="line">$ git commit -m <span class="string">&quot;add travis-ci&quot;</span></span><br><span class="line">$ git push origin master</span><br><span class="line"><span class="comment"># git@github.com:imzlp/blog-source.git,master</span></span><br></pre></td></tr></table></figure>

<p>After pushing, log in to the Travis CI page and see if it is deploying in the background.</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/42318/5.webp"></p>
<p>Once the deployment is successful, check your Github Pages repository to see if the submission was successful or wait for your blog page to refresh. If Travis CI reports an error, please carefully verify the steps above.</p>
<p>In my <code>_config.yml</code>, I’ve written two repositories; during <code>hexo d</code>, it will push to these two repositories (originally, Travis CI only supports Github repositories).</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/42318/7.webp"></p>
<p>Now, updating the blog articles only requires pushing <code>.md</code> articles to the blog source repository (branch), and Travis CI will detect the update and <strong>Continuous Integration</strong> will automatically deploy the updates to our blog.</p>
<p><strong>Possible Problems</strong></p>
<p>The most common issues encountered are still related to the private key/public key checks during deployment. Remember that after replacing the ssh_config in Travis CI, you must set permissions (I set it to 755 above), otherwise it will still check the public key when pushing.</p>
<p>Don’t forget to set the global git variables for user and email before executing <code>hexo d -g</code>, otherwise <code>hexo d</code> will prompt you with “who are you?”.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- git config --global user.name <span class="string">&quot;userName&quot;</span></span><br><span class="line">- git config --global user.email <span class="string">&quot;userName@gmail.com&quot;</span></span><br></pre></td></tr></table></figure>

<p>You can refer to the repository directory and configuration files from <a target="_blank" rel="noopener" href="https://github.com/imzlp/blog-source">my blog source repository (master branch)</a>. The Travis CI configuration mainly relies on the files in the <code>.travis</code> directory and the <code>.travis.yml</code> file.</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/42318/6.webp"></p>
<p><strong>Postscript</strong><br>Currently, my blog deployment method has become very convenient, and no longer requires manual generation and pushing.<br>I’ve used Dropbox to synchronize the blog source files and deployed them simultaneously on my VPS and my computer. This way, whenever I modify or add articles locally, they will instantly sync to my VPS. I also wrote a shell script and added it to the <code>.bashrc</code> as an <code>alias</code>. Using Xshell, JuiceSSH (for Android), or the <code>plink</code> in <a target="_blank" rel="noopener" href="https://www.putty.org/">Putty</a>, I can log into my VPS with a single command, and with just one command, it will automatically push the updates to my Github! (Using Xshell’s quick command set or a script for automatic command execution doesn’t require typing anything; just a click will execute it), while Travis CI constantly monitors my blog repository, generating and pushing updates to the <code>gh-pages</code> branch as soon as it detects submissions.<br>Now the steps are just:  </p>
<ol>
<li>Add/modify articles (local modifications are immediately synced to VPS through Dropbox).  </li>
<li>Execute the automatic submission script (start <code>plink</code> to quickly connect to VPS and execute the command script).</li>
</ol>
<p>It’s also possible to write a program to run on the VPS that automatically detects changes in the article directory and executes quick submission commands. This way, it could be entirely automated. But doing so would result in a commit pollution every time you modify a single character, so perhaps I will implement such a solution when I am too lazy in the future…<br>Postscript: Using <code>plink</code> can automatically log into the VPS and execute commands, achieving a truly password-less experience. The current quick submission script is as follows:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># save to ~/blog</span></span><br><span class="line"><span class="comment">#!/usr/bin/env bash</span></span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;quickly submit&quot;</span></span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure>

<p>Then, using the following syntax will automatically connect to the VPS and quickly submit:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">plink -pw <span class="variable">$&#123;server-username-password&#125;</span> <span class="variable">$&#123;username@Host&#125;</span> -P <span class="variable">$&#123;portNum&#125;</span> <span class="string">&quot;<span class="variable">$&#123;order&#125;</span>&quot;</span></span><br><span class="line"><span class="comment"># Connect to root@192.168.1.111 and execute the quick submission command</span></span><br><span class="line"><span class="comment"># plink -pw 123456abc root@192.168.1.111 -P 1111 &quot;cd ~/blog&amp;&amp;sh ~/blog/quicklypush.sh&quot;</span></span><br></pre></td></tr></table></figure>

<p>Plink can also use keys for login, but plink requires ppk keys generated by puttygen, so we need to open the SSH private key with puttygen and save it as a ppk private key.<br>The command to login automatically using a private key with plink is as follows:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plink -i <span class="variable">$&#123;KeyPath&#125;</span>/puttygen.ppk <span class="variable">$&#123;username@Host&#125;</span> -P <span class="variable">$&#123;portNum&#125;</span> <span class="string">&quot;<span class="variable">$&#123;order&#125;</span>&quot;</span></span><br><span class="line"><span class="comment"># plink -i C:\Users\visionsmile\.ssh\puttygen.ppk root@192.168.1.111 -P 1111 &quot;cd ~/blog&amp;&amp;sh ~/blog/quicklypush.sh&quot;</span></span><br></pre></td></tr></table></figure>

<p>Thus achieving password-less login.</p>
<p><strong>References</strong><br><a target="_blank" rel="noopener" href="https://zespia.tw/blog/2015/01/21/continuous-deployment-to-github-with-travis/">Using Travis CI to Automatically Deploy Websites to GitHub</a><br><a target="_blank" rel="noopener" href="https://oncemore2020.github.io/blog/travis-deploy/">Travis CI Push Permission Configuration</a><br><a target="_blank" rel="noopener" href="http://www.jianshu.com/p/e22c13d85659">How to Use Travis CI to Automatically Deploy Your Hexo Blog to Github</a><br><a target="_blank" rel="noopener" href="http://www.worldhello.net/2010/04/08/1026.html">Disable SSH Host Key Checking</a></p>

    </div>

    
    
        
        
          
            <blockquote class="blockquote-center">
              
                The article is finished. If you have any questions, please comment and communicate.
              
            <br/>
            
                <div class="qr-code" onclick="return false">
                    <script src="/js/qrcode.min.js"></script>
                    <div id="qrcode">
                      
                        <img src="https://imzlp.com/images/wechat-qrcode.webp">
                      
                    <p>Scan the QR code on WeChat and follow me.</p>
                    </div>
                </div>
            
            </blockquote>
          
        

        
          <div class="postCopyright" style="clear:both;">
             <span>Title:</span><a href="/posts/42318/" target="_blank">Automatically deploy Github/Coding Pages blog using Travis CI</a><br/>
             <span>Author:</span><a href="/about" target="_blank" title="查看 LIPENGZHA 的资料">LIPENGZHA</a><br/>
             <span>Publish Date:</span>2016/10/21 06:36<br/>
             
             <span>Word Count:</span><span class="page-count">9.9k Words</span><br/>
             
             <span>Link:</span><a href="/posts/42318/" target="_blank" title="Automatically deploy Github/Coding Pages blog using Travis CI">https://en.imzlp.com/posts/42318/</a>
             <span class="copy-path" data-clipboard-text="Link: https://en.imzlp.com/posts/42318/ Author: LIPENGZHA" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
             <script src="/js/jquery.min.js"></script>
             <script src="/js/clipboard.min.js"></script>
             <script> var clipboard = new Clipboard('.copy-path'); </script>
             <br/>
             
             <span>License:</span><i class="fab fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" title="Attribution-NonCommercial-ShareAlike 4.0 International">CC BY-NC-SA 4.0</a><br/>
             
             <span>Reprinting of the full article is prohibited.</span>
          </div>
        
    

        
  <div class="reward-container">
    <div>Your donation will encourage me to keep creating!</div>
    <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
      Donate
    </button>
    <div id="qr" style="display: none;">
        
        <div style="display: inline-block;">
          <img src="/images/reward/wechatpay.webp" alt="LIPENGZHA WeChat Pay">
          <p>WeChat Pay</p>
        </div>

    </div>
  </div>



      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Github/" rel="tag"># Github</a>
              <a href="/tags/Hexo/" rel="tag"># Hexo</a>
              <a href="/tags/%E5%B7%A5%E5%85%B7%E9%9B%86%E9%94%A6/" rel="tag"># 工具集锦</a>
              <a href="/tags/%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/" rel="tag"># 持续集成</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/posts/10205/" rel="prev" title="Some interesting questions and analysis of CppQuiz">
      <i class="fa fa-chevron-left"></i> Some interesting questions and analysis of CppQuiz
    </a></div>
      <div class="post-nav-item">
    <a href="/posts/18194/" rel="next" title="Boost source code analysis notes">
      Boost source code analysis notes <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
      <div class="tabs tabs-comment">
        <ul class="nav-tabs">
            <li class="tab"><a href="#comment-utteranc">utteranc</a></li>
            <li class="tab"><a href="#comment-valine">valine</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane utteranc" id="comment-utteranc">
              
  
  <div class="comments">
  <script src="https://utteranc.es/client.js" repo="hxhb/blog-comments" issue-term="pathname" theme="github-light" crossorigin="anonymous" async></script>
  </div>
  
  
            </div>
            <div class="tab-pane valine" id="comment-valine">
              <div class="comments" id="valine-comments"></div>
            </div>
        </div>
      </div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person" oncontextmenu="return false" οndragstart="return false">
    <img class="site-author-image" itemprop="image" alt="LIPENGZHA"
      src="https://img.imzlp.com/imgs/zlp/picgo/2023/202304152112902.webp">
  <p class="site-author-name" itemprop="name">LIPENGZHA</p>
  <div class="site-description" itemprop="description">"I think, therefore I am"</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
             
          <span class="site-state-item-count">190</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">95</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">190</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/hxhb" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;hxhb" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://linkedin.com/in/lipengzha" title="Linkedin → https:&#x2F;&#x2F;linkedin.com&#x2F;in&#x2F;lipengzha" rel="noopener" target="_blank"><i class="fab fa-linkedin fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.zhihu.com/people/imzlp" title="知乎 → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;imzlp" rel="noopener" target="_blank"><i class="fa fa-custom zhihu fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="/images/wechat-qrcode-offical.webp" title="微信公众号 → &#x2F;images&#x2F;wechat-qrcode-offical.webp"><i class="fab fa-weixin fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:imzlp@foxmail.com" title="E-Mail → mailto:imzlp@foxmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fa fa-rss fa-fw"></i></a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://consolehelp.imzlp.com/" title="https:&#x2F;&#x2F;consolehelp.imzlp.com&#x2F;" rel="noopener" target="_blank">UE Console Help</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://imzlp.com/opensource/" title="https:&#x2F;&#x2F;imzlp.com&#x2F;opensource&#x2F;" rel="noopener" target="_blank">Open Source Projects</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://imzlp.com/posts/11515/" title="https:&#x2F;&#x2F;imzlp.com&#x2F;posts&#x2F;11515&#x2F;" rel="noopener" target="_blank">UE C++ API Dash Documents</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://ue5wiki.com/" title="https:&#x2F;&#x2F;ue5wiki.com&#x2F;" rel="noopener" target="_blank">Unreal Engine Wiki</a>
        </li>
    </ul>
  </div>

      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2014 – 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">LIPENGZHA</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="Symbols count total">1.5m</span>
</div>
  <div class="powered-by-other">
    
	    <center>Github Pages | Actions | NeXT | Cloudflare | Hexo Deploy</center>
      
  </div>

<script>
function checkWebp(callback) {
    var img = new Image();
    img.onload = function () { callback((img.width > 0) && (img.height > 0)); };
    img.onerror = function () { callback(false); };
    img.src = 'data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA';
}
function showImage(useWebp) {
    var imgs = [].slice.call(document.querySelectorAll('img'));
    imgs.forEach(function (e) {
        if (!useWebp) {
            var src = e.getAttribute('data-src')
            src = src.replace(/\.webp$/, '.png');
            e.setAttribute('data-src', src);
        }
    });
}
checkWebp(showImage);
</script>

        








      </div>
    </footer>
  </div>

  
  <script src="//lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/animejs/3.2.1/anime.min.js"></script>
  <script src="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/jquery/3.5.1/jquery.min.js"></script>
  <script src="//lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/fancybox/3.5.7/jquery.fancybox.min.js"></script>
  <script src="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/lozad.js/1.16.0/lozad.min.js"></script>
  <script src="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/pangu/4.0.7/pangu.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>



<script src="/js/code-unfold.js"></script>

  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>




  
<script src="/js/local-search.js"></script>









<script>
document.querySelectorAll('.pdfobject-container').forEach(element => {
  let url = element.dataset.target;
  let pdfOpenParams = {
    navpanes : 0,
    toolbar  : 0,
    statusbar: 0,
    pagemode : 'thumbs',
    view     : 'FitH'
  };
  let pdfOpenFragment = '#' + Object.entries(pdfOpenParams).map(([key, value]) => `${key}=${encodeURIComponent(value)}`).join('&');
  let fullURL = `/lib/pdf/web/viewer.html?file=${encodeURIComponent(url)}${pdfOpenFragment}`;

  if (NexT.utils.supportsPDFs()) {
    element.innerHTML = `<embed class="pdfobject" src="${url + pdfOpenFragment}" type="application/pdf" style="height: ${element.dataset.height};">`;
  } else {
    element.innerHTML = `<iframe src="${fullURL}" style="height: ${element.dataset.height};" frameborder="0"></iframe>`;
  }
});
</script>


<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  

  
  <script src="//img.imzlp.com/imgs/zlp/picgo/2021/quicklink.umd.js"></script>
  <script>
      window.addEventListener('load', () => {
      quicklink({
        timeout : 3000,
        priority: true,
        ignores : [uri => uri.includes('#'),uri => uri === 'https://en.imzlp.com/posts/42318/',]
      });
      });
  </script>


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/valine/1.4.14/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    var requiredFields = 'nick';
    requiredFields = requiredFields.split(',');
    
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'oCE6RMVkVoi5MgUhvFsn1EvV-gzGzoHsz',
      appKey     : 'K9SOaNYJ8PV6xaoFggWG5xvv',
      placeholder: "Leave something behind~",
      avatar     : 'robohash',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : 'en' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : '',
      requiredFields: requiredFields
    });
  }, window.Valine);
});
</script>

</body>
</html>
