<!DOCTYPE html>
<html lang="en,default">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon-32x32-tilt-brush.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-tilt-brush.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-tilt-brush.png">
  <link rel="mask-icon" href="/images/favicon-32x32-tilt-brush.png" color="#222">
  <meta name="google-site-verification" content="ttIkhAIFZQM9Huj8roB0l95ePN2Tv2zv2wRFksi09WA">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noto Serif SC:300,300italic,400,400italic,700,700italic|Pacifico:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Roboto Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="//lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/5.15.2/css/all.min.css">
  <link rel="stylesheet" href="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/fancybox/3.5.7/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"en.imzlp.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false,"width":280},"copycode":{"enable":true,"show_result":true,"style":"flat"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"manual"},"fancybox":true,"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":false,"nav":null,"activeClass":"valine"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"code_unfold":{"enable":true,"CODE_MAX_HEIGHT":600},"path":"search.xml"};
  </script>

  <meta name="description" content="The preview video for UE5 introduces a modular development mechanism for GamePlay, similar to mod-style development and management of game features and resources, referred to as “Game Feature”. This h">
<meta property="og:type" content="article">
<meta property="og:title" content="UE5: Game Feature Tech Preview">
<meta property="og:url" content="https://en.imzlp.com/posts/17658/index.html">
<meta property="og:site_name" content="Z&#39;s Blog">
<meta property="og:description" content="The preview video for UE5 introduces a modular development mechanism for GamePlay, similar to mod-style development and management of game features and resources, referred to as “Game Feature”. This h">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/picgo/2021/image-20210527130727353.webp">
<meta property="article:published_time" content="2021-11-17T12:31:24.000Z">
<meta property="article:modified_time" content="2021-11-17T12:31:24.000Z">
<meta property="article:author" content="LIPENGZHA">
<meta property="article:tag" content="UnrealEngine">
<meta property="article:tag" content="GameFeature">
<meta property="article:tag" content="GameplayModular">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img.imzlp.com/imgs/zlp/picgo/2021/image-20210527130727353.webp">

<link rel="canonical" href="https://en.imzlp.com/posts/17658/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>UE5: Game Feature Tech Preview | Z's Blog</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-FDCJ41EFP5"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-FDCJ41EFP5');
      }
    </script>






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.staticfile.org/lxgw-wenkai-screen-webfont/1.7.0/style.min.css" /><!-- hexo injector head_end end --><link rel="alternate" href="/atom.xml" title="Z's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Z's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        
            
  <li class="menu-item menu-item-notes">

    <a href="/notes/" rel="section"><i class="fa fa-edit fa-fw"></i>Notes</a>

  </li>


      
        
            
  <li class="menu-item menu-item-essay">

    <a href="/essay/" rel="section"><i class="fas fa-feather-alt fa-fw"></i>Essay</a>

  </li>


      
        
            
  <li class="menu-item menu-item-resources">

    <a href="/resources/" rel="section"><i class="fa fa-inbox fa-fw"></i>Resources</a>

  </li>


      
        <li class="menu-item menu-item-friends">

    <a href="/friends/" rel="section"><i class="fas fa-link fa-fw"></i>Friends</a>

  </li>
        
            
  <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About Me</a>

  </li>


      
        <li class="menu-item menu-item-showcase">

    <a href="/showcase/" rel="section"><i class="fa fa-solid fa-trophy fa-fw"></i>ShowCase</a>

  </li>
        <li class="menu-item menu-item-changelog">

    <a href="/changelog/" rel="section"><i class="fa fa-history fa-fw"></i>Site Log</a>

  </li>
        <li class="menu-item menu-item-opensource">

    <a href="/opensource/" rel="section"><i class="fas fa-code-branch fa-fw"></i>Open Source</a>

  </li>
        <li class="menu-item menu-item-uewiki">

    <a href="https://ue5wiki.com/" rel="noopener" target="_blank"><i class="fab fa-wikipedia-w fa-fw"></i>Unreal Wiki</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>



<script type="text/javascript">
  let domain='en.imzlp.com';
  let domain_str = atob(domain);
  let pathname = location.pathname;
  if (domain_str!= location.host.toLowerCase()){
        console.log(`this host is not safe,jump to https://${domain_str}${pathname}`);
        location.href=`https://${domain_str}${pathname}`;
  }
</script>

</div>
    </header>

    
  <div class="reading-progress-bar"></div>
  <div class="l10n-header-widget">
    <script>
      // 获取当前页面的 URL
      const currentUrl = window.location.href;
      // 替换 URL 中的部分内容
      const jumpToL10nLink = currentUrl.replace('en.imzlp.com', 'imzlp.com');
      // 将 jumpToL10nLink 绑定到一个全局变量
      window.jumpToL10nLink = jumpToL10nLink;
    </script>

    <a href="#" class="post-l10n-link" title="切换至中文版本" style="float: left;border-bottom: none;" rel="noopener" target="_blank" onclick="window.open(window.jumpToL10nLink, '_blank'); return false;">
      <i class="fa fa-solid fa-language"></i>
    </a>
  </div>



    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en"
  >
    <link itemprop="mainEntityOfPage" href="https://en.imzlp.com/posts/17658/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://img.imzlp.com/imgs/zlp/picgo/2023/202304152112902.webp">
      <meta itemprop="name" content="LIPENGZHA">
      <meta itemprop="description" content=""I think, therefore I am"">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Z's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          UE5: Game Feature Tech Preview<a href="https://github.com/imzlp/blog-md/blob/en/_posts/2021-11-17-17658.md" class="post-edit-link" title="Edit this post" style="float: right;border-bottom: 0px;" rel="noopener" target="_blank"><i class="fa fa-pen-nib"></i></a><a href="https://imzlp.com/posts/17658/" class="post-l10n-link" title="切换至中文版本" style="float: left;border-bottom: 0px;" rel="noopener" target="_blank"><i class="fa fa-solid fa-language"></i></a>
        </h1>

        
          <div class="post-subtitle" style="text-align: center;line-height: 1;">
            <sub text-align="center" style="font-size: 15px;align-content: center;font-style: italic;bottom: 0em;">UE5：Game Feature预研</sub>
          </div>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-11-17 12:31 12:31:24:31" itemprop="dateCreated datePublished" datetime="2021-11-17T12:31:24+00:00">2021-11-17 12:31</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/UnrealEngine/" itemprop="url" rel="index"><span itemprop="name">UnrealEngine</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/UnrealEngine/GameFeature/" itemprop="url" rel="index"><span itemprop="name">GameFeature</span></a>
                </span>
            </span>

          
            <span id="/posts/17658/" class="post-meta-item leancloud_visitors" data-flag-title="UE5: Game Feature Tech Preview" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>8.7k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>22 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <div class="post-gallery" itemscope itemtype="http://schema.org/ImageGallery">
              <img src="https://img.imzlp.com/imgs/zlp/picgo/2021/image-20210527130727353.webp" itemprop="contentUrl" style="border-radius: 20px;">
         </div>
        <p>The preview video for UE5 introduces a modular development mechanism for GamePlay, similar to mod-style development and management of game features and resources, referred to as “Game Feature”. This has already been enabled in UE4.27 and UE5. I think this new modular gameplay format is great, so I’ve conducted a technical research.</p>
<p>This article introduces the activation process and operational mechanism of Game Features, and at the end shares a demo based on Game Features. Additionally, I implemented a mechanism in <a target="_blank" rel="noopener" href="https://imzlp.com/posts/17590">HotPatcher</a> that allows features to be packaged independently; Game Features do not need to be pre-packaged into the base package and can be downloaded and loaded on demand during runtime, achieving true modular loading.</p>
<p>Currently, the UE5 EA version still has some imperfections, and related content will be supplemented as the engine updates.</p>
<span id="more"></span>

<p>The problem that Game Feature aims to solve is the modularization of Game Play, aggregating certain functions and associated resources as a separate feature that can be loaded when needed and unloaded when not needed. This allows for dynamic management of game runtime resources without relying on a complete set of game resources at startup.</p>
<p>This is similar to a hot update mechanism, because Game Feature is essentially a set of resource packages; however, UE adds dynamic execution logic on top of the resource package, allowing one to conveniently add functionalities to existing actors, and some small gameplay can be made into a standalone Game Feature, which even has a flavor of ECS. But unlike hot updates, the main idea of Game Feature is to dynamically add and unload functionalities at runtime rather than replace existing resources and functionalities.</p>
<p>The implementation of UE’s Game Feature is based on the <code>Plugin</code> system, where each Game Feature can be regarded as a Content Only plugin that manages a number of resources and pluggable game logic through <code>GameFeatureData</code> to manage resources and behaviors of the feature.</p>
<p>However, currently, it seems that UE’s implementation only treats it as a modular management mechanism without the ability to package it separately. Through research, it’s also possible to implement dynamic downloading and enabling of Game Features. I realized packaging of Game Features based on <a target="_blank" rel="noopener" href="https://imzlp.com/posts/17590">HotPatcher</a>, allowing any Game Feature to be packaged separately, downloaded as needed, and enabled in the game. The specific introduction can be found in <a href="#%E7%8B%AC%E7%AB%8B%E6%89%93%E5%8C%85GameFeature">独立打包GameFeature</a>.</p>
<h2 id="General-Introduction"><a href="#General-Introduction" class="headerlink" title="General Introduction"></a>General Introduction</h2><h3 id="Activation-and-Creation"><a href="#Activation-and-Creation" class="headerlink" title="Activation and Creation"></a>Activation and Creation</h3><p>First, enable the <code>Game Feature</code> and <code>Modular Feature</code> plugins:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/image-20210527123206663.webp"></p>
<p>After enabling, there will be a <code>GameFeature</code> setting option in the project settings:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/image-20210527124057559.webp"></p>
<p>Creating a new GameFeature requires creating a plugin, and you can see the <code>Game Feature(Content Only)</code> plugin template:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/image-20210527123251195.webp"></p>
<p>This will create a plugin located in the project’s <code>Plugins/GameFeatures</code> directory:</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\lipengzha\Documents\Unreal Projects\ThirdPerson_UE5\Plugins\GameFeatures&gt;tree /a /f</span><br><span class="line">Volume in drive C has no label.</span><br><span class="line">Volume Serial Number is 0C49-9EA3</span><br><span class="line">C:.</span><br><span class="line">\---GF_Examles</span><br><span class="line">    |   GF_Examles.uplugin</span><br><span class="line">    |</span><br><span class="line">    +---Content</span><br><span class="line">    |       GF_Examles.uasset</span><br><span class="line">    |</span><br><span class="line">    \---Resources</span><br><span class="line">            Icon128.webp</span><br></pre></td></tr></table></figure>

<p>Its uplugin content is as follows:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;FileVersion&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;Version&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;VersionName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;FriendlyName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;GF_Examles&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;Description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;Category&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Game Features&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;CreatedBy&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;CreatedByURL&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;DocsURL&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;MarketplaceURL&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;SupportURL&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;CanContainContent&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;IsBetaVersion&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;IsExperimentalVersion&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;Installed&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;ExplicitlyLoaded&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;BuiltInInitialFeatureState&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Installed&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>Create a resource of <code>GameFeatureData</code> in the root directory of the plugin’s Content; note that it <strong>must</strong> have the same name as the plugin:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/image-20210527123413226.webp"></p>
<p>In the EditPlugin options, you can set the initial state of the current Game Feature. If set to Active, it will automatically load and activate by default when the engine starts. It is recommended to set it to <code>Registered</code> during editor editing; if set to <code>Installed</code>, the engine will not load the plugin at startup, making it invisible in the Content Browser and unable to be packaged:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/20210527194158.webp"></p>
<p>If the <code>Initial State</code> of the <code>Game Feature</code> is <code>Active</code>, it will auto-load upon engine startup, as shown in the call stack:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/20210527192817.webp"></p>
<p>The states a Game Feature can have are:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** The states a game feature plugin can be in before fully active */</span></span><br><span class="line"><span class="keyword">enum class</span> <span class="title class_">EGameFeaturePluginState</span> : uint8</span><br><span class="line">&#123;</span><br><span class="line">  Uninitialized,        <span class="comment">// Unset. Not yet been set up.</span></span><br><span class="line">  UnknownStatus,        <span class="comment">// Initialized, but the only thing known is the URL to query status.</span></span><br><span class="line">  CheckingStatus,       <span class="comment">// Transition state UnknownStatus -&gt; StatusKnown. The status is in the process of being queried.</span></span><br><span class="line">  StatusKnown,        <span class="comment">// The plugin&#x27;s information is known, but no action has taken place yet.</span></span><br><span class="line">  Uninstalling,       <span class="comment">// Transition state Installed -&gt; StatusKnown. In the process of removing from local storage.</span></span><br><span class="line">  Downloading,        <span class="comment">// Transition state StatusKnown -&gt; Installed. In the process of adding to local storage.</span></span><br><span class="line">  Installed,          <span class="comment">// The plugin is in local storage (i.e. it is on the hard drive)</span></span><br><span class="line">  WaitingForDependencies,   <span class="comment">// Transition state Installed -&gt; Registered. In the process of loading code/content for all dependencies into memory.</span></span><br><span class="line">  Unmounting,         <span class="comment">// Transition state Registered -&gt; Installed. The content file(s) (i.e. pak file) for the plugin is unmounting.</span></span><br><span class="line">  Mounting,         <span class="comment">// Transition state Installed -&gt; Registered. The content files(s) (i.e. pak file) for the plugin is getting mounted.</span></span><br><span class="line">  Unregistering,        <span class="comment">// Transition state Registered -&gt; Installed. Cleaning up data gathered in Registering.</span></span><br><span class="line">  Registering,        <span class="comment">// Transition state Installed -&gt; Registered. Discovering assets in the plugin, but not loading them, except a few for discovery reasons.</span></span><br><span class="line">  Registered,         <span class="comment">// The assets in the plugin are known, but have not yet been loaded, except a few for discovery reasons.</span></span><br><span class="line">  Unloading,          <span class="comment">// Transition state Loaded -&gt; Registered. In the process of removing code/content from memory. </span></span><br><span class="line">  Loading,          <span class="comment">// Transition state Registered -&gt; Loaded. In the process of loading code/content into memory.</span></span><br><span class="line">  Loaded,           <span class="comment">// The plugin is loaded into memory, but not registered with game systems and active.</span></span><br><span class="line">  Deactivating,       <span class="comment">// Transition state Active -&gt; Loaded. Currently unregistering with game systems.</span></span><br><span class="line">  Activating,         <span class="comment">// Transition state Loaded -&gt; Active. Currently registering plugin code/content with game systems.</span></span><br><span class="line">  Active,           <span class="comment">// Plugin is fully loaded and active. It is affecting the game.</span></span><br><span class="line"></span><br><span class="line">  MAX</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>Common operations on the business side include:</p>
<ol>
<li>load</li>
<li>activate</li>
<li>deactivate</li>
<li>unload</li>
</ol>
<p>To call them, you need to pass the <code>PluginURL</code>, which is the path to the <code>uplugin</code> file, and you can obtain it by using:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GameFeatureSubsystem-&gt;<span class="built_in">GetPluginURLForBuiltInPluginByName</span>(PluginName,OutPluginURL);</span><br></pre></td></tr></table></figure>

<p>These functions are not exposed to Blueprints, so you can create a wrapper (note to add module dependencies for <code>GameFeatures</code> and <code>Projects</code>):</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .h</span></span><br><span class="line"><span class="built_in">UCLASS</span>()</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GAMEFEATUREUTILS_API</span> UFlibGameFeature : <span class="keyword">public</span> UBlueprintFunctionLibrary</span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">GENERATED_UCLASS_BODY</span>()</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable)</span><br><span class="line">	<span class="function"><span class="type">static</span> <span class="type">bool</span> <span class="title">GetPluginURLForBuiltInPluginByName</span><span class="params">(<span class="keyword">class</span> UGameFeaturesSubsystem* Subsystem, <span class="type">const</span> FString&amp; PluginName, FString&amp; OutPluginURL)</span></span>;</span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable)</span><br><span class="line">	<span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">LoadGameFeature</span><span class="params">(<span class="keyword">class</span> UGameFeaturesSubsystem* Subsystem, <span class="type">const</span> FString&amp; InFeature)</span></span>;</span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable)</span><br><span class="line">	<span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">ActiveGameFeature</span><span class="params">(<span class="keyword">class</span> UGameFeaturesSubsystem* Subsystem, <span class="type">const</span> FString&amp; InFeature)</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable)</span><br><span class="line">	<span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">LoadBuiltInGameFeaturePlugin</span><span class="params">(UGameFeaturesSubsystem* Subsystem, <span class="type">const</span> FString&amp; PluginName)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable)</span><br><span class="line">	<span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">LoadBuiltInGameFeaturePlugins</span><span class="params">(UGameFeaturesSubsystem* Subsystem)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable)</span><br><span class="line">	<span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">UnloadGameFeature</span><span class="params">(UGameFeaturesSubsystem* Subsystem, <span class="type">const</span> FString&amp; InFeature, <span class="type">bool</span> bKeepRegistered = <span class="literal">false</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable)</span><br><span class="line">	<span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">DeactivateGameFeature</span><span class="params">(UGameFeaturesSubsystem* Subsystem, <span class="type">const</span> FString&amp; InFeature)</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">OnStatus</span><span class="params">(<span class="type">const</span> UE::GameFeatures::FResult&amp; InStatus)</span></span>;</span><br><span class="line">    <span class="built_in">UFUNCTION</span>(BlueprintCallable, BlueprintPure, meta = (WorldContext = <span class="string">&quot;WorldContextObject&quot;</span>))</span><br><span class="line">	<span class="function"><span class="type">static</span> <span class="keyword">class</span> UGameFrameworkComponentManager* <span class="title">GetGameFrameworkComponentManager</span><span class="params">(UObject* WorldContextObject)</span></span>;</span><br><span class="line">	</span><br><span class="line">    <span class="built_in">UFUNCTION</span>(BlueprintCallable, meta = (WorldContext = <span class="string">&quot;WorldContextObject&quot;</span>, DefaultToSelf = <span class="string">&quot;Owner&quot;</span>))</span><br><span class="line">	<span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">AddReceiver</span><span class="params">(UObject* WorldContextObject, AActor* Owner)</span></span>;</span><br><span class="line">	</span><br><span class="line">    <span class="built_in">UFUNCTION</span>(BlueprintCallable, meta = (WorldContext = <span class="string">&quot;WorldContextObject&quot;</span>, DefaultToSelf = <span class="string">&quot;Owner&quot;</span>))</span><br><span class="line">	<span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">RemoveReceiver</span><span class="params">(UObject* WorldContextObject, AActor* Owner)</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>While editing in the engine, you can set the Feature to <code>Active</code>, which will auto-load it at engine startup and display it in the Content Browser; otherwise, it will not display or be editable if it hasn’t been loaded.</p>
<h3 id="Feature-Actions"><a href="#Feature-Actions" class="headerlink" title="Feature Actions"></a>Feature Actions</h3><p>You can add <code>Action</code> and resources managed by the current GameFeature in the configuration of Game Feature to implement the necessary modular functionality.</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/image-20210527123646192.webp"></p>
<p>For example, with <code>Add Component</code>, you can automatically create a component on a specified class:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/20211114165530.webp"></p>
<p>When the Feature is loaded and set to Active, it will automatically add that component to <strong>all instances</strong> of the specified Actor Class.</p>
<p><strong>Note</strong>, you need to pre-add the target Actor to <code>Receiver</code>:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/20211116152451.webp"></p>
<p>When the Feature is Deactive, that component will be removed from the Actor, allowing custom functionality to be executed in the component’s <code>BeginPlay</code>/<code>EndPlay</code>.</p>
<p>Based on the function library above, I’ve created a test loading Feature UMG:<br><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/20211114174914.webp"></p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/20211114175147.webp"></p>
<p>Feature loading test:<br>I created a <code>BP_Component</code> component and added it to <code>BP_Pawn</code>; in the component’s <code>BeginPlay</code>/<code>EndPlay</code>, I create and remove a UMG:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/image-20210527123646192.webp"></p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/20211114180339.webp" alt="BP_Component"></p>
<p>Runtime effect:<br><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/GameFeature_20211114.gif"></p>
<h3 id="Game-Features-Settings"><a href="#Game-Features-Settings" class="headerlink" title="Game Features Settings"></a>Game Features Settings</h3><p>In UE5’s <code>Project Settings</code> - <code>Game Features</code>, you can set <code>GameFeatureManagerClass</code>, which is used to launch the <code>GameFeature</code> in the project, allowing you to control which <code>Features</code> are loaded.</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/20211114153224.webp"></p>
<p>We can also inherit <code>UGameFeaturesProjectPolicies</code> to implement our own control flow:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">UGameFeaturesUtilsProjectPolicies::InitGameFeatureManager</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">UE_LOG</span>(LogGameFeatures, Log, <span class="built_in">TEXT</span>(<span class="string">&quot;Scanning for built-in game feature plugins&quot;</span>));</span><br><span class="line"></span><br><span class="line">	<span class="keyword">auto</span> AdditionalFilter = [&amp;](<span class="type">const</span> FString&amp; PluginFilename, <span class="type">const</span> FGameFeaturePluginDetails&amp; PluginDetails, FBuiltInGameFeaturePluginBehaviorOptions&amp; OutOptions) -&gt; <span class="type">bool</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	UGameFeaturesSubsystem::<span class="built_in">Get</span>().<span class="built_in">LoadBuiltInGameFeaturePlugins</span>(AdditionalFilter);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>By passing a predicate in <code>LoadBuiltInGameFeaturePlugins</code>, you can control the loading of Features, and during Feature loading, this callback will decide whether to load:</p>
<figure class="highlight cpp"><figcaption><span>Engine\Plugins\Experimental\GameFeatures\Source\GameFeatures\Private\GameFeaturesSubsystem.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">UGameFeaturesSubsystem::LoadBuiltInGameFeaturePlugin</span><span class="params">(<span class="type">const</span> TSharedRef&lt;IPlugin&gt;&amp; Plugin, FBuiltInPluginAdditionalFilters AdditionalFilter)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// ...</span></span><br><span class="line">	<span class="type">bool</span> bShouldProcess = <span class="built_in">AdditionalFilter</span>(PluginDescriptorFilename, PluginDetails, BehaviorOptions);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (bShouldProcess)</span><br><span class="line">	&#123;</span><br><span class="line">		UGameFeaturePluginStateMachine* StateMachine = <span class="built_in">GetGameFeaturePluginStateMachine</span>(PluginURL, <span class="literal">true</span>);</span><br><span class="line">		<span class="comment">// ...</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Other-Resources"><a href="#Other-Resources" class="headerlink" title="Other Resources"></a>Other Resources</h3><p>Epic has also released two videos introducing Game Features:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1dL4y1h7YW?from=search&seid=4062650776904965432&spm_id_from=333.337.0.0">Feature Introduction: Modular Game Functions in UE5: Plug and Play, The Way of Unreal (Official Subtitles)</a></li>
<li><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1g34112799?from=search&seid=4062650776904965432&spm_id_from=333.337.0.0">English Live Broadcast: Modular Game Features (Official Subtitles)</a></li>
</ul>
<h2 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h2><p>To demonstrate the usage of Game Feature, I created a demo using the Game Feature mechanism to implement a simple gameplay example:</p>
<ol>
<li>Load the Feature while randomly creating 30 collectible items in the scene.</li>
<li>A countdown of 20 seconds for the player to collect items in the scene.</li>
<li>Score recording.</li>
<li>Clear all created Actors when the timer ends.</li>
</ol>
<p>All functionalities and resources are within the GF_Feature Game Feature plugin, making it an independent module for plug-and-play in the game.</p>
<p>Demo video:</p>
<div class="bilibili-video" style="position: relative;width: 100%;height: 0;padding-bottom: 75%;"><iframe frameborder="0" src="https://player.bilibili.com/player.html?bvid=BV1gh41147y8&high_quality=1&danmaku=1&autoplay=0" style="position: absolute;width: 100%;height: 100%;left: 0;top: 0;"></iframe></div>

<p>Download the Demo: <a target="_blank" rel="noopener" href="https://stusdnueducn-my.sharepoint.com/:u:/g/personal/2017020625_stu_sdnu_edu_cn/ES4yYA0pg5lLjsi8vyKLThsB61ONTm7TWnedthOVqf-yoQ?e=gKTCBJ">GameFeatureDemo_BlankUE5.7z</a></p>
<h2 id="Packaging"><a href="#Packaging" class="headerlink" title="Packaging"></a>Packaging</h2><h3 id="Into-the-Base-Package"><a href="#Into-the-Base-Package" class="headerlink" title="Into the Base Package"></a>Into the Base Package</h3><p>After creating the Game Feature plugin, restarting the project will prompt an <code>Add entry to PrimaryAssetTypesToScan</code>. Clicking it will automatically add it to the project’s <code>Asset Manager</code>, where there will be a <code>GameFeatureData</code> option to manage packaged Game Features:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/20211117145554.webp"></p>
<p>When packaging, you need to set the <code>Init State</code> of the Game Feature to <code>Registered</code> to ensure that the Feature’s plugin will be loaded during packaging; otherwise, the Feature cannot be packaged.</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/20211117145454.webp"></p>
<h3 id="Independent-Packaging-of-Game-Feature"><a href="#Independent-Packaging-of-Game-Feature" class="headerlink" title="Independent Packaging of Game Feature"></a>Independent Packaging of Game Feature</h3><p>In the previous section, after adding the configuration of GameFeatureData to AssetManager, when packaging the base package, the Features set to <code>Registered</code> will be packaged along with it.</p>
<p>However, since this is Modular Gameplay, is it feasible not to package Game Features into the base package and to download and load them on demand at runtime? The answer is definitely yes, because Game Feature is essentially a Content Only Plugin, so you can <strong>package the resources within the plugin separately</strong> and mount the plugin during runtime.</p>
<p>Based on <a target="_blank" rel="noopener" href="https://imzlp.com/posts/17590">HotPatcher</a>, I implemented a module for independently packaging Game Features that can be packaged into a pak for any Content Only plugin, mounted at runtime.</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/20211118111836.webp"></p>
<p>It can package the needed plugin information, including:</p>
<ol>
<li>The plugin’s uplugin </li>
<li>All resources within the plugin</li>
<li>The AssetRegistry of resources in the plugin</li>
<li>The ShaderLibrary compiled for resources in the plugin</li>
</ol>
<p>The engine relies on this data to load plugins and their resources. I will analyze the specific loading process and code details when I have time.</p>
<p>Taking the <code>GF_Feature</code> in the demo as an example, the files included after packaging are:</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">D:\UnrealProjects\BlankExample\Package\GF_Feature\Windows&gt;&quot;C:\Program Files\Epic Games\UE_5.0ea\Engine\Binaries\Win64\UnrealPak.exe&quot; -list GF_Feature_Windows_001_P.pak</span><br><span class="line">LogPakFile: Display: Using command line for crypto configuration</span><br><span class="line">LogPakFile: Display: Mount point ../../../BlankExample/Plugins/</span><br><span class="line">LogPakFile: Display: &quot;GameFeatures/GF_Feature/AssetRegistry.bin&quot; offset: 0, size: 7545 bytes, sha1: 6C6010E9298EABA621CE2CD95A8A6D96F90E4465, compression: Zlib.</span><br><span class="line">LogPakFile: Display: &quot;GameFeatures/GF_Feature/Content/GF_Component.uasset&quot; offset: 7618, size: 1324 bytes, sha1: 955C7F3B1BB8721AD468A6E3AE6FB8B398C6D5B8, compression: Zlib.</span><br><span class="line">LogPakFile: Display: &quot;GameFeatures/GF_Feature/Content/GF_Component.uexp&quot; offset: 9015, size: 1161 bytes, sha1: 7EAACE73CF68A72BF1673B8F8F97AFDED725286B, compression: None.</span><br><span class="line">LogPakFile: Display: &quot;GameFeatures/GF_Feature/Content/GF_Feature.uasset&quot; offset: 10229, size: 1330 bytes, sha1: FEE0C1E68CCFC845EAA5C824C3FB38C14AB5AE33, compression: None.</span><br><span class="line">LogPakFile: Display: &quot;GameFeatures/GF_Feature/Content/GF_Feature.uexp&quot; offset: 11612, size: 56 bytes, sha1: 47913DCCC03900CC01E9B4666759275267D8ACDD, compression: None.</span><br><span class="line">LogPakFile: Display: &quot;GameFeatures/GF_Feature/Content/UI/GF_UMG.uasset&quot; offset: 16697, size: 1104 bytes, sha1: 5D1C10BE607042A7540384F217921DFE1DD65AE2, compression: Zlib.</span><br><span class="line">LogPakFile: Display: &quot;GameFeatures/GF_Feature/Content/UI/GF_UMG.uexp&quot; offset: 17874, size: 243 bytes, sha1: 2B17E9E182662754205E81987FDEB08BE4B0E3ED, compression: None.</span><br><span class="line">LogPakFile: Display: &quot;GameFeatures/GF_Feature/GF_Feature.uplugin&quot; offset: 18170, size: 626 bytes, sha1: 79EFDB00D8F3ECC08767F1B2F4AD43F1CDBFA304, compression: None.</span><br><span class="line">LogPakFile: Display: &quot;GameFeatureUtils/Content/GamePlay/BP_Pawn.uasset&quot; offset: 18849, size: 1359 bytes, sha1: BABF48B38EEC32F4667F4D0EA2888A92AF608BA5, compression: Zlib.</span><br><span class="line">LogPakFile: Display: &quot;GameFeatureUtils/Content/GamePlay/BP_Pawn.uexp&quot; offset: 20281, size: 851 bytes, sha1: 3307F3E3504C90ED837B9C2F7A6C5B38435FF031, compression: None.</span><br><span class="line">LogPakFile: Display: 12 files (20449 bytes), (0 filtered bytes).</span><br><span class="line">LogPakFile: Display: Unreal pak executed in 0.002602 seconds</span><br></pre></td></tr></table></figure>

<p>You can mount this pak to the game at runtime so that UFS can find the Feature’s files.</p>
<p>However, there are three issues that need to be resolved at runtime:</p>
<ol>
<li>Dynamically downloaded Feature plugins for the engine to recognize.</li>
<li>Allow the engine to index resources in the plugin.</li>
<li>Load the Shader Library for resources in the plugin.</li>
</ol>
<p>In previous notes, I analyzed the engine’s plugin loading process. By default, a <code>upluginmanifest</code> file is generated with information about all plugins in the project, which allows the engine to determine which plugins are enabled at startup. Relevant wiki: <a target="_blank" rel="noopener" href="https://ue5wiki.com/wiki/16649/">upluginmanifest</a>, and the related code in the engine can be found in the <code>PluginManager.cpp</code>‘s <code>ReadAllPlugins</code> function.</p>
<p>The PluginManager also provides a method to load a specific plugin uplugin:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Adds a single plugin to the list of plugins. Faster than refreshing all plugins with RefreshPluginsList() when you only want to add one. Does nothing if already in the list.</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * @return True if the plugin was added or already in the list. False if it failed to load.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">bool</span> <span class="title">AddToPluginsList</span><span class="params">( <span class="type">const</span> FString&amp; PluginFilename )</span> </span>= <span class="number">0</span>;</span><br></pre></td></tr></table></figure>

<p>You can dynamically add plugins that are not in the <code>upluginmanifest</code> to the engine, and this interface is also called when the engine adds plugins:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/20211120164822.webp"></p>
<blockquote>
<p>Note: Plugins with C++ code cannot be added; only Content Only plugins are allowed.</p>
</blockquote>
<p>Using the <code>GF_Feature</code> as an example:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IPluginManager::<span class="built_in">Get</span>().<span class="built_in">AddToPluginsList</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;../../../BlankExample/Plugins/GameFeatures/GF_Feature/GF_Feature.uplugin&quot;</span>));</span><br></pre></td></tr></table></figure>

<p>This adds <code>GF_Feature</code> to the PluginManager as an enabled plugin in the game.</p>
<p>Next, you need to call the following function to register the GF plugin in the plugin list:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IPluginManager::<span class="built_in">Get</span>().<span class="built_in">MountNewlyCreatedPlugin</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;GF_Feature&quot;</span>));</span><br></pre></td></tr></table></figure>

<p>Finally, to enable UE to find the resources in the plugin, the AssetRegistry.bin from the plugin needs to be added to the engine’s AssetRegistry; I encapsulated a method in the plugin:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">UFlibPakHelper::LoadAssetRegistry</span><span class="params">(<span class="type">const</span> FString&amp; LibraryName, <span class="type">const</span> FString&amp; LibraryDir)</span></span>;</span><br></pre></td></tr></table></figure>

<p>Taking <code>GF_Feature</code> as an example:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UFlibPakHelper::<span class="built_in">LoadAssetRegistry</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;GF_Feature&quot;</span>),<span class="built_in">TEXT</span>(<span class="string">&quot;../../../BlankExample/Plugins/GameFeatures/GF_Feature/&quot;</span>));</span><br></pre></td></tr></table></figure>

<p>This deserializes and adds all resource information in the plugin to the AssetRegistry module for Game Feature loading.</p>
<blockquote>
<p>Note: The AssetRegistry is not necessary in normal games, but when Game Feature is activated, it will check whether resources exist in the AssetRegistry when loading plugin resources. Therefore, it is mandatory to load AssetRegistry data when Game Feature is enabled.</p>
</blockquote>
<p>Lastly, for the Shader Library in the plugin, by default, the compiled Shaders for resources in the plugin are stored as a similarly named Shader Library. I also encapsulated a loading function:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">UFlibPakHelper::LoadShaderbytecode</span><span class="params">(TEXT(<span class="string">&quot;GF_Feature&quot;</span>),TEXT(<span class="string">&quot;../../../BlankExample/Plugins/GameFeatures/GF_Feature/&quot;</span>))</span></span>;	</span><br></pre></td></tr></table></figure>

<p>For the detailed content of the Shader Library, you can refer to my previous article: <a target="_blank" rel="noopener" href="https://imzlp.com/posts/15810/">UE Hot Update: Shader Update Strategy</a>.</p>
<p>Once the three steps above are completed, you can use <code>GameFeaturesSubsystem</code> to <code>LoadGameFeature</code>, as if it has always existed in the base package.</p>

    </div>

    
    
        
        
          
            <blockquote class="blockquote-center">
              
                The article is finished. If you have any questions, please comment and communicate.
              
            <br/>
            
                <div class="qr-code" onclick="return false">
                    <script src="/js/qrcode.min.js"></script>
                    <div id="qrcode">
                      
                        <img src="https://imzlp.com/images/wechat-qrcode.webp">
                      
                    <p>Scan the QR code on WeChat and follow me.</p>
                    </div>
                </div>
            
            </blockquote>
          
        

        
          <div class="postCopyright" style="clear:both;">
             <span>Title:</span><a href="/posts/17658/" target="_blank">UE5: Game Feature Tech Preview</a><br/>
             <span>Author:</span><a href="/about" target="_blank" title="查看 LIPENGZHA 的资料">LIPENGZHA</a><br/>
             <span>Publish Date:</span>2021/11/17 12:31<br/>
             
             <span>Word Count:</span><span class="page-count">8.7k Words</span><br/>
             
             <span>Link:</span><a href="/posts/17658/" target="_blank" title="UE5: Game Feature Tech Preview">https://en.imzlp.com/posts/17658/</a>
             <span class="copy-path" data-clipboard-text="Link: https://en.imzlp.com/posts/17658/ Author: LIPENGZHA" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
             <script src="/js/jquery.min.js"></script>
             <script src="/js/clipboard.min.js"></script>
             <script> var clipboard = new Clipboard('.copy-path'); </script>
             <br/>
             
             <span>License:</span><i class="fab fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" title="Attribution-NonCommercial-ShareAlike 4.0 International">CC BY-NC-SA 4.0</a><br/>
             
             <span>Reprinting of the full article is prohibited.</span>
          </div>
        
    

        
  <div class="reward-container">
    <div>Your donation will encourage me to keep creating!</div>
    <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
      Donate
    </button>
    <div id="qr" style="display: none;">
        
        <div style="display: inline-block;">
          <img src="/images/reward/wechatpay.webp" alt="LIPENGZHA WeChat Pay">
          <p>WeChat Pay</p>
        </div>

    </div>
  </div>



      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/UnrealEngine/" rel="tag"># UnrealEngine</a>
              <a href="/tags/GameFeature/" rel="tag"># GameFeature</a>
              <a href="/tags/GameplayModular/" rel="tag"># GameplayModular</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/posts/14354/" rel="prev" title="Things to Analyze Blog Traffic Data">
      <i class="fa fa-chevron-left"></i> Things to Analyze Blog Traffic Data
    </a></div>
      <div class="post-nav-item">
    <a href="/posts/3635/" rel="next" title="Open Source an Unreal Engine launcher Project:UE Launcher">
      Open Source an Unreal Engine launcher Project:UE Launcher <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
      <div class="tabs tabs-comment">
        <ul class="nav-tabs">
            <li class="tab"><a href="#comment-utteranc">utteranc</a></li>
            <li class="tab"><a href="#comment-valine">valine</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane utteranc" id="comment-utteranc">
              
  
  <div class="comments">
  <script src="https://utteranc.es/client.js" repo="hxhb/blog-comments" issue-term="pathname" theme="github-light" crossorigin="anonymous" async></script>
  </div>
  
  
            </div>
            <div class="tab-pane valine" id="comment-valine">
              <div class="comments" id="valine-comments"></div>
            </div>
        </div>
      </div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#General-Introduction"><span class="nav-number">1.</span> <span class="nav-text">General Introduction</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Activation-and-Creation"><span class="nav-number">1.1.</span> <span class="nav-text">Activation and Creation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Feature-Actions"><span class="nav-number">1.2.</span> <span class="nav-text">Feature Actions</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Game-Features-Settings"><span class="nav-number">1.3.</span> <span class="nav-text">Game Features Settings</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Other-Resources"><span class="nav-number">1.4.</span> <span class="nav-text">Other Resources</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Demo"><span class="nav-number">2.</span> <span class="nav-text">Demo</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Packaging"><span class="nav-number">3.</span> <span class="nav-text">Packaging</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Into-the-Base-Package"><span class="nav-number">3.1.</span> <span class="nav-text">Into the Base Package</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Independent-Packaging-of-Game-Feature"><span class="nav-number">3.2.</span> <span class="nav-text">Independent Packaging of Game Feature</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person" oncontextmenu="return false" οndragstart="return false">
    <img class="site-author-image" itemprop="image" alt="LIPENGZHA"
      src="https://img.imzlp.com/imgs/zlp/picgo/2023/202304152112902.webp">
  <p class="site-author-name" itemprop="name">LIPENGZHA</p>
  <div class="site-description" itemprop="description">"I think, therefore I am"</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
             
          <span class="site-state-item-count">190</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">95</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">190</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/hxhb" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;hxhb" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://linkedin.com/in/lipengzha" title="Linkedin → https:&#x2F;&#x2F;linkedin.com&#x2F;in&#x2F;lipengzha" rel="noopener" target="_blank"><i class="fab fa-linkedin fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.zhihu.com/people/imzlp" title="知乎 → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;imzlp" rel="noopener" target="_blank"><i class="fa fa-custom zhihu fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="/images/wechat-qrcode-offical.webp" title="微信公众号 → &#x2F;images&#x2F;wechat-qrcode-offical.webp"><i class="fab fa-weixin fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:imzlp@foxmail.com" title="E-Mail → mailto:imzlp@foxmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fa fa-rss fa-fw"></i></a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://consolehelp.imzlp.com/" title="https:&#x2F;&#x2F;consolehelp.imzlp.com&#x2F;" rel="noopener" target="_blank">UE Console Help</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://imzlp.com/opensource/" title="https:&#x2F;&#x2F;imzlp.com&#x2F;opensource&#x2F;" rel="noopener" target="_blank">Open Source Projects</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://imzlp.com/posts/11515/" title="https:&#x2F;&#x2F;imzlp.com&#x2F;posts&#x2F;11515&#x2F;" rel="noopener" target="_blank">UE C++ API Dash Documents</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://ue5wiki.com/" title="https:&#x2F;&#x2F;ue5wiki.com&#x2F;" rel="noopener" target="_blank">Unreal Engine Wiki</a>
        </li>
    </ul>
  </div>

      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2014 – 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">LIPENGZHA</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="Symbols count total">1.5m</span>
</div>
  <div class="powered-by-other">
    
	    <center>Github Pages | Actions | NeXT | Cloudflare | Hexo Deploy</center>
      
  </div>

<script>
function checkWebp(callback) {
    var img = new Image();
    img.onload = function () { callback((img.width > 0) && (img.height > 0)); };
    img.onerror = function () { callback(false); };
    img.src = 'data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA';
}
function showImage(useWebp) {
    var imgs = [].slice.call(document.querySelectorAll('img'));
    imgs.forEach(function (e) {
        if (!useWebp) {
            var src = e.getAttribute('data-src')
            src = src.replace(/\.webp$/, '.png');
            e.setAttribute('data-src', src);
        }
    });
}
checkWebp(showImage);
</script>

        








      </div>
    </footer>
  </div>

  
  <script src="//lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/animejs/3.2.1/anime.min.js"></script>
  <script src="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/jquery/3.5.1/jquery.min.js"></script>
  <script src="//lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/fancybox/3.5.7/jquery.fancybox.min.js"></script>
  <script src="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/lozad.js/1.16.0/lozad.min.js"></script>
  <script src="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/pangu/4.0.7/pangu.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>



<script src="/js/code-unfold.js"></script>

  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>




  
<script src="/js/local-search.js"></script>









<script>
document.querySelectorAll('.pdfobject-container').forEach(element => {
  let url = element.dataset.target;
  let pdfOpenParams = {
    navpanes : 0,
    toolbar  : 0,
    statusbar: 0,
    pagemode : 'thumbs',
    view     : 'FitH'
  };
  let pdfOpenFragment = '#' + Object.entries(pdfOpenParams).map(([key, value]) => `${key}=${encodeURIComponent(value)}`).join('&');
  let fullURL = `/lib/pdf/web/viewer.html?file=${encodeURIComponent(url)}${pdfOpenFragment}`;

  if (NexT.utils.supportsPDFs()) {
    element.innerHTML = `<embed class="pdfobject" src="${url + pdfOpenFragment}" type="application/pdf" style="height: ${element.dataset.height};">`;
  } else {
    element.innerHTML = `<iframe src="${fullURL}" style="height: ${element.dataset.height};" frameborder="0"></iframe>`;
  }
});
</script>


<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  

  
  <script src="//img.imzlp.com/imgs/zlp/picgo/2021/quicklink.umd.js"></script>
  <script>
      window.addEventListener('load', () => {
      quicklink({
        timeout : 3000,
        priority: true,
        ignores : [uri => uri.includes('#'),uri => uri === 'https://en.imzlp.com/posts/17658/',]
      });
      });
  </script>


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/valine/1.4.14/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    var requiredFields = 'nick';
    requiredFields = requiredFields.split(',');
    
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'oCE6RMVkVoi5MgUhvFsn1EvV-gzGzoHsz',
      appKey     : 'K9SOaNYJ8PV6xaoFggWG5xvv',
      placeholder: "Leave something behind~",
      avatar     : 'robohash',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : 'en' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : '',
      requiredFields: requiredFields
    });
  }, window.Valine);
});
</script>

</body>
</html>
