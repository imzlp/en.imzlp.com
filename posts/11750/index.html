<!DOCTYPE html>
<html lang="en,default">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon-32x32-tilt-brush.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-tilt-brush.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-tilt-brush.png">
  <link rel="mask-icon" href="/images/favicon-32x32-tilt-brush.png" color="#222">
  <meta name="google-site-verification" content="ttIkhAIFZQM9Huj8roB0l95ePN2Tv2zv2wRFksi09WA">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noto Serif SC:300,300italic,400,400italic,700,700italic|Pacifico:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Roboto Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="//lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/5.15.2/css/all.min.css">
  <link rel="stylesheet" href="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/fancybox/3.5.7/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"en.imzlp.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false,"width":280},"copycode":{"enable":true,"show_result":true,"style":"flat"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"manual"},"fancybox":true,"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":false,"nav":null,"activeClass":"valine"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"code_unfold":{"enable":true,"CODE_MAX_HEIGHT":600},"path":"search.xml"};
  </script>

  <meta name="description" content="In game project development, due to the large amount of resources involved and the broad range of personnel, it’s relatively difficult to consciously unify resource standards. If issues arise with the">
<meta property="og:type" content="article">
<meta property="og:title" content="UE Resource Scanning and inspection tool ResScannerUE">
<meta property="og:url" content="https://en.imzlp.com/posts/11750/index.html">
<meta property="og:site_name" content="Z&#39;s Blog">
<meta property="og:description" content="In game project development, due to the large amount of resources involved and the broad range of personnel, it’s relatively difficult to consciously unify resource standards. If issues arise with the">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/picgo/2022/202302051825251.webp">
<meta property="article:published_time" content="2021-09-15T15:29:18.000Z">
<meta property="article:modified_time" content="2021-09-15T15:29:18.000Z">
<meta property="article:author" content="LIPENGZHA">
<meta property="article:tag" content="UnrealEngine">
<meta property="article:tag" content="资源管理">
<meta property="article:tag" content="ResScanner">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img.imzlp.com/imgs/zlp/picgo/2022/202302051825251.webp">

<link rel="canonical" href="https://en.imzlp.com/posts/11750/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>UE Resource Scanning and inspection tool ResScannerUE | Z's Blog</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-FDCJ41EFP5"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-FDCJ41EFP5');
      }
    </script>






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.staticfile.org/lxgw-wenkai-screen-webfont/1.7.0/style.min.css" /><!-- hexo injector head_end end --><link rel="alternate" href="/atom.xml" title="Z's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Z's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        
            
  <li class="menu-item menu-item-notes">

    <a href="/notes/" rel="section"><i class="fa fa-edit fa-fw"></i>Notes</a>

  </li>


      
        
            
  <li class="menu-item menu-item-essay">

    <a href="/essay/" rel="section"><i class="fas fa-feather-alt fa-fw"></i>Essay</a>

  </li>


      
        
            
  <li class="menu-item menu-item-resources">

    <a href="/resources/" rel="section"><i class="fa fa-inbox fa-fw"></i>Resources</a>

  </li>


      
        <li class="menu-item menu-item-friends">

    <a href="/friends/" rel="section"><i class="fas fa-link fa-fw"></i>Friends</a>

  </li>
        
            
  <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About Me</a>

  </li>


      
        <li class="menu-item menu-item-showcase">

    <a href="/showcase/" rel="section"><i class="fa fa-solid fa-trophy fa-fw"></i>ShowCase</a>

  </li>
        <li class="menu-item menu-item-changelog">

    <a href="/changelog/" rel="section"><i class="fa fa-history fa-fw"></i>Site Log</a>

  </li>
        <li class="menu-item menu-item-opensource">

    <a href="/opensource/" rel="section"><i class="fas fa-code-branch fa-fw"></i>Open Source</a>

  </li>
        <li class="menu-item menu-item-uewiki">

    <a href="https://ue5wiki.com/" rel="noopener" target="_blank"><i class="fab fa-wikipedia-w fa-fw"></i>Unreal Wiki</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>



<script type="text/javascript">
  let domain='en.imzlp.com';
  let domain_str = atob(domain);
  let pathname = location.pathname;
  if (domain_str!= location.host.toLowerCase()){
        console.log(`this host is not safe,jump to https://${domain_str}${pathname}`);
        location.href=`https://${domain_str}${pathname}`;
  }
</script>

</div>
    </header>

    
  <div class="reading-progress-bar"></div>
  <div class="l10n-header-widget">
    <script>
      // 获取当前页面的 URL
      const currentUrl = window.location.href;
      // 替换 URL 中的部分内容
      const jumpToL10nLink = currentUrl.replace('en.imzlp.com', 'imzlp.com');
      // 将 jumpToL10nLink 绑定到一个全局变量
      window.jumpToL10nLink = jumpToL10nLink;
    </script>

    <a href="#" class="post-l10n-link" title="切换至中文版本" style="float: left;border-bottom: none;" rel="noopener" target="_blank" onclick="window.open(window.jumpToL10nLink, '_blank'); return false;">
      <i class="fa fa-solid fa-language"></i>
    </a>
  </div>



    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en"
  >
    <link itemprop="mainEntityOfPage" href="https://en.imzlp.com/posts/11750/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://img.imzlp.com/imgs/zlp/picgo/2023/202304152112902.webp">
      <meta itemprop="name" content="LIPENGZHA">
      <meta itemprop="description" content=""I think, therefore I am"">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Z's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          UE Resource Scanning and inspection tool ResScannerUE<a href="https://github.com/imzlp/blog-md/blob/en/_posts/2021-09-15-11750.md" class="post-edit-link" title="Edit this post" style="float: right;border-bottom: 0px;" rel="noopener" target="_blank"><i class="fa fa-pen-nib"></i></a><a href="https://imzlp.com/posts/11750/" class="post-l10n-link" title="切换至中文版本" style="float: left;border-bottom: 0px;" rel="noopener" target="_blank"><i class="fa fa-solid fa-language"></i></a>
        </h1>

        
          <div class="post-subtitle" style="text-align: center;line-height: 1;">
            <sub text-align="center" style="font-size: 15px;align-content: center;font-style: italic;bottom: 0em;">UE资源合规检查工具ResScannerUE</sub>
          </div>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-09-15 15:29 15:29:18:29" itemprop="dateCreated datePublished" datetime="2021-09-15T15:29:18+00:00">2021-09-15 15:29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/UnrealEngine/" itemprop="url" rel="index"><span itemprop="name">UnrealEngine</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/UnrealEngine/%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86/" itemprop="url" rel="index"><span itemprop="name">资源管理</span></a>
                </span>
            </span>

          
            <span id="/posts/11750/" class="post-meta-item leancloud_visitors" data-flag-title="UE Resource Scanning and inspection tool ResScannerUE" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>12k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>29 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>In game project development, due to the large amount of resources involved and the broad range of personnel, it’s relatively difficult to consciously unify resource standards. If issues arise with the resources, manually checking them requires a significant amount of manpower. This highlights the risks and pain points in resource management. </p>
<p>Based on this demand, I developed a resource scanning standard tool under the editor, <a target="_blank" rel="noopener" href="https://imzlp.com/posts/11750/">ResScannerUE</a>, which allows for easy configuration of rules and automation. This can be executed by artists before submitting resources or on a regular basis to check whether the resources in the project comply, thus avoiding issues that may only be discovered after packaging. </p>
<p>This article introduces the usage methods, operational mechanisms, ways to extend custom rules, and future optimization arrangements for the <a target="_blank" rel="noopener" href="https://imzlp.com/posts/11750/">ResScannerUE</a> plugin.</p>
<span id="more"></span>

<h3 id="Plugin-Introduction"><a href="#Plugin-Introduction" class="headerlink" title="Plugin Introduction"></a>Plugin Introduction</h3><p><a target="_blank" rel="noopener" href="https://imzlp.com/posts/11750/">ResScannerUE</a> is a resource scanning tool implemented based on the AssetRegistry and reflection mechanism, with the following advantages:</p>
<ol>
<li>Name and path rule checks do not require loading of resources.</li>
<li>Name and path rules provide support for wildcards.</li>
<li>Options in resources can be checked by providing <strong>property names</strong> and <strong>values</strong>.</li>
<li>Direct selection support for property names and values eliminates the need for input.</li>
<li>Very convenient to customize and extend check rules (implementing with Blueprints or C++).</li>
<li>Supports any resource type, most requirements can be implemented with Zero-Code.</li>
<li>Supports import/export of configurations.</li>
<li>Supports automation via Commandlet.</li>
<li>Supports version comparison of Git commits and comparison of pending files.</li>
<li>Supports resource submission permission checks.</li>
</ol>
<blockquote>
<p>Naming, path, and properties can strictly match multiple, or match one from multiple rules, enabling expressions like (<code>(expression) &amp;&amp; (expression || expression)</code>, such as matching patterns that start with <code>T_</code> and end with <code>_x</code> or <code>_d</code>).</p>
</blockquote>
<p>Interface preview (maintaining consistency with the <a target="_blank" rel="noopener" href="https://github.com/hxhb/HotPatcher">HotPatcher</a> style):</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/image-20210917170647793.webp"></p>
<h3 id="Plugin-Parameters"><a href="#Plugin-Parameters" class="headerlink" title="Plugin Parameters"></a>Plugin Parameters</h3><h4 id="FScannerConfig"><a href="#FScannerConfig" class="headerlink" title="FScannerConfig"></a>FScannerConfig</h4><ul>
<li>ConfigName: The name of the current configuration.</li>
<li>bByGlobalScanFilters: Enables the global scanning configuration used by all rules; when enabled, resource configurations in each rule do not take effect.</li>
<li>bBlockRuleFilter: Shields resources configured in each rule, using only global resources.</li>
<li>GlobalScanFilters: Depends on <code>bByGlobalScanFilters</code>, the global scanning configuration used by all rules (ignores scanning configurations specified in each rule).</li>
<li>GlobalIgnoreFilters: Resources ignored in all rules (paths, specific resources).</li>
<li>GitChecker: Enables GIT version checking.</li>
<li>bRuleWhiteList: Enables rule whitelist, checking only specific rules.</li>
<li>RuleWhileListIDs: Whitelist rule ID list, <strong>Note</strong>: starts from 0, and IDs in RuleTable should be -1.</li>
<li>bUseRulesTable: Whether to use a rules data table (<strong>recommended</strong>).</li>
<li>ImportRulesTable: Specifies a Datatable of FScannerMatchRule.</li>
<li>ScannerRules: Array of <code>FScannerMatchRule</code> rules for specifying resource check rules.</li>
<li>bSaveConfig: Whether to save the configuration file.</li>
<li>bSaveResult: Whether to save the results of this execution.</li>
<li>SavePath: Storage path for Config and Result.</li>
</ul>
<h4 id="FGitChecker"><a href="#FGitChecker" class="headerlink" title="FGitChecker"></a>FGitChecker</h4><p>Able to extract files in Git commits for checking:</p>
<ul>
<li>bGitCheck: Enables Git repository scanning.</li>
<li>bRecordCommiter: Records the committer.</li>
<li>RepoDir: GIT repository address.</li>
<li>bDiffCommit: Git commit record comparison (Begin/End Commit HASH).</li>
<li>BeginCommitHash: The starting Git Commit HASH for checking.</li>
<li>EndCommitHash: The ending Git Commit HASH for checking.</li>
<li>bUncommitFiles: Checks pending files.</li>
</ul>
<h4 id="FScannerMatchRule"><a href="#FScannerMatchRule" class="headerlink" title="FScannerMatchRule"></a>FScannerMatchRule</h4><p>Each rule supports the following parameters:</p>
<ul>
<li>RuleName: Rule name.</li>
<li>RuleDescribe: Rule description information.</li>
<li>bEnableRule: Whether to enable the current rule.</li>
<li>Priority: The priority of this rule.</li>
<li>bGlobalAssetMustMatchFilter: Must match the Filter directory in the rule (global resource); for example, if different specifications for textures are set in different directories, only resources in certain directories should use this rule for scanning.</li>
<li>ScanFilters: Array of <code>FDirectoryPath</code>, specifies scanning resource paths.</li>
<li>ScanAssetTypes: Array of UClass, specifies resource types to be scanned; it is recommended to specify only one type for each rule.</li>
<li>NameMatchRules: Array of <code>FNameMatchRule</code> for specifying naming matching rules.</li>
<li>PathMatchRules: Array of <code>FPathMatchRule</code> for specifying resource path matching rules.</li>
<li>PropertyMatchRules: Array of <code>FPropertyMatchRule</code> for matching properties in resources.</li>
<li>CustomRules: Array of <code>TSubclassOf&lt;UOperatorBase&gt;</code> for custom matching rules; can specify C++/Blueprint classes.</li>
<li>IgnoreFilters: The ignore list for this rule (paths, specific resources).</li>
<li>bEnablePostProcessor: Whether to enable post-processing of scan results.</li>
<li>PostProcessor: Array of <code>TArray&lt;TSubclassOf&lt;UScannnerPostProcessorBase&gt;&gt;</code>, relies on bEnablePostProcessor; can specify post-processing of the current rule’s scan results, such as automatically modifying properties, auto-renaming, etc.</li>
</ul>
<h4 id="FNameMatchRule"><a href="#FNameMatchRule" class="headerlink" title="FNameMatchRule"></a>FNameMatchRule</h4><p>Each NameMatchRule contains multiple NameRule:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">USTRUCT</span>(BlueprintType)</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">FNameRule</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="built_in">GENERATED_USTRUCT_BODY</span>()</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">UPROPERTY</span>(EditAnywhere,BlueprintReadWrite)</span><br><span class="line">  ENameMatchMode MatchMode;</span><br><span class="line">  <span class="comment">// Matching rule; whether required or optional; Necessary means all rules must be matched, Optional means only one in the rules must be matched.</span></span><br><span class="line">  <span class="built_in">UPROPERTY</span>(EditAnywhere,BlueprintReadWrite)</span><br><span class="line">  EMatchLogic MatchLogic;</span><br><span class="line">  <span class="comment">// UPROPERTY(EditAnywhere,BlueprintReadWrite,meta=(EditCondition=&quot;MatchLogic == EMatchLogic::Optional&quot;))</span></span><br><span class="line">  int32 OptionalRuleMatchNum = <span class="number">1</span>;</span><br><span class="line">  <span class="built_in">UPROPERTY</span>(EditAnywhere,BlueprintReadWrite)</span><br><span class="line">  TArray&lt;FString&gt; Rules;</span><br><span class="line">  </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">USTRUCT</span>(BlueprintType)</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">FNameMatchRule</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="built_in">GENERATED_USTRUCT_BODY</span>()</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">UPROPERTY</span>(EditAnywhere,BlueprintReadWrite)</span><br><span class="line">  TArray&lt;FNameRule&gt; Rules;</span><br><span class="line">  <span class="built_in">UPROPERTY</span>(EditAnywhere,BlueprintReadWrite)</span><br><span class="line">  <span class="type">bool</span> bReverseCheck;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="FPathMatchRule"><a href="#FPathMatchRule" class="headerlink" title="FPathMatchRule"></a>FPathMatchRule</h4><p>Each PathMatchRule contains multiple PathRule:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">USTRUCT</span>(BlueprintType)</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">FPathRule</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="built_in">GENERATED_USTRUCT_BODY</span>()</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">UPROPERTY</span>(EditAnywhere,BlueprintReadWrite)</span><br><span class="line">  EPathMatchMode MatchMode;</span><br><span class="line">  <span class="comment">// Matching rule; whether required or optional; Necessary means all rules must be matched, Optional means only one in the rules must be matched.</span></span><br><span class="line">  <span class="built_in">UPROPERTY</span>(EditAnywhere,BlueprintReadWrite)</span><br><span class="line">  EMatchLogic MatchLogic;</span><br><span class="line">  <span class="comment">// UPROPERTY(EditAnywhere,BlueprintReadWrite,meta=(EditCondition=&quot;MatchLogic == EMatchLogic::Optional&quot;))</span></span><br><span class="line">  int32 OptionalRuleMatchNum = <span class="number">1</span>;</span><br><span class="line">  <span class="built_in">UPROPERTY</span>(EditAnywhere,BlueprintReadWrite,meta = (RelativeToGameContentDir, LongPackageName))</span><br><span class="line">  TArray&lt;FString&gt; Rules;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">USTRUCT</span>(BlueprintType)</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">FPathMatchRule</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="built_in">GENERATED_USTRUCT_BODY</span>()</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">UPROPERTY</span>(EditAnywhere,BlueprintReadWrite)</span><br><span class="line">  TArray&lt;FPathRule&gt; Rules;</span><br><span class="line">  <span class="built_in">UPROPERTY</span>(EditAnywhere,BlueprintReadWrite)</span><br><span class="line">  <span class="type">bool</span> bReverseCheck;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="FPropertyMatchRule"><a href="#FPropertyMatchRule" class="headerlink" title="FPropertyMatchRule"></a>FPropertyMatchRule</h4><p>Each property matching rule contains multiple property rules:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">USTRUCT</span>(BlueprintType)</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">FPropertyRule</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">GENERATED_USTRUCT_BODY</span>()</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="comment">// Matching rule; whether required or optional; Necessary means all rules must be matched, Optional means only one in the rules must be matched.</span></span><br><span class="line">	<span class="built_in">UPROPERTY</span>(EditAnywhere,BlueprintReadWrite)</span><br><span class="line">	EMatchLogic MatchLogic;</span><br><span class="line">	<span class="comment">// UPROPERTY(EditAnywhere,BlueprintReadWrite,meta=(EditCondition=&quot;MatchLogic == EMatchLogic::Optional&quot;))</span></span><br><span class="line">	int32 OptionalRuleMatchNum = <span class="number">1</span>;</span><br><span class="line">	<span class="built_in">UPROPERTY</span>(EditAnywhere,BlueprintReadWrite)</span><br><span class="line">	TArray&lt;FPropertyMatchMapping&gt; Rules;</span><br><span class="line">	</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">USTRUCT</span>(BlueprintType)</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">FPropertyMatchRule</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">GENERATED_USTRUCT_BODY</span>()</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">UPROPERTY</span>(EditAnywhere,BlueprintReadWrite)</span><br><span class="line">	TArray&lt;FPropertyRule&gt; Rules;</span><br><span class="line">	<span class="built_in">UPROPERTY</span>(EditAnywhere,BlueprintReadWrite)</span><br><span class="line">    <span class="type">bool</span> bReverseCheck;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="Matching-Rules"><a href="#Matching-Rules" class="headerlink" title="Matching Rules"></a>Matching Rules</h3><p>I provide four default matching methods for <a target="_blank" rel="noopener" href="https://imzlp.com/posts/11750/">ResScannerUE</a>: naming matching, path matching, property matching, submission permission matching, and custom matching, which can meet most resource scanning requirements.</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/20211214152255.webp"></p>
<p>For each matching method, multiple constraints can also be added. Taking the texture naming rule as an example:</p>
<ol>
<li>Textures must start with <code>T_*</code>.</li>
<li>Based on the application type of the texture, it should end with <code>_c</code> or <code>_d</code>.</li>
</ol>
<p>Essentially, two constraints composed of <strong>and/or</strong> operator need to be fulfilled: <code>(T_) &amp;&amp; (_x || _d)</code>. In the implementation of <a target="_blank" rel="noopener" href="https://imzlp.com/posts/11750/">ResScannerUE</a>, each NameRule is an expression that determines if the internal logic is <code>and</code>/<code>or</code> by <code>MatchLogic</code>.</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/20210917162359.webp"></p>
<p>Each NameRule has an attribute of <code>EMatchLogic</code>. <code>Necessary</code> must strictly match all Rules (starting with <code>T_</code>), whereas <code>Optional</code> means only one of the patterns listed in the Rule needs to match (<code>_x</code>/<code>_d</code>). Path and property matching also supports setting the <code>MatchLogic</code> mode similarly.</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/20210917164802.webp"></p>
<h4 id="Naming-Matching"><a href="#Naming-Matching" class="headerlink" title="Naming Matching"></a>Naming Matching</h4><p>Setting naming rules for different types of resources is one of the most common standards, such as textures usually starting with <code>T_</code>. </p>
<p>In a resource detection rule, multiple path matching rules can also be added, with each matching rule having three modes:</p>
<ol>
<li>StartWith</li>
<li>EndWith</li>
<li>Wildcard</li>
</ol>
<p>Additionally, <code>bReverseCheck</code> is provided to negate the results of all matching rules for reverse matching.</p>
<p>Taking the naming standard for textures as an example:<br><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/image-20210917165511508.webp"></p>
<p>It includes a wildcard check of <code>T_*</code>, and enabling <code>bReverseCheck</code> will record resources that do not match this rule:</p>
<figure class="highlight json"><figcaption><span>result.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;matchedAssets&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;ruleName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Texture2D_Name_Rule&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;ruleDescribe&quot;</span><span class="punctuation">:</span> <span class="string">&quot;texture name need startwith \&quot;T_\&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;ruleId&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;assetPackageNames&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;/Game/Mannequin/Character/Textures/UE4_LOGO_CARD&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;/Game/Mannequin/Character/Textures/UE4_Mannequin__normals&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;/Game/Mannequin/Character/Textures/UE4_Mannequin_MAT_MASKA&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;/Game/Mannequin/Character/Textures/UE4Man_Logo_N&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;/Game/Texture/20210914162516&quot;</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="Path-Matching"><a href="#Path-Matching" class="headerlink" title="Path Matching"></a>Path Matching</h4><p>Checking whether a certain type of resource is stored according to a specified path is also one of the most common rules. It similarly supports multiple path specifications, and each specification default supports two modes:</p>
<ol>
<li>WithIn</li>
<li>Wildcard</li>
</ol>
<p>It can check whether the resource is located within a certain directory or whether the path meets the wildcard criteria. Taking textures again as an example, one could check whether all textures are stored in directories named <code>*/Textures/*</code>:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/image-20210917165750281.webp"></p>
<p>It includes a wildcard check for <code>*/Textures/*</code> and enabling <code>bReverseCheck</code> will record resources that do not match this rule:</p>
<figure class="highlight json"><figcaption><span>result.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;matchedAssets&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;ruleName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Texture2D_Path_Rule&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;ruleDescribe&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Texture need within */Textures/* folder.&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;ruleId&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;assetPackageNames&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;/Game/Mannequin/Character/Materials/MaterialLayers/T_ML_Rubber_Blue_01_D&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;/Game/Mannequin/Character/Materials/MaterialLayers/T_ML_Rubber_Blue_01_N&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;/Game/Mannequin/Character/Materials/MaterialLayers/T_ML_Aluminum01&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;/Game/Mannequin/Character/Materials/MaterialLayers/T_ML_Aluminum01_N&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;/Game/Texture/20210914162516&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;/Game/Texture/T_20210914162516&quot;</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="Property-Matching"><a href="#Property-Matching" class="headerlink" title="Property Matching"></a>Property Matching</h4><p>Checking whether a certain option is enabled within a resource or checking the value of a specific property is a key aspect of resource compliance checking. Similarly, multiple rules can be added for property attribute detection.</p>
<p>I have implemented a mechanism for property matching based on reflection, wherein any resource type can be checked as long as it has reflection-marked properties. Property matching can be done through <strong>property names</strong> and <strong>detection values</strong>, with two modes for value checking:</p>
<ol>
<li>Equal</li>
<li>NotEqual</li>
</ol>
<p>For example, checking if <code>CompressionSettings</code> is set to <code>TC_Default</code> <strong>and</strong> <code>CompressionQuality</code> is set to either <code>TCQ_Highnest</code> or <code>TCQ_High</code> for textures. I have previously described how the <code>MatchLogic</code> array can be used to handle the logical processing. This is also important for property detection.</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/20210917170355.webp"></p>
<p>Successfully matching resources can be retrieved:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;matchedAssets&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;ruleName&quot;</span>: <span class="string">&quot;Texture_CompressSetting_Rule&quot;</span>,</span><br><span class="line">      <span class="string">&quot;ruleDescribe&quot;</span>: <span class="string">&quot;Texture2D need Set Compress&quot;</span>,</span><br><span class="line">      <span class="string">&quot;ruleId&quot;</span>: <span class="number">2</span>,</span><br><span class="line">      <span class="string">&quot;assetPackageNames&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;/Game/Texture/20210914162516&quot;</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/image-20210915165234000.webp"></p>
<blockquote>
<p><del>Note: Property matching is based on the reflection name of the property; in UE there is <code>DisplayName</code>, which may not match the actual reflection name shown in the editor, so care should be taken.</del> (The plugin now supports property selection)</p>
</blockquote>
<p>Property matching allows for custom reflection-based property panels, capable of automatically listing all reflected properties after selecting UClass, and automatically creating property name editor types in the editor based on the selected property name, which is very amazing:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/20211026152026.webp"></p>
<h4 id="Submission-Permission-Matching"><a href="#Submission-Permission-Matching" class="headerlink" title="Submission Permission Matching"></a>Submission Permission Matching</h4><p>Supports checking modification permissions of resource files in the repository, allowing only specific personnel to modify certain types of resources. For example, certain master materials in the project may only be modified by the TA team.</p>
<p>There are two modes of checks:</p>
<ol>
<li>Based on the commit information in Git.</li>
<li>Based on machine username.</li>
</ol>
<p>When based on Git, pending files can be retrieved, along with the most recent submitter of the file:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2022/20220831142617.webp"></p>
<p>When based on machine usernames, the current machine’s username is retrieved, and a <code>StartsWith</code> check is performed since some machine names may include suffixes like <code>lipengzha-PC*</code>.</p>
<p>Editor displays alerts on checks:<br><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2022/20220831142814.webp"></p>
<h4 id="Custom-Rules"><a href="#Custom-Rules" class="headerlink" title="Custom Rules"></a>Custom Rules</h4><p>While I have introduced several default matching rules, for some special detection needs, I offer a convenient extension method where subclasses can inherit from <code>UOperatorBase</code> and override the <code>Match</code> function to implement custom detection needs.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UCLASS</span>(Blueprintable,BlueprintType)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UOperatorBase</span> : <span class="keyword">public</span> UObject</span><br><span class="line">&#123;</span><br><span class="line">  <span class="built_in">GENERATED_BODY</span>()</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">UFUNCTION</span>(BlueprintImplementableEvent,BlueprintCallable)</span><br><span class="line">  <span class="function"><span class="type">bool</span> <span class="title">Match</span><span class="params">(UObject* Object,<span class="type">const</span> FString&amp; AssetType)</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>This will pass the current resource’s UObject and the <code>AssetType</code> string, allowing for customized detection based on this data.</p>
<p>In the Rule’s <code>CustomRules</code>, specify the class to be used (<code>TSubclassOf&lt;UOperatorBase&gt;</code>):</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/image-20210915171134049.webp" alt="Custom Rules"></p>
<p>Alternatively, one can also create Blueprint classes by inheriting <code>UOperatorBase</code>, making it even easier to implement overrides:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/image-20210915170147239.webp"></p>
<p>When executing a scan, the specified class’s CDO will be obtained, and the Match function will be called to get the matching results.</p>
<p>For example, detecting settings of GameMode on a map can be achieved through a custom rule:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/20211027161739.webp"></p>
<p>Another example, alerting when resources reference the NeverCook directory to avoid issues caused by missing dependencies during packaging:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2023/20230413203802.webp"></p>
<h3 id="Post-Processing-After-Matching"><a href="#Post-Processing-After-Matching" class="headerlink" title="Post-Processing After Matching"></a>Post-Processing After Matching</h3><p>The plugin provides support for performing post-processing on matching rules, such as automated setting of non-compliant resource properties or auto-renaming needs. It is essential to be able to access matching results.</p>
<p>I provide an interface in each <code>FScannerMatchRule</code> for specifying a <code>UScannnerPostProcessorBase</code> class. If one intends to process resources that match the rules, they can inherit the <code>UScannnerPostProcessorBase</code> class and implement the <code>Processor</code> function. This will pass the scan results to it after the current rule’s scan is complete.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">const</span> <span class="keyword">auto</span>&amp; PostProcessorClass:Rule.PostProcessors)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="built_in">IsValid</span>(PostProcessorClass))</span><br><span class="line">  &#123;</span><br><span class="line">    UScannnerPostProcessorBase* PostProcessorIns = <span class="built_in">Cast</span>&lt;UScannnerPostProcessorBase&gt;(PostProcessorClass-&gt;<span class="built_in">GetDefaultObject</span>());</span><br><span class="line">    <span class="keyword">if</span>(PostProcessorIns)</span><br><span class="line">    &#123;</span><br><span class="line">      PostProcessorIns-&gt;<span class="built_in">Processor</span>(RuleMatchedInfo,Rule.ScanAssetType-&gt;<span class="built_in">GetName</span>());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Final-Scan-Results"><a href="#Final-Scan-Results" class="headerlink" title="Final Scan Results"></a>Final Scan Results</h3><p>Once all rule scans are completed, the results are structured in an <code>FMatchedResult</code>, containing a <code>FRuleMatchedInfo</code> for recording the list of resources matched by each rule:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Rule Matched info</span></span><br><span class="line"><span class="built_in">USTRUCT</span>(BlueprintType)</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">FRuleMatchedInfo</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">GENERATED_USTRUCT_BODY</span>()</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">FRuleMatchedInfo</span>():<span class="built_in">RuleName</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;&quot;</span>)),<span class="built_in">RuleDescribe</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;&quot;</span>)),<span class="built_in">RuleID</span>(<span class="number">-1</span>)&#123;&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">UPROPERTY</span>(EditAnywhere,BlueprintReadWrite)</span><br><span class="line">	FString RuleName;</span><br><span class="line">	<span class="built_in">UPROPERTY</span>(EditAnywhere,BlueprintReadWrite)</span><br><span class="line">	FString RuleDescribe;</span><br><span class="line">	<span class="comment">// The index of this rule in the configuration array</span></span><br><span class="line">	<span class="built_in">UPROPERTY</span>(EditAnywhere,BlueprintReadWrite)</span><br><span class="line">	int32 RuleID;</span><br><span class="line">	<span class="built_in">UPROPERTY</span>(EditAnywhere,BlueprintReadWrite, transient)</span><br><span class="line">	TArray&lt;FAssetData&gt; Assets;</span><br><span class="line">	<span class="built_in">UPROPERTY</span>(EditAnywhere,BlueprintReadWrite)</span><br><span class="line">	TArray&lt;FString&gt; AssetPackageNames;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// final result</span></span><br><span class="line"><span class="built_in">USTRUCT</span>(BlueprintType)</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">FMatchedResult</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">GENERATED_USTRUCT_BODY</span>()</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">UPROPERTY</span>(EditAnywhere,BlueprintReadWrite)</span><br><span class="line">	TArray&lt;FRuleMatchedInfo&gt; MatchedAssets;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><code>RuleName</code>, <code>RuleDescribe</code>, and <code>RuleID</code> provide a convenient way to determine which rules the resources matched against.</p>
<p>Ultimately, this structure will be serialized into JSON output. If you want to obtain the original results or perform some special processing, you can call <code>GetScanResult()</code> in <code>UResScannerProxy</code>.</p>
<h3 id="Automated-Checks"><a href="#Automated-Checks" class="headerlink" title="Automated Checks"></a>Automated Checks</h3><p><a target="_blank" rel="noopener" href="https://imzlp.com/posts/11750/">ResScannerUE</a> offers methods for executing via Commandlet, initiated by specifying the configuration file:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UE4Editor-cmd.exe PROJECT_NAME.uproject -run=ResScanner -config=<span class="string">&quot;res_scanner.json&quot;</span></span><br></pre></td></tr></table></figure>

<p>One can add the <code>-wait</code> parameter to wait for input after execution completes, allowing for previewing results.</p>
<p>Utilizing another previously open-sourced tool, <a target="_blank" rel="noopener" href="https://github.com/hxhb/UE4Launcher">UELauncher</a>, can facilitate configuration:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/20211116094321.webp"></p>
<p>For practical automated scanning implementations based on <a target="_blank" rel="noopener" href="https://imzlp.com/posts/11750/">ResScannerUE</a>, refer to my other article: <a target="_blank" rel="noopener" href="https://imzlp.com/posts/20376/">Automated Practices for Resource Checks Based on ResScannerUE</a></p>
<h3 id="Update-Log"><a href="#Update-Log" class="headerlink" title="Update Log"></a>Update Log</h3><script src="https://gist.github.com/imzlp/9d9c523258324b9df07ad30d13682c10.js"></script>

<h4 id="2022-08-02-v25"><a href="#2022-08-02-v25" class="headerlink" title="2022.08.02 v25"></a>2022.08.02 v25</h4><p><a target="_blank" rel="noopener" href="https://github.com/hxhb/ResScannerUE/releases/tag/v25">ResScannerUE v25 Released!</a></p>
<ul>
<li>Support for checking Git pending files.</li>
<li>Support for scanning TextureCube specifications.</li>
<li>Support for scanning GameMode settings in maps.</li>
<li>Deepened Git adaptation, supporting checks that certain resources can only be modified by specific users.</li>
<li>Support for retrieving the modifier of currently changing resources in rules.</li>
<li>Support for getting user local git information (username/email) in the plugin.</li>
<li>Support for passing git username via commandlet.</li>
<li>Support for checking pre-commit hooks.</li>
</ul>
<p>For the following case requirement: only specific users can submit Material resources, while others are denied submission.<br>A rule filtering Material resources was created and a custom rule specified:<br><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/20220802105212.webp"></p>
<p>In the scanning configuration, enable global resources and Git repository scanning configurations:<br><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/20220802105340.webp"></p>
<p>In the custom rule blueprint, obtain the status of locally modified files and the committer:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/20220802105441.webp"></p>
<p>Execute the scan:<br><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/20220802111054.webp"><br><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/20220802111011.webp"></p>
<p>Additionally, it can be integrated into Git GUI tools or pre-commit hooks to achieve fully automated checks:<br><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/20220802105720.webp"></p>
<h4 id="2021-13-15-v24"><a href="#2021-13-15-v24" class="headerlink" title="2021.13.15 v24"></a>2021.13.15 v24</h4><ul>
<li>Fixed failure to retrieve commit information for maps from Git.</li>
<li>Fixed crash issues on Mac.</li>
<li>Disabled shader compilation during commandlet scanning.</li>
</ul>
<h3 id="Optimization-Plans"><a href="#Optimization-Plans" class="headerlink" title="Optimization Plans"></a>Optimization Plans</h3><p>Some thoughts for future optimizations; I will gradually implement these when time permits.</p>
<ul>
<li><del>Implement property name selection instead of input.</del></li>
<li><del>Create property based on specific types in the Detail panel.</del></li>
<li>Multi-threaded rule detection for parallel processing.</li>
</ul>

    </div>

    
    
        
        
          
            <blockquote class="blockquote-center">
              
                The article is finished. If you have any questions, please comment and communicate.
              
            <br/>
            
                <div class="qr-code" onclick="return false">
                    <script src="/js/qrcode.min.js"></script>
                    <div id="qrcode">
                      
                        <img src="https://imzlp.com/images/wechat-qrcode.webp">
                      
                    <p>Scan the QR code on WeChat and follow me.</p>
                    </div>
                </div>
            
            </blockquote>
          
        

        
          <div class="postCopyright" style="clear:both;">
             <span>Title:</span><a href="/posts/11750/" target="_blank">UE Resource Scanning and inspection tool ResScannerUE</a><br/>
             <span>Author:</span><a href="/about" target="_blank" title="查看 LIPENGZHA 的资料">LIPENGZHA</a><br/>
             <span>Publish Date:</span>2021/09/15 15:29<br/>
             
             <span>Word Count:</span><span class="page-count">12k Words</span><br/>
             
             <span>Link:</span><a href="/posts/11750/" target="_blank" title="UE Resource Scanning and inspection tool ResScannerUE">https://en.imzlp.com/posts/11750/</a>
             <span class="copy-path" data-clipboard-text="Link: https://en.imzlp.com/posts/11750/ Author: LIPENGZHA" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
             <script src="/js/jquery.min.js"></script>
             <script src="/js/clipboard.min.js"></script>
             <script> var clipboard = new Clipboard('.copy-path'); </script>
             <br/>
             
             <span>License:</span><i class="fab fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" title="Attribution-NonCommercial-ShareAlike 4.0 International">CC BY-NC-SA 4.0</a><br/>
             
             <span>Reprinting of the full article is prohibited.</span>
          </div>
        
    

        
  <div class="reward-container">
    <div>Your donation will encourage me to keep creating!</div>
    <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
      Donate
    </button>
    <div id="qr" style="display: none;">
        
        <div style="display: inline-block;">
          <img src="/images/reward/wechatpay.webp" alt="LIPENGZHA WeChat Pay">
          <p>WeChat Pay</p>
        </div>

    </div>
  </div>



      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/UnrealEngine/" rel="tag"># UnrealEngine</a>
              <a href="/tags/%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86/" rel="tag"># 资源管理</a>
              <a href="/tags/ResScanner/" rel="tag"># ResScanner</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/posts/9028/" rel="prev" title="UE Hot Update: Config Overloading and Apply">
      <i class="fa fa-chevron-left"></i> UE Hot Update: Config Overloading and Apply
    </a></div>
      <div class="post-nav-item">
    <a href="/posts/15810/" rel="next" title="UE Hot Update: Shader update strategy">
      UE Hot Update: Shader update strategy <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
      <div class="tabs tabs-comment">
        <ul class="nav-tabs">
            <li class="tab"><a href="#comment-utteranc">utteranc</a></li>
            <li class="tab"><a href="#comment-valine">valine</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane utteranc" id="comment-utteranc">
              
  
  <div class="comments">
  <script src="https://utteranc.es/client.js" repo="hxhb/blog-comments" issue-term="pathname" theme="github-light" crossorigin="anonymous" async></script>
  </div>
  
  
            </div>
            <div class="tab-pane valine" id="comment-valine">
              <div class="comments" id="valine-comments"></div>
            </div>
        </div>
      </div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#Plugin-Introduction"><span class="nav-number">1.</span> <span class="nav-text">Plugin Introduction</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Plugin-Parameters"><span class="nav-number">2.</span> <span class="nav-text">Plugin Parameters</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#FScannerConfig"><span class="nav-number">2.1.</span> <span class="nav-text">FScannerConfig</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#FGitChecker"><span class="nav-number">2.2.</span> <span class="nav-text">FGitChecker</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#FScannerMatchRule"><span class="nav-number">2.3.</span> <span class="nav-text">FScannerMatchRule</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#FNameMatchRule"><span class="nav-number">2.4.</span> <span class="nav-text">FNameMatchRule</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#FPathMatchRule"><span class="nav-number">2.5.</span> <span class="nav-text">FPathMatchRule</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#FPropertyMatchRule"><span class="nav-number">2.6.</span> <span class="nav-text">FPropertyMatchRule</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Matching-Rules"><span class="nav-number">3.</span> <span class="nav-text">Matching Rules</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Naming-Matching"><span class="nav-number">3.1.</span> <span class="nav-text">Naming Matching</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Path-Matching"><span class="nav-number">3.2.</span> <span class="nav-text">Path Matching</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Property-Matching"><span class="nav-number">3.3.</span> <span class="nav-text">Property Matching</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Submission-Permission-Matching"><span class="nav-number">3.4.</span> <span class="nav-text">Submission Permission Matching</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Custom-Rules"><span class="nav-number">3.5.</span> <span class="nav-text">Custom Rules</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Post-Processing-After-Matching"><span class="nav-number">4.</span> <span class="nav-text">Post-Processing After Matching</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Final-Scan-Results"><span class="nav-number">5.</span> <span class="nav-text">Final Scan Results</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Automated-Checks"><span class="nav-number">6.</span> <span class="nav-text">Automated Checks</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Update-Log"><span class="nav-number">7.</span> <span class="nav-text">Update Log</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2022-08-02-v25"><span class="nav-number">7.1.</span> <span class="nav-text">2022.08.02 v25</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2021-13-15-v24"><span class="nav-number">7.2.</span> <span class="nav-text">2021.13.15 v24</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Optimization-Plans"><span class="nav-number">8.</span> <span class="nav-text">Optimization Plans</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person" oncontextmenu="return false" οndragstart="return false">
    <img class="site-author-image" itemprop="image" alt="LIPENGZHA"
      src="https://img.imzlp.com/imgs/zlp/picgo/2023/202304152112902.webp">
  <p class="site-author-name" itemprop="name">LIPENGZHA</p>
  <div class="site-description" itemprop="description">"I think, therefore I am"</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
             
          <span class="site-state-item-count">190</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">95</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">190</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/hxhb" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;hxhb" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://linkedin.com/in/lipengzha" title="Linkedin → https:&#x2F;&#x2F;linkedin.com&#x2F;in&#x2F;lipengzha" rel="noopener" target="_blank"><i class="fab fa-linkedin fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.zhihu.com/people/imzlp" title="知乎 → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;imzlp" rel="noopener" target="_blank"><i class="fa fa-custom zhihu fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="/images/wechat-qrcode-offical.webp" title="微信公众号 → &#x2F;images&#x2F;wechat-qrcode-offical.webp"><i class="fab fa-weixin fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:imzlp@foxmail.com" title="E-Mail → mailto:imzlp@foxmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fa fa-rss fa-fw"></i></a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://consolehelp.imzlp.com/" title="https:&#x2F;&#x2F;consolehelp.imzlp.com&#x2F;" rel="noopener" target="_blank">UE Console Help</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://imzlp.com/opensource/" title="https:&#x2F;&#x2F;imzlp.com&#x2F;opensource&#x2F;" rel="noopener" target="_blank">Open Source Projects</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://imzlp.com/posts/11515/" title="https:&#x2F;&#x2F;imzlp.com&#x2F;posts&#x2F;11515&#x2F;" rel="noopener" target="_blank">UE C++ API Dash Documents</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://ue5wiki.com/" title="https:&#x2F;&#x2F;ue5wiki.com&#x2F;" rel="noopener" target="_blank">Unreal Engine Wiki</a>
        </li>
    </ul>
  </div>

      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2014 – 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">LIPENGZHA</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="Symbols count total">1.5m</span>
</div>
  <div class="powered-by-other">
    
	    <center>Github Pages | Actions | NeXT | Cloudflare | Hexo Deploy</center>
      
  </div>

<script>
function checkWebp(callback) {
    var img = new Image();
    img.onload = function () { callback((img.width > 0) && (img.height > 0)); };
    img.onerror = function () { callback(false); };
    img.src = 'data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA';
}
function showImage(useWebp) {
    var imgs = [].slice.call(document.querySelectorAll('img'));
    imgs.forEach(function (e) {
        if (!useWebp) {
            var src = e.getAttribute('data-src')
            src = src.replace(/\.webp$/, '.png');
            e.setAttribute('data-src', src);
        }
    });
}
checkWebp(showImage);
</script>

        








      </div>
    </footer>
  </div>

  
  <script src="//lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/animejs/3.2.1/anime.min.js"></script>
  <script src="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/jquery/3.5.1/jquery.min.js"></script>
  <script src="//lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/fancybox/3.5.7/jquery.fancybox.min.js"></script>
  <script src="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/lozad.js/1.16.0/lozad.min.js"></script>
  <script src="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/pangu/4.0.7/pangu.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>



<script src="/js/code-unfold.js"></script>

  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>




  
<script src="/js/local-search.js"></script>









<script>
document.querySelectorAll('.pdfobject-container').forEach(element => {
  let url = element.dataset.target;
  let pdfOpenParams = {
    navpanes : 0,
    toolbar  : 0,
    statusbar: 0,
    pagemode : 'thumbs',
    view     : 'FitH'
  };
  let pdfOpenFragment = '#' + Object.entries(pdfOpenParams).map(([key, value]) => `${key}=${encodeURIComponent(value)}`).join('&');
  let fullURL = `/lib/pdf/web/viewer.html?file=${encodeURIComponent(url)}${pdfOpenFragment}`;

  if (NexT.utils.supportsPDFs()) {
    element.innerHTML = `<embed class="pdfobject" src="${url + pdfOpenFragment}" type="application/pdf" style="height: ${element.dataset.height};">`;
  } else {
    element.innerHTML = `<iframe src="${fullURL}" style="height: ${element.dataset.height};" frameborder="0"></iframe>`;
  }
});
</script>


<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  

  
  <script src="//img.imzlp.com/imgs/zlp/picgo/2021/quicklink.umd.js"></script>
  <script>
      window.addEventListener('load', () => {
      quicklink({
        timeout : 3000,
        priority: true,
        ignores : [uri => uri.includes('#'),uri => uri === 'https://en.imzlp.com/posts/11750/',]
      });
      });
  </script>


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/valine/1.4.14/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    var requiredFields = 'nick';
    requiredFields = requiredFields.split(',');
    
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'oCE6RMVkVoi5MgUhvFsn1EvV-gzGzoHsz',
      appKey     : 'K9SOaNYJ8PV6xaoFggWG5xvv',
      placeholder: "Leave something behind~",
      avatar     : 'robohash',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : 'en' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : '',
      requiredFields: requiredFields
    });
  }, window.Valine);
});
</script>

</body>
</html>
