<!DOCTYPE html>
<html lang="en,default">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon-32x32-tilt-brush.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-tilt-brush.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-tilt-brush.png">
  <link rel="mask-icon" href="/images/favicon-32x32-tilt-brush.png" color="#222">
  <meta name="google-site-verification" content="ttIkhAIFZQM9Huj8roB0l95ePN2Tv2zv2wRFksi09WA">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noto Serif SC:300,300italic,400,400italic,700,700italic|Pacifico:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Roboto Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="//lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/5.15.2/css/all.min.css">
  <link rel="stylesheet" href="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/fancybox/3.5.7/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"en.imzlp.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false,"width":280},"copycode":{"enable":true,"show_result":true,"style":"flat"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"manual"},"fancybox":true,"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":false,"nav":null,"activeClass":"valine"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"code_unfold":{"enable":true,"CODE_MAX_HEIGHT":600},"path":"search.xml"};
  </script>

  <meta name="description" content="Game hot updates are a way for players to obtain the latest game content without reinstalling the game. They are widely used in network games on both PC and mobile platforms, as quick adjustments, bug">
<meta property="og:type" content="article">
<meta property="og:title" content="UE hot update: demand analysis and solution design">
<meta property="og:url" content="https://en.imzlp.com/posts/17371/index.html">
<meta property="og:site_name" content="Z&#39;s Blog">
<meta property="og:description" content="Game hot updates are a way for players to obtain the latest game content without reinstalling the game. They are widely used in network games on both PC and mobile platforms, as quick adjustments, bug">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/picgo/2023/20230323184250.webp">
<meta property="article:published_time" content="2020-05-16T11:22:35.000Z">
<meta property="article:modified_time" content="2020-05-16T11:22:35.000Z">
<meta property="article:author" content="LIPENGZHA">
<meta property="article:tag" content="UnrealEngine">
<meta property="article:tag" content="热更新">
<meta property="article:tag" content="HotPatcher">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img.imzlp.com/imgs/zlp/picgo/2023/20230323184250.webp">

<link rel="canonical" href="https://en.imzlp.com/posts/17371/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>UE hot update: demand analysis and solution design | Z's Blog</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-FDCJ41EFP5"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-FDCJ41EFP5');
      }
    </script>






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.staticfile.org/lxgw-wenkai-screen-webfont/1.7.0/style.min.css" /><!-- hexo injector head_end end --><link rel="alternate" href="/atom.xml" title="Z's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Z's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        
            
  <li class="menu-item menu-item-notes">

    <a href="/notes/" rel="section"><i class="fa fa-edit fa-fw"></i>Notes</a>

  </li>


      
        
            
  <li class="menu-item menu-item-essay">

    <a href="/essay/" rel="section"><i class="fas fa-feather-alt fa-fw"></i>Essay</a>

  </li>


      
        
            
  <li class="menu-item menu-item-resources">

    <a href="/resources/" rel="section"><i class="fa fa-inbox fa-fw"></i>Resources</a>

  </li>


      
        <li class="menu-item menu-item-friends">

    <a href="/friends/" rel="section"><i class="fas fa-link fa-fw"></i>Friends</a>

  </li>
        
            
  <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About Me</a>

  </li>


      
        <li class="menu-item menu-item-showcase">

    <a href="/showcase/" rel="section"><i class="fa fa-solid fa-trophy fa-fw"></i>ShowCase</a>

  </li>
        <li class="menu-item menu-item-changelog">

    <a href="/changelog/" rel="section"><i class="fa fa-history fa-fw"></i>Site Log</a>

  </li>
        <li class="menu-item menu-item-opensource">

    <a href="/opensource/" rel="section"><i class="fas fa-code-branch fa-fw"></i>Open Source</a>

  </li>
        <li class="menu-item menu-item-uewiki">

    <a href="https://ue5wiki.com/" rel="noopener" target="_blank"><i class="fab fa-wikipedia-w fa-fw"></i>Unreal Wiki</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>



<script type="text/javascript">
  let domain='en.imzlp.com';
  let domain_str = atob(domain);
  let pathname = location.pathname;
  if (domain_str!= location.host.toLowerCase()){
        console.log(`this host is not safe,jump to https://${domain_str}${pathname}`);
        location.href=`https://${domain_str}${pathname}`;
  }
</script>

</div>
    </header>

    
  <div class="reading-progress-bar"></div>
  <div class="l10n-header-widget">
    <script>
      // 获取当前页面的 URL
      const currentUrl = window.location.href;
      // 替换 URL 中的部分内容
      const jumpToL10nLink = currentUrl.replace('en.imzlp.com', 'imzlp.com');
      // 将 jumpToL10nLink 绑定到一个全局变量
      window.jumpToL10nLink = jumpToL10nLink;
    </script>

    <a href="#" class="post-l10n-link" title="切换至中文版本" style="float: left;border-bottom: none;" rel="noopener" target="_blank" onclick="window.open(window.jumpToL10nLink, '_blank'); return false;">
      <i class="fa fa-solid fa-language"></i>
    </a>
  </div>



    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en"
  >
    <link itemprop="mainEntityOfPage" href="https://en.imzlp.com/posts/17371/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://img.imzlp.com/imgs/zlp/picgo/2023/202304152112902.webp">
      <meta itemprop="name" content="LIPENGZHA">
      <meta itemprop="description" content=""I think, therefore I am"">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Z's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          UE hot update: demand analysis and solution design<a href="https://github.com/imzlp/blog-md/blob/en/_posts/2020-05-16-17371.md" class="post-edit-link" title="Edit this post" style="float: right;border-bottom: 0px;" rel="noopener" target="_blank"><i class="fa fa-pen-nib"></i></a><a href="https://imzlp.com/posts/17371/" class="post-l10n-link" title="切换至中文版本" style="float: left;border-bottom: 0px;" rel="noopener" target="_blank"><i class="fa fa-solid fa-language"></i></a>
        </h1>

        
          <div class="post-subtitle" style="text-align: center;line-height: 1;">
            <sub text-align="center" style="font-size: 15px;align-content: center;font-style: italic;bottom: 0em;">UE热更新：需求分析与方案设计</sub>
          </div>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-05-16 11:22 11:22:35:22" itemprop="dateCreated datePublished" datetime="2020-05-16T11:22:35+00:00">2020-05-16 11:22</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/UnrealEngine/" itemprop="url" rel="index"><span itemprop="name">UnrealEngine</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/UnrealEngine/%E7%83%AD%E6%9B%B4%E6%96%B0/" itemprop="url" rel="index"><span itemprop="name">热更新</span></a>
                </span>
            </span>

          
            <span id="/posts/17371/" class="post-meta-item leancloud_visitors" data-flag-title="UE hot update: demand analysis and solution design" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>14k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>35 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>Game hot updates are a way for players to obtain the latest game content without reinstalling the game. They are widely used in network games on both PC and mobile platforms, as quick adjustments, bug fixes, and content updates are often needed after a game goes live. If even the smallest change requires players to update the app through the App Store, or manually download and install it from a website, and given that different platforms have inconsistent review rules and feedback times, operations could become chaotic.</p>
<p>While there may be relatively mature solutions for hot updates in other engines, comprehensive discussions on implementing hot updates in UE4 are not commonly found. Fortunately, I have previously analyzed and implemented UE4’s hot update mechanism and plan to write a couple of articles to document my thoughts and implementation plans, along with a runnable demo, which I hope will be of help to those who need it.</p>
<p>To conveniently collect and manage common questions and solutions regarding hot updates and HotPatcher, I’ve created a new article to document and organize them: <a target="_blank" rel="noopener" href="https://imzlp.com/posts/16895/">UE4 Hot Update: Questions &amp; Answers</a>. If you encounter issues, please check this FAQ page first.</p>
<span id="more"></span>

<p>This article will cover two sections: <strong>Requirement Analysis</strong> and <strong>Solution Design</strong>, focusing on my thoughts and summaries during the research on hot update solutions. The specific implementation of hot updates will be detailed in the next article.</p>
<h3 id="Core-Requirement-Analysis"><a href="#Core-Requirement-Analysis" class="headerlink" title="Core Requirement Analysis"></a>Core Requirement Analysis</h3><p>As it involves <strong>hot updates</strong>, we essentially need to delay the game’s content updates until runtime. From the simplest yet most crucial process perspective, the execution structure looks like this:<br><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/17371/hotupdate-flow.svg"></p>
<p>Based on the flowchart above, we can break down the specific tasks needed for hot updates into the following questions that need to be addressed:</p>
<ol>
<li>What content in UE can be hot updated?</li>
<li>How to package the content that can be hot updated and manage those updates?</li>
<li>How to use the resource packages downloaded for hot updates in UE?</li>
<li>How to compare the latest versions of local and server content?</li>
<li>Download and verify hot update files.</li>
</ol>
<p>The <strong>most critical</strong> requirement in hot updates is to address the issues of <strong>how to package resources</strong> and conduct <strong>version management</strong>. The download process may vary across different applications, so I’ll only cover the basic capability for implementing a hot update download and update process.</p>
<p>Let’s analyze these questions one by one.</p>
<h3 id="What-content-in-UE-can-be-hot-updated"><a href="#What-content-in-UE-can-be-hot-updated" class="headerlink" title="What content in UE can be hot updated?"></a>What content in UE can be hot updated?</h3><p>From a <strong>programmatic perspective</strong>, UE provides C++ and Blueprints as the development languages and scripts offered by the engine. Since C++ is a compiled language, all changes require compilation, which means C++ code cannot be hot updated. However, <strong>Blueprints</strong>, which are essentially <strong>assets (uasset)</strong>, do not require reinstallation for updates, so game logic written in <strong>Blueprints</strong> can be hot updated.</p>
<p>However, since Blueprints are <strong>resources</strong>, any modification to Blueprint logic requires execution of Cook to package, making updates inconvenient, and collaborating on Blueprint projects is challenging to manage, necessitating the integration of a text-based scripting language.</p>
<p>In domestic game development, integrating <a target="_blank" rel="noopener" href="https://www.lua.org/">Lua</a> as the business script is common, and Tencent has open-sourced two UE plugins that integrate Lua, namely <a target="_blank" rel="noopener" href="https://github.com/Tencent/sluaunreal">sluaunreal</a> and <a target="_blank" rel="noopener" href="https://github.com/hxhb/debugable-unlua">UnLua</a>. These can be used in UE for scripting business logic instead of using Blueprints.</p>
<p>I chose <a target="_blank" rel="noopener" href="https://github.com/hxhb/debugable-unlua">UnLua</a> for my project and integrated several common Lua libraries, editor extensions, common library exports, and fixed some bugs based on UnLua’s official version. It’s open-sourced on GitHub: <a target="_blank" rel="noopener" href="https://github.com/hxhb/debugable-unlua">debugable-unlua</a>, and I will <strong>periodically</strong> merge the official version.</p>
<p>In a previous article, I wrote about the use of UnLua: <a target="_blank" rel="noopener" href="https://imzlp.com/posts/36659/">UE4 Hot Update: Lua Programming Guide Based on UnLua</a>.</p>
<p>Additionally, <strong>all uasset resources in the project</strong> (maps, blueprints, models, animations, textures, UMG, audio, fonts, etc.) are also updatable. UE’s uasset requires cooking before packaging. The meaning of Cook is to convert UE’s <strong>platform-independent</strong> internal format into a specific platform format since various platforms utilize their proprietary formats or storage formats that perform better on their platforms.</p>
<p>For example, when packaging a UE project for Windows, it generates files with a path relationship similar to the example below:</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">D:\Examples\PackageExample\Package&gt;tree /f</span><br><span class="line">Volume in Drive C has no label.</span><br><span class="line"> Volume Serial Number is BAB5-5234</span><br><span class="line">C:.</span><br><span class="line">└─WindowsNoEditor</span><br><span class="line">    │  Manifest_NonUFSFiles_Win64.txt</span><br><span class="line">    │  PackageExample.exe</span><br><span class="line">    │</span><br><span class="line">    ├─Engine</span><br><span class="line">    │  ├─ ...</span><br><span class="line">    │</span><br><span class="line">    └─PackageExample</span><br><span class="line">        └─Content</span><br><span class="line">            └─Paks</span><br><span class="line">                PackageExample-WindowsNoEditor.pak</span><br></pre></td></tr></table></figure>

<p>The <code>*.pak</code> files under <code>Content/Paks</code> represent all non-code resources packaged by UE; the game reads resources from these paks at startup, which contain not only uasset content but can also be understood as: pak files are the resource packs necessary for the game’s operation. The content supported in paks is what UE hot updates can support.</p>
<p>By default (if no files are set to be ignored), UE4 will put all project resources into a single Pak file during packaging, including the following contents:</p>
<p>In the following descriptions, there are a few key terms: <code>PROJECT_NAME</code> is the project name, and <code>PLATFORM_NAME</code> is the name of the platform on which it was packaged.</p>
<ul>
<li><p>During packaging, all resources participating in Cook from the project are included in the Pak; I will supplement future articles regarding which resources the engine cooks during packaging.</p>
</li>
<li><p>Engine Slate resource files in <code>Engine\Content\Slate\</code>, such as fonts/images, etc.</p>
</li>
<li><p>Relevant language files in the engine’s <code>Content\Internationalization</code>.</p>
</li>
<li><p>The <code>locmeta</code>/<code>locres</code> files in <code>Content\Localization</code> under the engine and enabled plugin directories.</p>
</li>
<li><p>The <code>uproject</code> file of the project, mounted at <code>../../../PROJECT_NAME/PROJECT_NAME.uproject</code>.</p>
</li>
<li><p>The <code>uplugin</code> files for all plugins enabled in the project, mounted at paths relative to <code>../../../Engine/</code> or <code>../../../PROJECT_NAME/Plugins/</code>.</p>
</li>
<li><p>The <code>Intermediate\Staging\PROJECT_NAME.upluginmanifest</code> file in the project directory, mounted at <code>../../../PROJECT_NAME/Plugins/PROJECT_NAME.upluginmanifest</code>.</p>
</li>
<li><p>The engine’s ini files, including all except <code>Editor</code> ini and <code>BaseLightmass.ini</code>/<code>BasePakFileRules.ini</code> in the engine’s <code>Engine/Config</code>.</p>
</li>
<li><p>Platform-specific ini files under <code>Engine/Config/PLATFORM_NAME</code>.</p>
</li>
<li><p>The ini files of the enabled plugins, located in the config directory of the plugin.</p>
</li>
<li><p>The <code>AssetRegistry.bin</code> produced during Cook.</p>
</li>
<li><p>The <code>PLATFORM_NAME\Engine\GlobalShaderCache*.bin</code> files produced during Cook.</p>
</li>
<li><p>The <code>PLATFORM_NAME\PROJECT_NAME\Content\ShaderArchive-*.ushaderbytecode</code> files produced during Cook.</p>
</li>
<li><p>Non-uasset files added via <code>Project Setting</code>-<code>Packaging</code>-<code>Add Non-Asset Directory*</code>, etc.</p>
</li>
</ul>
<p>All the files mentioned above can be hot updated in UE.</p>
<p>Relevant configurations can be seen in <code>Engine\Config\BaseGame.ini</code>:</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">+<span class="attr">EarlyDownloaderPakFileFiles</span>=...\Content\Internationalization\...\*.icu</span><br><span class="line">+<span class="attr">EarlyDownloaderPakFileFiles</span>=...\Content\Internationalization\...\*.brk</span><br><span class="line">+<span class="attr">EarlyDownloaderPakFileFiles</span>=...\Content\Internationalization\...\*.res</span><br><span class="line">+<span class="attr">EarlyDownloaderPakFileFiles</span>=...\Content\Internationalization\...\*.nrm</span><br><span class="line">+<span class="attr">EarlyDownloaderPakFileFiles</span>=...\Content\Internationalization\...\*.cfu</span><br><span class="line">+<span class="attr">EarlyDownloaderPakFileFiles</span>=...\Content\Localization\...\*.*</span><br><span class="line">+<span class="attr">EarlyDownloaderPakFileFiles</span>=...\Content\Localization\*.*</span><br><span class="line">+<span class="attr">EarlyDownloaderPakFileFiles</span>=...\Content\Certificates\...\*.*</span><br><span class="line">+<span class="attr">EarlyDownloaderPakFileFiles</span>=...\Content\Certificates\*.*</span><br><span class="line"><span class="comment">; have special cased game localization so that it&#x27;s not required for early pak file</span></span><br><span class="line">+<span class="attr">EarlyDownloaderPakFileFiles</span>=-...\Content\Localization\Game\...\*.*</span><br><span class="line">+<span class="attr">EarlyDownloaderPakFileFiles</span>=-...\Content\Localization\Game\*.*</span><br><span class="line">+<span class="attr">EarlyDownloaderPakFileFiles</span>=...\Config\...\*.ini</span><br><span class="line">+<span class="attr">EarlyDownloaderPakFileFiles</span>=...\Config\*.ini</span><br><span class="line">+<span class="attr">EarlyDownloaderPakFileFiles</span>=...\Engine\GlobalShaderCache*.bin</span><br><span class="line">+<span class="attr">EarlyDownloaderPakFileFiles</span>=...\Content\ShaderArchive-Global*.ushaderbytecode</span><br><span class="line">+<span class="attr">EarlyDownloaderPakFileFiles</span>=...\Content\Slate\*.*</span><br><span class="line">+<span class="attr">EarlyDownloaderPakFileFiles</span>=...\Content\Slate\...\*.*</span><br><span class="line">+<span class="attr">EarlyDownloaderPakFileFiles</span>=...\*.upluginmanifest</span><br><span class="line">+<span class="attr">EarlyDownloaderPakFileFiles</span>=...\*.uproject</span><br><span class="line">+<span class="attr">EarlyDownloaderPakFileFiles</span>=...\global_sf*.metalmap</span><br></pre></td></tr></table></figure>

<p>Besides the built-in resource types, to achieve <strong>program hot updates</strong>, the key point is that <strong>non-resource files</strong> can also be packaged into paks. This addresses the issue mentioned earlier regarding the updates needed for using <a target="_blank" rel="noopener" href="https://github.com/hxhb/debugable-unlua">UnLua</a> as the business script.</p>
<h3 id="How-to-package-hot-update-content-and-manage-versions"><a href="#How-to-package-hot-update-content-and-manage-versions" class="headerlink" title="How to package hot update content and manage versions?"></a>How to package hot update content and manage versions?</h3><p>From the previous section, we learned what content can be hot updated in UE. Another crucial aspect of hot updates is: how to package the desired content to produce a downloadable hot update file?</p>
<p>All platforms in UE include pak files during packaging (some are embedded, while others are separate). Therefore, our requirement is to extract the desired resources into a pak. UE uses the <code>UnrealPak</code> tool to package files into a pak. UnrealPak also provides commands to view the files within a pak and to extract files from it. This part can be referenced in a previous article of mine: <a target="_blank" rel="noopener" href="https://imzlp.com/posts/12143/#UnrealPak%E7%9A%84%E5%8F%82%E6%95%B0">UE4 Toolchain Configuration and Development Tips#UnrealPak Parameters</a>, where you can find additional articles on the topic.</p>
<p>During packaging, UE calls UnrealPak to generate pak files, collecting resource information during packaging into a <code>pak-commandlist.txt</code> file, which records the resources to be included in the pak and their mount points.</p>
<p>The basic command is as follows:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UnrealPak.exe D:\TEST.pak -create=<span class="string">&quot;XXXXXXX.txt&quot;</span></span><br></pre></td></tr></table></figure>

<p>For simple pak generation, we can directly call <code>UnrealPak</code>. However, another significant point in the hot update process is: <strong>how to control which resources are packaged into the specified pak?</strong></p>
<p>UE provides a feature similar to <code>Chunk</code>, but it’s cumbersome, requiring each resource to have a designated chunk ID, which only gets generated during packaging, making it inconvenient to control which resources are included in each pak.</p>
<p>Moreover, by default, UE can only add non-resource files from the <code>Content</code> path during packaging, causing many files to be difficult to update conveniently. Although the <code>Project Launcher</code> also offers patching operations, the resources packed are a black box without the ability to know precisely which files are included. It’s also not possible to generate a patch based on another patch, rendering the official packaging method ineffective for our hot update needs.</p>
<p>Therefore, I developed a plugin to address these issues, which is open-sourced on GitHub: <a target="_blank" rel="noopener" href="https://github.com/hxhb/HotPatcher">hxhb/HotPatcher</a>, with introduction documentation available at: <a target="_blank" rel="noopener" href="https://imzlp.com/posts/17590/">UE4 Resource Hot Update Packaging Tool HotPatcher</a>.</p>
<p>Its function is to easily specify which resources and files to package into which pak within the UE editor. It also offers a one-click Cook for multiple platforms, allowing for multiple platform pak generation, version information export, and iterative patching.</p>
<p>The core concept is: while generating the base package, you can use <a target="_blank" rel="noopener" href="https://github.com/hxhb/HotPatcher">HotPatcher</a> to export resource information, and when changes occur in the project, import the <strong>resource information from the base package</strong> and compare it with the current project’s resource information to find the differences, packaging those into the pak.</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/17371/ue4-hotpatcher-by-release.webp"></p>
<p>This article does not delve into the detailed usage of <a target="_blank" rel="noopener" href="https://github.com/hxhb/HotPatcher">HotPatcher</a>; specific usage documentation and parameter descriptions can be found in the provided document link.</p>
<p>In summary, using <a target="_blank" rel="noopener" href="https://github.com/hxhb/HotPatcher">hxhb/HotPatcher</a> facilitates UE hot update resource packaging and version management!</p>
<h3 id="How-to-use-the-resource-packages-downloaded-for-hot-updates-in-UE"><a href="#How-to-use-the-resource-packages-downloaded-for-hot-updates-in-UE" class="headerlink" title="How to use the resource packages downloaded for hot updates in UE?"></a>How to use the resource packages downloaded for hot updates in UE?</h3><p>Here, <strong>resource packages</strong> refer to the pak files generated in the previous section.</p>
<p>By default, UE provides three automatic mounting paths for paks:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># relative to Project Path</span></span><br><span class="line">Content/Paks/</span><br><span class="line">Saved/Paks/</span><br><span class="line"><span class="comment"># relative to Engine Path</span></span><br><span class="line">Content/Paks</span><br></pre></td></tr></table></figure>

<p>In my previous notes, I recorded the process of loading pak files when the engine starts: <a target="_blank" rel="noopener" href="https://imzlp.com/notes/#UE4-%E5%BC%95%E6%93%8E%E5%90%AF%E5%8A%A8%E6%97%B6Pak%E7%9A%84%E5%8A%A0%E8%BD%BD">UE4: Loading Pak Files When Engine Starts</a>.</p>
<p>Placing the generated pak directly into one of these three directories will typically result in the automatic loading of all paks from these paths without enabling <code>Signing</code>. From a testing perspective, simply placing the packaged pak file in one of these folders and starting the game will automatically mount the pak.</p>
<p>This leads to another question: <strong>How can UE know which pak file is the latest?</strong></p>
<p>Since hot updates are meant to replace outdated resources with newly updated ones, it is essential to identify which pak contains all the latest resources.</p>
<p>Taking the three paths for automatic pak mounting as an example, the engine prioritizes them based on folder structure:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Runtime\PakFile\Private\IPlatformFilePak.cpp</span></span><br><span class="line"><span class="function">int32 <span class="title">FPakPlatformFile::GetPakOrderFromPakFilePath</span><span class="params">(<span class="type">const</span> FString&amp; PakFilePath)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (PakFilePath.<span class="built_in">StartsWith</span>(FString::<span class="built_in">Printf</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;%sPaks/%s-&quot;</span>), *FPaths::<span class="built_in">ProjectContentDir</span>(), FApp::<span class="built_in">GetProjectName</span>())))</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">4</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (PakFilePath.<span class="built_in">StartsWith</span>(FPaths::<span class="built_in">ProjectContentDir</span>()))</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (PakFilePath.<span class="built_in">StartsWith</span>(FPaths::<span class="built_in">EngineContentDir</span>()))</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (PakFilePath.<span class="built_in">StartsWith</span>(FPaths::<span class="built_in">ProjectSavedDir</span>()))</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>As observed, pak files located in the <code>Content/Paks</code> directory and prefixed with the project name have the highest default priority, followed by <code>Project/Content/Paks</code> &gt; <code>Engine/Content/Pak</code> &gt; <code>Saved/Paks</code>.</p>
<p><strong>Furthermore</strong>, the naming of pak files also affects their priority.</p>
<p>Files ending with <code>_Num_P.pak</code>, where <code>Num</code> is a number, confer higher priority to patch packages compared to regular paks. In <code>IPlatformFilePak.cpp</code>, <code>_P.pak</code> files have their <code>PakOrder</code> increased by 100 by default, and the larger the number before <code>_P.pak</code>, the higher the loading priority.</p>
<p>This <strong>priority</strong> array is used during <code>mount pak</code>, where each pak file must be specified, aiding the engine in accurately locating the newest version of files during resource searches and loading.</p>
<p>However, if malicious users discover these rules and deliberately disrupt the naming of pak files, it could lead to program errors, so it’s not advisable to solely rely on naming conventions to establish priority; it’s best to perform a validation during hot updates.</p>
<p>Additionally, for hot update needs, you need to control the timing of mounting the pak yourself, and for this, you need to invoke the <code>MountPak</code> function myself. I’ve written a wrapper function:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">MountPak</span><span class="params">(<span class="type">const</span> FString&amp; PakPath, int32 PakOrder, <span class="type">const</span> FString&amp; InMountPoint)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">bool</span> bMounted = <span class="literal">false</span>;</span><br><span class="line"><span class="meta">#<span class="keyword">if</span> !WITH_EDITOR</span></span><br><span class="line">	FPakPlatformFile* PakFileMgr=(FPakPlatformFile*)FPlatformFileManager::<span class="built_in">Get</span>().<span class="built_in">GetPlatformFile</span>(FPakPlatformFile::<span class="built_in">GetTypeName</span>());</span><br><span class="line">	<span class="keyword">if</span> (!PakFileMgr)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">UE_LOG</span>(LogTemp, Log, <span class="built_in">TEXT</span>(<span class="string">&quot;GetPlatformFile(TEXT(\&quot;PakFile\&quot;) is NULL&quot;</span>));</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	PakOrder = FMath::<span class="built_in">Max</span>(<span class="number">0</span>, PakOrder);</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">if</span> (FPaths::<span class="built_in">FileExists</span>(PakPath) &amp;&amp; FPaths::<span class="built_in">GetExtension</span>(PakPath) == <span class="built_in">TEXT</span>(<span class="string">&quot;pak&quot;</span>))</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="type">const</span> TCHAR* MountPount = InMountPoint.<span class="built_in">GetCharArray</span>().<span class="built_in">GetData</span>();</span><br><span class="line">		<span class="keyword">if</span> (PakFileMgr-&gt;<span class="built_in">Mount</span>(*PakPath, PakOrder,MountPount))</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">UE_LOG</span>(LogTemp, Log, <span class="built_in">TEXT</span>(<span class="string">&quot;Mounted = %s, Order = %d, MountPoint = %s&quot;</span>), *PakPath, PakOrder, !MountPount ? <span class="built_in">TEXT</span>(<span class="string">&quot;(NULL)&quot;</span>) : MountPount);</span><br><span class="line">			bMounted = <span class="literal">true</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="built_in">UE_LOG</span>(LogTemp, Error, <span class="built_in">TEXT</span>(<span class="string">&quot;Faild to mount pak = %s&quot;</span>), *PakPath);</span><br><span class="line">			bMounted = <span class="literal">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">	<span class="keyword">return</span> bMounted;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>When pak files are downloaded from the server, this function can be called to mount them into the engine. As long as you ensure that the <code>PakOrder</code> is correct, you do not need to worry about the pak; the engine will automatically locate the latest version of the resources when loading files.</p>
<blockquote>
<p>Note: Typically, the hot update process is executed in a new map; no resource loading actions should happen before the hot update, as resources loaded before the hot update will not be refreshed even if the new pak is mounted afterward.</p>
</blockquote>
<h3 id="How-to-compare-local-versions-with-the-latest-versions-on-the-server"><a href="#How-to-compare-local-versions-with-the-latest-versions-on-the-server" class="headerlink" title="How to compare local versions with the latest versions on the server?"></a>How to compare local versions with the latest versions on the server?</h3><p>Different applications can implement various handling processes. The key idea is that at game startup, the hot update module first requests the latest hot update version info from the server. The client then scans the local downloaded patches based on the current package’s version info, comparing the two datasets to determine which versions need downloading.</p>
<p>A simple approach is to write a JSON file that records all patch information (filename, MD5 values), which the client downloads each time it starts and parses. The client locally scans the pak files in a designated folder, compares their filenames and MD5 values to produce a legitimate local pak list, and then contrasts that with the server’s version list to identify differences for downloading.</p>
<h3 id="How-to-download-and-verify-hot-update-files"><a href="#How-to-download-and-verify-hot-update-files" class="headerlink" title="How to download and verify hot update files?"></a>How to download and verify hot update files?</h3><p>In the previous section, we discussed how to request the server and analyze the current user’s necessary patch versions. This section will cover how to download and verify them in UE.</p>
<p>UE provides a cross-platform HTTP library, which can be used through the <code>HTTP</code> module under <code>Online</code>:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">HttpRequest = FHttpModule::<span class="built_in">Get</span>().<span class="built_in">CreateRequest</span>();</span><br><span class="line">HttpRequest-&gt;<span class="built_in">OnRequestProgress</span>().<span class="built_in">BindUObject</span>(<span class="keyword">this</span>, &amp;UDownloadProxy::OnDownloadProcess);</span><br><span class="line">HttpRequest-&gt;<span class="built_in">OnProcessRequestComplete</span>().<span class="built_in">BindUObject</span>(<span class="keyword">this</span>, &amp;UDownloadProxy::OnDownloadComplete);</span><br><span class="line">HttpRequest-&gt;<span class="built_in">SetURL</span>(InternalDownloadFileInfo.URL);</span><br><span class="line">HttpRequest-&gt;<span class="built_in">SetVerb</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;GET&quot;</span>));</span><br><span class="line">HttpRequest-&gt;<span class="built_in">ProcessRequest</span>();</span><br></pre></td></tr></table></figure>

<p><strong>However</strong>, I must reiterate that simply using this default HTTP download method would require writing to the file only after the download is complete. If the file is large, the write process is time-consuming and could block other operations. Moreover, since the files need verification, I opted for MD5. MD5 is a hash algorithm that requires the file to be completely read from start to finish to compute the result. If you attempt to separate <strong>downloading</strong>, <strong>storing</strong>, and <strong>verifying</strong> into three steps, it would waste a lot of time.</p>
<p>Therefore, I wrapped up a download library that allows for <strong>downloading and storing simultaneously</strong>/<strong>downloading and calculating MD5 simultaneously</strong>, which means that the file is downloaded and stored locally as well as its MD5 value is calculated for verification all in one process. It also supports pause/resume and segmented downloads, which can be altered for breakpoint continuation.</p>
<p>This plugin is also open-sourced on GitHub: <a target="_blank" rel="noopener" href="https://github.com/hxhb/ue4-dtkit">ue4-dtkit</a>, and supports iOS/Android/Windows/Mac across four platforms.</p>
<p>Within this plugin, I wrapped a <code>MD5Wrapper.hpp</code> that can be used for MD5 calculations elsewhere, utilizing the <code>OpenSSL</code> library.</p>
<p>After downloading and obtaining the MD5 of the file, compare it with the MD5 from the version information on the server; if they match, you can proceed to <code>MountPak</code>.</p>
<h3 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h3><p>This article primarily introduces the concepts of hot updates in UE and the tools that can be utilized, with a focus on resource packaging in UE4. Using the tools I created, such as <a target="_blank" rel="noopener" href="https://github.com/hxhb/HotPatcher">hxhb/HotPatcher</a>, significantly simplifies this process. As for the downloading and verification flow, this is just for reference, and you can implement your method according to your process.</p>
<p>The next article on hot updates will specifically implement an example based on the concepts and tools presented here. The project and code will also be open-sourced when time allows. However, based on the ideas and tools provided in this article, it should not be too difficult for you to implement your solution.</p>
<p>Resources and documentation mentioned in this article:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/hxhb/HotPatcher">hxhb/HotPatcher</a></li>
<li><a target="_blank" rel="noopener" href="https://imzlp.com/posts/17590/">UE4 Resource Hot Update Packaging Tool HotPatcher</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/hxhb/ue4-dtkit">ue4-dtkit</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/hxhb/debugable-unlua">debugable-unlua</a></li>
<li><a target="_blank" rel="noopener" href="https://imzlp.com/posts/36659/">UE4 Hot Update: Lua Programming Guide Based on UnLua</a></li>
<li><a target="_blank" rel="noopener" href="https://imzlp.com/notes/#UE4-%E5%BC%95%E6%93%8E%E5%90%AF%E5%8A%A8%E6%97%B6Pak%E7%9A%84%E5%8A%A0%E8%BD%BD">UE4: Loading Pak Files When Engine Starts</a></li>
<li><a target="_blank" rel="noopener" href="https://imzlp.com/posts/12143/#UnrealPak%E7%9A%84%E5%8F%82%E6%95%B0">UE4 Toolchain Configuration and Development Tips#UnrealPak Parameters</a></li>
</ul>
<h3 id="Hot-Update-Series-Articles"><a href="#Hot-Update-Series-Articles" class="headerlink" title="Hot Update Series Articles"></a>Hot Update Series Articles</h3><ul>
<li><a target="_blank" rel="noopener" href="https://imzlp.com/posts/17371">UE4 Hot Update: Requirements Analysis and Solution Design</a></li>
<li><a target="_blank" rel="noopener" href="https://imzlp.com/posts/17590/">UE4 Resource Hot Update Packaging Tool HotPatcher</a></li>
<li><a target="_blank" rel="noopener" href="https://imzlp.com/posts/10938/">UE4 Hot Update: Automation Process Based on HotPatcher</a></li>
<li><a target="_blank" rel="noopener" href="https://imzlp.com/posts/13765/">UE4 Hot Update: Splitting Base Package</a></li>
<li><a target="_blank" rel="noopener" href="https://imzlp.com/posts/3675">UE4 Hot Update: Asset Management and Audit Tools</a></li>
<li><a target="_blank" rel="noopener" href="https://imzlp.com/posts/5867/">UE4 Hot Update: Create Shader Patch</a></li>
<li><a target="_blank" rel="noopener" href="https://imzlp.com/posts/16895/">UE4 Hot Update: Questions &amp; Answers</a></li>
</ul>

    </div>

    
    
        
        
          
            <blockquote class="blockquote-center">
              
                The article is finished. If you have any questions, please comment and communicate.
              
            <br/>
            
                <div class="qr-code" onclick="return false">
                    <script src="/js/qrcode.min.js"></script>
                    <div id="qrcode">
                      
                        <img src="https://imzlp.com/images/wechat-qrcode.webp">
                      
                    <p>Scan the QR code on WeChat and follow me.</p>
                    </div>
                </div>
            
            </blockquote>
          
        

        
          <div class="postCopyright" style="clear:both;">
             <span>Title:</span><a href="/posts/17371/" target="_blank">UE hot update: demand analysis and solution design</a><br/>
             <span>Author:</span><a href="/about" target="_blank" title="查看 LIPENGZHA 的资料">LIPENGZHA</a><br/>
             <span>Publish Date:</span>2020/05/16 11:22<br/>
             
             <span>Word Count:</span><span class="page-count">14k Words</span><br/>
             
             <span>Link:</span><a href="/posts/17371/" target="_blank" title="UE hot update: demand analysis and solution design">https://en.imzlp.com/posts/17371/</a>
             <span class="copy-path" data-clipboard-text="Link: https://en.imzlp.com/posts/17371/ Author: LIPENGZHA" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
             <script src="/js/jquery.min.js"></script>
             <script src="/js/clipboard.min.js"></script>
             <script> var clipboard = new Clipboard('.copy-path'); </script>
             <br/>
             
             <span>License:</span><i class="fab fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" title="Attribution-NonCommercial-ShareAlike 4.0 International">CC BY-NC-SA 4.0</a><br/>
             
             <span>Reprinting of the full article is prohibited.</span>
          </div>
        
    

        
  <div class="reward-container">
    <div>Your donation will encourage me to keep creating!</div>
    <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
      Donate
    </button>
    <div id="qr" style="display: none;">
        
        <div style="display: inline-block;">
          <img src="/images/reward/wechatpay.webp" alt="LIPENGZHA WeChat Pay">
          <p>WeChat Pay</p>
        </div>

    </div>
  </div>



      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/UnrealEngine/" rel="tag"># UnrealEngine</a>
              <a href="/tags/%E7%83%AD%E6%9B%B4%E6%96%B0/" rel="tag"># 热更新</a>
              <a href="/tags/HotPatcher/" rel="tag"># HotPatcher</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/posts/1948/" rel="prev" title="UE Development Notes: Mac/iOS">
      <i class="fa fa-chevron-left"></i> UE Development Notes: Mac/iOS
    </a></div>
      <div class="post-nav-item">
    <a href="/posts/8470/" rel="next" title="Integrate ZSTD compression algorithm for UE4 using ModularFeature">
      Integrate ZSTD compression algorithm for UE4 using ModularFeature <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
      <div class="tabs tabs-comment">
        <ul class="nav-tabs">
            <li class="tab"><a href="#comment-utteranc">utteranc</a></li>
            <li class="tab"><a href="#comment-valine">valine</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane utteranc" id="comment-utteranc">
              
  
  <div class="comments">
  <script src="https://utteranc.es/client.js" repo="hxhb/blog-comments" issue-term="pathname" theme="github-light" crossorigin="anonymous" async></script>
  </div>
  
  
            </div>
            <div class="tab-pane valine" id="comment-valine">
              <div class="comments" id="valine-comments"></div>
            </div>
        </div>
      </div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#Core-Requirement-Analysis"><span class="nav-number">1.</span> <span class="nav-text">Core Requirement Analysis</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#What-content-in-UE-can-be-hot-updated"><span class="nav-number">2.</span> <span class="nav-text">What content in UE can be hot updated?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#How-to-package-hot-update-content-and-manage-versions"><span class="nav-number">3.</span> <span class="nav-text">How to package hot update content and manage versions?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#How-to-use-the-resource-packages-downloaded-for-hot-updates-in-UE"><span class="nav-number">4.</span> <span class="nav-text">How to use the resource packages downloaded for hot updates in UE?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#How-to-compare-local-versions-with-the-latest-versions-on-the-server"><span class="nav-number">5.</span> <span class="nav-text">How to compare local versions with the latest versions on the server?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#How-to-download-and-verify-hot-update-files"><span class="nav-number">6.</span> <span class="nav-text">How to download and verify hot update files?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Conclusion"><span class="nav-number">7.</span> <span class="nav-text">Conclusion</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Hot-Update-Series-Articles"><span class="nav-number">8.</span> <span class="nav-text">Hot Update Series Articles</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person" oncontextmenu="return false" οndragstart="return false">
    <img class="site-author-image" itemprop="image" alt="LIPENGZHA"
      src="https://img.imzlp.com/imgs/zlp/picgo/2023/202304152112902.webp">
  <p class="site-author-name" itemprop="name">LIPENGZHA</p>
  <div class="site-description" itemprop="description">"I think, therefore I am"</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
             
          <span class="site-state-item-count">190</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">95</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">190</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/hxhb" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;hxhb" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://linkedin.com/in/lipengzha" title="Linkedin → https:&#x2F;&#x2F;linkedin.com&#x2F;in&#x2F;lipengzha" rel="noopener" target="_blank"><i class="fab fa-linkedin fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.zhihu.com/people/imzlp" title="知乎 → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;imzlp" rel="noopener" target="_blank"><i class="fa fa-custom zhihu fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="/images/wechat-qrcode-offical.webp" title="微信公众号 → &#x2F;images&#x2F;wechat-qrcode-offical.webp"><i class="fab fa-weixin fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:imzlp@foxmail.com" title="E-Mail → mailto:imzlp@foxmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fa fa-rss fa-fw"></i></a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://consolehelp.imzlp.com/" title="https:&#x2F;&#x2F;consolehelp.imzlp.com&#x2F;" rel="noopener" target="_blank">UE Console Help</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://imzlp.com/opensource/" title="https:&#x2F;&#x2F;imzlp.com&#x2F;opensource&#x2F;" rel="noopener" target="_blank">Open Source Projects</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://imzlp.com/posts/11515/" title="https:&#x2F;&#x2F;imzlp.com&#x2F;posts&#x2F;11515&#x2F;" rel="noopener" target="_blank">UE C++ API Dash Documents</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://ue5wiki.com/" title="https:&#x2F;&#x2F;ue5wiki.com&#x2F;" rel="noopener" target="_blank">Unreal Engine Wiki</a>
        </li>
    </ul>
  </div>

      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2014 – 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">LIPENGZHA</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="Symbols count total">1.5m</span>
</div>
  <div class="powered-by-other">
    
	    <center>Github Pages | Actions | NeXT | Cloudflare | Hexo Deploy</center>
      
  </div>

<script>
function checkWebp(callback) {
    var img = new Image();
    img.onload = function () { callback((img.width > 0) && (img.height > 0)); };
    img.onerror = function () { callback(false); };
    img.src = 'data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA';
}
function showImage(useWebp) {
    var imgs = [].slice.call(document.querySelectorAll('img'));
    imgs.forEach(function (e) {
        if (!useWebp) {
            var src = e.getAttribute('data-src')
            src = src.replace(/\.webp$/, '.png');
            e.setAttribute('data-src', src);
        }
    });
}
checkWebp(showImage);
</script>

        








      </div>
    </footer>
  </div>

  
  <script src="//lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/animejs/3.2.1/anime.min.js"></script>
  <script src="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/jquery/3.5.1/jquery.min.js"></script>
  <script src="//lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/fancybox/3.5.7/jquery.fancybox.min.js"></script>
  <script src="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/lozad.js/1.16.0/lozad.min.js"></script>
  <script src="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/pangu/4.0.7/pangu.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>



<script src="/js/code-unfold.js"></script>

  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>




  
<script src="/js/local-search.js"></script>









<script>
document.querySelectorAll('.pdfobject-container').forEach(element => {
  let url = element.dataset.target;
  let pdfOpenParams = {
    navpanes : 0,
    toolbar  : 0,
    statusbar: 0,
    pagemode : 'thumbs',
    view     : 'FitH'
  };
  let pdfOpenFragment = '#' + Object.entries(pdfOpenParams).map(([key, value]) => `${key}=${encodeURIComponent(value)}`).join('&');
  let fullURL = `/lib/pdf/web/viewer.html?file=${encodeURIComponent(url)}${pdfOpenFragment}`;

  if (NexT.utils.supportsPDFs()) {
    element.innerHTML = `<embed class="pdfobject" src="${url + pdfOpenFragment}" type="application/pdf" style="height: ${element.dataset.height};">`;
  } else {
    element.innerHTML = `<iframe src="${fullURL}" style="height: ${element.dataset.height};" frameborder="0"></iframe>`;
  }
});
</script>


<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  

  
  <script src="//img.imzlp.com/imgs/zlp/picgo/2021/quicklink.umd.js"></script>
  <script>
      window.addEventListener('load', () => {
      quicklink({
        timeout : 3000,
        priority: true,
        ignores : [uri => uri.includes('#'),uri => uri === 'https://en.imzlp.com/posts/17371/',]
      });
      });
  </script>


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/valine/1.4.14/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    var requiredFields = 'nick';
    requiredFields = requiredFields.split(',');
    
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'oCE6RMVkVoi5MgUhvFsn1EvV-gzGzoHsz',
      appKey     : 'K9SOaNYJ8PV6xaoFggWG5xvv',
      placeholder: "Leave something behind~",
      avatar     : 'robohash',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : 'en' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : '',
      requiredFields: requiredFields
    });
  }, window.Valine);
});
</script>

</body>
</html>
