<!DOCTYPE html>
<html lang="en,default">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon-32x32-tilt-brush.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-tilt-brush.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-tilt-brush.png">
  <link rel="mask-icon" href="/images/favicon-32x32-tilt-brush.png" color="#222">
  <meta name="google-site-verification" content="ttIkhAIFZQM9Huj8roB0l95ePN2Tv2zv2wRFksi09WA">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noto Serif SC:300,300italic,400,400italic,700,700italic|Pacifico:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Roboto Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="//lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/5.15.2/css/all.min.css">
  <link rel="stylesheet" href="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/fancybox/3.5.7/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"en.imzlp.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false,"width":280},"copycode":{"enable":true,"show_result":true,"style":"flat"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"manual"},"fancybox":true,"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":false,"nav":null,"activeClass":"valine"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"code_unfold":{"enable":true,"CODE_MAX_HEIGHT":600},"path":"search.xml"};
  </script>

  <meta name="description" content="Oculus Quest is the new generation of all-in-one VR headset released by Oculus, supporting 6DoF, with no need for a PC connection or additional positioning base stations. It also supports Guardian; wh">
<meta property="og:type" content="article">
<meta property="og:title" content="Oculus Quest Development with UE4">
<meta property="og:url" content="https://en.imzlp.com/posts/30042/index.html">
<meta property="og:site_name" content="Z&#39;s Blog">
<meta property="og:description" content="Oculus Quest is the new generation of all-in-one VR headset released by Oculus, supporting 6DoF, with no need for a PC connection or additional positioning base stations. It also supports Guardian; wh">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/blog/posts/30042/20190925000314.webp">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/blog/posts/30042/oculus-quest-enable-advance-setting.webp">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/blog/posts/30042/oculus-quest-enable-development-mode.webp">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/blog/posts/30042/oculus-quest-vr-view-unkonw-source.webp">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/blog/posts/30042/preinstall-nvidia-codeworks-for-android.webp">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/blog/posts/30042/install-nvidia-codeworks-for-android.webp">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/blog/posts/30042/system-environment-variable.webp">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/blog/posts/30042/ue4-create-quest-project.webp">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/blog/posts/30042/ue-editor-enable-oculus-vr-plugin.webp">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/blog/posts/30042/ue4-project-setting-Engine-Input.webp">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/blog/posts/30042/ue4-project-setting-engine-rending.webp">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/blog/posts/30042/ue4-project-setting-android-sdk.webp">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/blog/posts/30042/ue4-project-setting-android.webp">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/blog/posts/30042/ue4-setting-android-seted.webp">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/blog/posts/30042/ue4-setting-android-remove-oculus-signature-and-configuration-androidManifest.webp">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/blog/posts/30042/ue4-editor-launch-quest.webp">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/blog/posts/30042/ue4-package-android-error-assdebug.webp">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/blog/posts/30042/ue4-project-setting-android-extra-permissions.webp">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/blog/posts/30042/ue4-package-android-texture-format.webp">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/blog/posts/30042/scrpcy-quest-view.webp">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/blog/posts/30042/scrpcy-quest-view-2.webp">
<meta property="article:published_time" content="2019-09-24T10:41:10.000Z">
<meta property="article:modified_time" content="2020-09-17T21:31:19.000Z">
<meta property="article:author" content="LIPENGZHA">
<meta property="article:tag" content="UnrealEngine">
<meta property="article:tag" content="VR">
<meta property="article:tag" content="OculusQuest">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img.imzlp.com/imgs/zlp/blog/posts/30042/20190925000314.webp">

<link rel="canonical" href="https://en.imzlp.com/posts/30042/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>Oculus Quest Development with UE4 | Z's Blog</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-FDCJ41EFP5"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-FDCJ41EFP5');
      }
    </script>






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.staticfile.org/lxgw-wenkai-screen-webfont/1.7.0/style.min.css" /><!-- hexo injector head_end end --><link rel="alternate" href="/atom.xml" title="Z's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Z's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        
            
  <li class="menu-item menu-item-notes">

    <a href="/notes/" rel="section"><i class="fa fa-edit fa-fw"></i>Notes</a>

  </li>


      
        
            
  <li class="menu-item menu-item-essay">

    <a href="/essay/" rel="section"><i class="fas fa-feather-alt fa-fw"></i>Essay</a>

  </li>


      
        
            
  <li class="menu-item menu-item-resources">

    <a href="/resources/" rel="section"><i class="fa fa-inbox fa-fw"></i>Resources</a>

  </li>


      
        <li class="menu-item menu-item-friends">

    <a href="/friends/" rel="section"><i class="fas fa-link fa-fw"></i>Friends</a>

  </li>
        
            
  <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About Me</a>

  </li>


      
        <li class="menu-item menu-item-showcase">

    <a href="/showcase/" rel="section"><i class="fa fa-solid fa-trophy fa-fw"></i>ShowCase</a>

  </li>
        <li class="menu-item menu-item-changelog">

    <a href="/changelog/" rel="section"><i class="fa fa-history fa-fw"></i>Site Log</a>

  </li>
        <li class="menu-item menu-item-opensource">

    <a href="/opensource/" rel="section"><i class="fas fa-code-branch fa-fw"></i>Open Source</a>

  </li>
        <li class="menu-item menu-item-uewiki">

    <a href="https://ue5wiki.com/" rel="noopener" target="_blank"><i class="fab fa-wikipedia-w fa-fw"></i>Unreal Wiki</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>



<script type="text/javascript">
  let domain='en.imzlp.com';
  let domain_str = atob(domain);
  let pathname = location.pathname;
  if (domain_str!= location.host.toLowerCase()){
        console.log(`this host is not safe,jump to https://${domain_str}${pathname}`);
        location.href=`https://${domain_str}${pathname}`;
  }
</script>

</div>
    </header>

    
  <div class="reading-progress-bar"></div>
  <div class="l10n-header-widget">
    <script>
      // 获取当前页面的 URL
      const currentUrl = window.location.href;
      // 替换 URL 中的部分内容
      const jumpToL10nLink = currentUrl.replace('en.imzlp.com', 'imzlp.com');
      // 将 jumpToL10nLink 绑定到一个全局变量
      window.jumpToL10nLink = jumpToL10nLink;
    </script>

    <a href="#" class="post-l10n-link" title="切换至中文版本" style="float: left;border-bottom: none;" rel="noopener" target="_blank" onclick="window.open(window.jumpToL10nLink, '_blank'); return false;">
      <i class="fa fa-solid fa-language"></i>
    </a>
  </div>



    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en"
  >
    <link itemprop="mainEntityOfPage" href="https://en.imzlp.com/posts/30042/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://img.imzlp.com/imgs/zlp/picgo/2023/202304152112902.webp">
      <meta itemprop="name" content="LIPENGZHA">
      <meta itemprop="description" content=""I think, therefore I am"">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Z's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Oculus Quest Development with UE4<a href="https://github.com/imzlp/blog-md/blob/en/_posts/2019-09-24-30042.md" class="post-edit-link" title="Edit this post" style="float: right;border-bottom: 0px;" rel="noopener" target="_blank"><i class="fa fa-pen-nib"></i></a><a href="https://imzlp.com/posts/30042/" class="post-l10n-link" title="切换至中文版本" style="float: left;border-bottom: 0px;" rel="noopener" target="_blank"><i class="fa fa-solid fa-language"></i></a>
        </h1>

        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-09-24 10:41 10:41:10:41" itemprop="dateCreated datePublished" datetime="2019-09-24T10:41:10+00:00">2019-09-24 10:41</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-09-17 21:31 21:31:19:31" itemprop="dateModified" datetime="2020-09-17T21:31:19+00:00">2020-09-17 21:31</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/UnrealEngine/" itemprop="url" rel="index"><span itemprop="name">UnrealEngine</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/UnrealEngine/VR/" itemprop="url" rel="index"><span itemprop="name">VR</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/UnrealEngine/VR/Quest/" itemprop="url" rel="index"><span itemprop="name">Quest</span></a>
                </span>
            </span>

          
            <span id="/posts/30042/" class="post-meta-item leancloud_visitors" data-flag-title="Oculus Quest Development with UE4" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>11k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>29 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p><a target="_blank" rel="noopener" href="https://www.oculus.com/quest/">Oculus Quest</a> is the new generation of all-in-one VR headset released by Oculus, supporting 6DoF, with no need for a PC connection or additional positioning base stations. It also supports Guardian; when the user walks out of the positioning boundary while wearing the headset, real-world visuals will immediately display in the headset to prevent accidental mishaps.</p>
<p>The <a target="_blank" rel="noopener" href="https://www.oculus.com/quest/">Oculus Quest</a> features two <code>Pentile OLED</code> screens, with a single-eye resolution of <code>1440x1600</code> and a refresh rate of <code>72Hz</code>, powered by a <code> Qualcomm Snapdragon 835</code> processor based on the <code>arm</code> architecture, which is the same as the flagship processors from two years ago (such as Xiaomi 6, Samsung S8).</p>
<p>Quest employs the <code>Oculus Insight</code> (inside-out tracking) positioning solution, using four cameras located at the four corners of the headset panel for positional tracking.<br>The introduction of Oculus Insight during the release event: <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=2jY3B_F3GZk">Oculus Insight VR Positional Tracking System (Sep 2018)</a></p>
<p>And a video of a user’s test of Quest’s tracking range abroad: <a target="_blank" rel="noopener" href="https://drive.google.com/file/d/1-bqNmwUi8J57yykxLP6szgiLeU3IgdgL/view">Quest Distance Test</a>.</p>
<p>The 64G storage version of <code>Oculus Quest</code> is priced at $399, while the 128G version costs $499, with tax-excluded prices roughly around 3500; compared to HTC’s similar new product (HTC Vive Focus), it is significantly cheaper, and it offers even greater advantages over PC-Based VR since it does not require a high-performance host. I believe that 6DoF all-in-one VR devices must be the trend of the future!</p>
<blockquote>
<p>Before the National Day holiday at OC6, Oculus announced two technologies: Oculus Link and finger tracking, both are impressive and promising.</p>
</blockquote>
<p>The entire Quest device is about the same size as a <code>10.5</code> inch iPad, making it easy to carry in a small bag:<br><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/30042/20190925000314.webp"></p>
<p>There’s no need to elaborate on the specifications of the Quest device; the main content of this article will focus on the environment setup, development documentation, debugging tools, and additional considerations when using UE to develop Quest projects, which will be updated continuously.</p>
<span id="more"></span>
<p>First, to package and test applications on Quest, you need to enable Developer Mode on the Quest.</p>
<p>Connect the Quest to a PC using a Type-C data cable, and the headset will prompt whether to allow USB debugging. Check ‘Allow’.<br>You can then use <a target="_blank" rel="noopener" href="https://developer.android.com/studio/command-line/adb">Adb</a> on your PC to connect to the Quest. The system on Quest is based on Android, and you can use <a target="_blank" rel="noopener" href="https://developer.android.com/studio/command-line/adb">Adb</a> for debugging.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell</span><br></pre></td></tr></table></figure>
<p>This connects you to the Quest device, allowing you to view the device information by checking <code>/system/build.props</code>. I exported a copy: <a target="_blank" rel="noopener" href="https://gist.github.com/hxhb/0c72c436044e97f3f11ea44ad7f92912">build.props</a>.</p>
<p>You can also directly use adb to install an apk:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb install xxxx.apk</span><br></pre></td></tr></table></figure>

<p>Additionally, you can use the open-source tool <a target="_blank" rel="noopener" href="https://github.com/the-expanse/SideQuest">SideQuest</a> to manage Android-based VR devices on your PC, and it is also applicable to Quest, allowing for software installation or uninstallation.</p>
<h3 id="Oculus-Developer-Mode"><a href="#Oculus-Developer-Mode" class="headerlink" title="Oculus Developer Mode"></a>Oculus Developer Mode</h3><p>Before setting up the actual development environment, you need to enable <strong>Developer Mode</strong> on the Quest. The prerequisite for setting Developer Mode is joining or <a target="_blank" rel="noopener" href="https://dashboard.oculus.com/organizations/create/">creating</a> a developer organization on the <a target="_blank" rel="noopener" href="https://dashboard.oculus.com/">Oculus Dashboard</a>.</p>
<p>Then, log into the mobile <code>Oculus</code> App using an Oculus account that has a developer organization:</p>
<ul>
<li>The iOS version can be installed from the App Store: <a target="_blank" rel="noopener" href="https://apps.apple.com/us/app/oculus/id1366478176">Oculus for iOS</a></li>
<li>The Android version can be installed from Google Play: <a target="_blank" rel="noopener" href="https://play.google.com/store/apps/details?id=com.oculus.twilight&hl=en_US">Oculus for Android</a>. For those without the GMS environment in China, you can directly install from the apk I downloaded: <a target="_blank" rel="noopener" href="https://stusdnueducn-my.sharepoint.com/:u:/g/personal/2017020625_stu_sdnu_edu_cn/EY8fEpU2L1VBk2EbDnQJKywBIzPBmRMIzySCX85MXFZ_IA?e=rtDrIQ">Download link</a>.</li>
</ul>
<p>After installation, log in, find the Quest device associated with your account, and select <strong>More Settings</strong>:<br><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/30042/oculus-quest-enable-advance-setting.webp"><br>Then find <strong>Developer Mode</strong> and enable it.<br><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/30042/oculus-quest-enable-development-mode.webp"></p>
<p>Once enabled, you will see <code>Unknown Source</code> under <code>Library</code> in Quest, meaning unknown source applications (all subsequently installed test apps will be categorized here).<br><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/30042/oculus-quest-vr-view-unkonw-source.webp"></p>
<h3 id="NVIDIA-CodeWorks-for-Android"><a href="#NVIDIA-CodeWorks-for-Android" class="headerlink" title="NVIDIA CodeWorks for Android"></a>NVIDIA CodeWorks for Android</h3><p>Since Quest essentially runs on the Android system, the packaged game is an apk for Android. To smoothly package the apk, you need to install the Android development environment.<br>We need to install <code>android-sdk</code>/<code>jdk</code>/<code>android-ndk</code>/<code>gradle</code>/<code>apache-ant</code> and several other environments. However, a good news is that NVIDIA has a tool called <a target="_blank" rel="noopener" href="https://developer.nvidia.com/codeworks-android">NVIDIA CodeWorks for Android</a> which can greatly simplify the installation process of the Android development environment.</p>
<p>The installation packages for <code>CodeWorks for Android</code> can be found in the following directory of the UE engine:</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UE_4.23_Source\Engine\Extras\AndroidWorks\Win64</span><br></pre></td></tr></table></figure>
<p>Additionally, you can download it from NVIDIA’s <a target="_blank" rel="noopener" href="https://developer.nvidia.com/gameworksdownload#?dn=codeworks-for-android-1r8">Download Center</a>.<br>Start the installation, select the <code>installation directory</code> and <code>download directory</code>:<br><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/30042/preinstall-nvidia-codeworks-for-android.webp"></p>
<p>After installation is complete, open the installation path (default in <code>C:\NVPACK\</code>), and start <code>Chooser.exe</code>:<br><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/30042/install-nvidia-codeworks-for-android.webp"></p>
<p>Select <code>Standard</code> and then click <code>Next</code> in the lower right corner to begin downloading and installing.<br>Given the poor network environment in China, some libraries may not be downloadable. I downloaded all the <code>Standard</code> components; the download link is: <a target="_blank" rel="noopener" href="https://stusdnueducn-my.sharepoint.com/:f:/g/personal/2017020625_stu_sdnu_edu_cn/ErTM0Ov4H6FOoCoPKb1IaLoBevJ1J_M3vRqwEFNSUtTGZQ?e=If69z7">CodeWorks_1R7</a>. After downloading, place it in the download directory selected during the <code>CodeWorks</code> installation, then restart <code>Chooser.exe</code>, click <code>Next</code>, and it will verify and install automatically.</p>
<blockquote>
<p>If you do not wish to install CodeWorks, you can only download the Android environment: <a target="_blank" rel="noopener" href="https://stusdnueducn-my.sharepoint.com/:u:/g/personal/2017020625_stu_sdnu_edu_cn/EbE_rZl0OVpOrfyNOZ9DlGsBX0q-AcZHGvKhCz9JwBS5RA?e=pTGgQf">NVPACK_1R7u1_20190923</a>, and then add the following environment variables to the system.</p>
</blockquote>
<p>After installation, the system will automatically add the following environment variables:</p>
<table>
<thead>
<tr>
<th>Environment var NAME</th>
<th>Value</th>
</tr>
</thead>
<tbody><tr>
<td>ANDROID_HOME</td>
<td>C:\NVPACK\android-sdk-windows</td>
</tr>
<tr>
<td>ANDROID_NDK_ROOT</td>
<td>C:\NVPACK\android-ndk-r14b</td>
</tr>
<tr>
<td>ANT_HOME</td>
<td>C:\NVPACK\apache-ant-1.8.2</td>
</tr>
<tr>
<td>GRADLE_HOME</td>
<td>C:\NVPACK\gradle-4.1</td>
</tr>
<tr>
<td>JAVA_HOME</td>
<td>C:\NVPACK\jdk1.8.0_77</td>
</tr>
<tr>
<td>NDK_ROOT</td>
<td>C:\NVPACK\android-ndk-r14b</td>
</tr>
<tr>
<td>NDKROOT</td>
<td>C:\NVPACK\android-ndk-r14b</td>
</tr>
<tr>
<td>NVPACK_NDK_TOOL_VERSION</td>
<td>4.9</td>
</tr>
<tr>
<td>NVPACK_NDK_VERSION</td>
<td>android-ndk-r14b</td>
</tr>
<tr>
<td>NVPACK_ROOT</td>
<td>D:\NVPACK</td>
</tr>
</tbody></table>
<p><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/30042/system-environment-variable.webp"><br>These environment variables are used in UE project settings under <code>Project Setting</code> - <code>Android SDK</code>.</p>
<blockquote>
<p>Note: It’s best to ensure that there are no special characters in the path of environment variables, pure numbers + letters are optimal.</p>
</blockquote>
<h3 id="Create-Quest-Project-with-UE4"><a href="#Create-Quest-Project-with-UE4" class="headerlink" title="Create Quest Project with UE4"></a>Create Quest Project with UE4</h3><p>First, launch Unreal Engine. I am using version UE_4.21.2 installed from EpicLauncher.<br>To facilitate testing, I created a VR Template project, ensuring that <code>Target</code> is set to <code>Mobile</code>:<br><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/30042/ue4-create-quest-project.webp"></p>
<ol start="0">
<li><p>After creating and launching the UE Editor, first check if the <code>Oculus VR</code> plugin is enabled.<br><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/30042/ue-editor-enable-oculus-vr-plugin.webp"></p>
</li>
<li><p>Open <code>Project Setting</code> - <code>Engine</code> - <code>Input</code> to confirm that <code>Mobile</code> - <code>Default Touch Interface</code> is set to <code>none</code>:<br><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/30042/ue4-project-setting-Engine-Input.webp"></p>
</li>
<li><p>Open <code>Project Setting</code> - <code>Engine</code> - <code>Rendering</code> to confirm that <code>Mobile HDR</code> is turned off:<br><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/30042/ue4-project-setting-engine-rending.webp"></p>
</li>
<li><p>Open <code>Project Setting</code> - <code>Platform</code> - <code>Android SDK</code><br><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/30042/ue4-project-setting-android-sdk.webp"><br>This is mainly to set the paths for the Android development environment, such as SDK/NDK/JDK. Refer to the prompt in the image; if not specified, it will search for environment variables with the specified NAME in the system. Since CodeWorks has already added these for us, this can be ignored. If you installed the environment yourself, you need to specify it here or add it directly to the system environment variables.</p>
</li>
<li><p>Open <code>Project Setting</code> - <code>Platform</code> - <code>Android</code><br><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/30042/ue4-project-setting-android.webp"><br>Execute <code>Configure Now</code> and <code>Accept SDK License</code> respectively.</p>
<blockquote>
<p>Note: If you do not execute <code>Accept SDK License</code>, you will encounter a <code>License not accepted</code> error during launch.</p>
</blockquote>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">License not accepted. SDK License must be accepted <span class="keyword">in</span> the Android project settings to deploy your app to the device.  </span><br></pre></td></tr></table></figure>
<p>Set <code>Minimum SDK Version</code> to <code>25</code>, and <code>Target SDK Version</code> to <code>26</code>.<br>Also, enable <code>Enable FullScreen Immersive on KitKat and above device</code>.<br><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/30042/ue4-setting-android-seted.webp"><br>Then scroll down to find <code>Advanced APK Packing</code> and enable the following two items:</p>
<ul>
<li><code>Configure the AndroidManifest for deployment to Oculus Mobile</code></li>
<li><code>Remove Oculus Signature File From Distribution APK</code></li>
</ul>
<p><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/30042/ue4-setting-android-remove-oculus-signature-and-configuration-androidManifest.webp"></p>
<ol start="5">
<li>Open <code>Project Setting</code> - <code>Project</code> - <code>Supported Platforms</code>, enable <code>Android</code>;</li>
<li>Change the <code>Editor Startup Map</code> and <code>Game Default Map</code> of the VR template project to <code>MotionControllerMap</code>;</li>
<li>Connect the Quest to the PC using a Type-C USB cable;</li>
<li>Close the Editor and restart the project;</li>
</ol>
<p>After restarting the project, you will find <code>Quest</code> under <code>Launch</code> in the editor toolbar:<br><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/30042/ue4-editor-launch-quest.webp"><br>Launch it to begin compiling and testing the current project on Quest (it will be automatically installed on Quest under <code>Unknown Source</code>).</p>
<p>If you encounter the <code>:app:assembleDebug</code> error during launch or packaging, simply turn off <code>Enable Gradle instead of Ant</code> under <code>Project Setting</code> - <code>Platform</code> - <code>Android</code>; if you need to use <code>Gradle</code>, check whether the path set in the <code>JAVA_HOME</code> environment variable contains any special characters, preferably only numbers + letters.<br><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/30042/ue4-package-android-error-assdebug.webp"></p>
<blockquote>
<p>If you want to use Vulkan, you will need to upgrade to UE 4.22.2 or higher.</p>
</blockquote>
<h3 id="Solve-Quest-Only-Tracking-One-Controller"><a href="#Solve-Quest-Only-Tracking-One-Controller" class="headerlink" title="Solve Quest Only Tracking One Controller"></a>Solve Quest Only Tracking One Controller</h3><p>After the first startup test showed that only one controller could be controlled in the game at the same time, and both controllers could not be used simultaneously. Initially thought it was a bug; however, after researching, it was found that this was because the packaging did not forcibly require 6DoF. For details, refer to the documentation: <a target="_blank" rel="noopener" href="https://developers.google.com/vr/develop/android/3dof-to-6dof">Enabling 6DoF head tracking</a>. By default, the project does not specify <code>3DoF</code> or <code>6DoF</code> and defaults to <code>3DoF</code>, which is why only one controller can be tracked.</p>
<p>The solution is to add the following in <code>Intermediate/Android/APK/AndroidManifest.xml</code>:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-feature</span></span></span><br><span class="line"><span class="tag"> <span class="attr">android:name</span>=<span class="string">&quot;android.hardware.vr.headtracking&quot;</span></span></span><br><span class="line"><span class="tag"> <span class="attr">android:version</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag"> <span class="attr">android:required</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>However, since <code>AndroidManifest.xml</code> is generated, directly modifying the file will be overwritten. Therefore, it should be added to project settings:<br><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/30042/ue4-project-setting-android-extra-permissions.webp"></p>
<p>According to the introduction, one can also edit in <code>Build/Android/ManifestRequirementsOverride.txt</code> (create it manually if it does not exist), it will <strong>replace</strong> the generated <code>AndroidManifest.xml</code> <code>Requirements</code> section. Therefore, you need to copy the section from the already generated <code>AndroidManifest.xml</code> and add the forced <code>6DoF</code> <code>user-feature</code> to save it in <code>Build/Android/ManifestRequirementsOverride.txt</code>:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Requirements --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-sdk</span> <span class="attr">android:minSdkVersion</span>=<span class="string">&quot;25&quot;</span> <span class="attr">android:targetSdkVersion</span>=<span class="string">&quot;25&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-feature</span> <span class="attr">android:name</span>=<span class="string">&quot;android.hardware.vr.headtracking&quot;</span> <span class="attr">android:version</span>=<span class="string">&quot;1&quot;</span> <span class="attr">android:required</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-feature</span> <span class="attr">android:name</span>=<span class="string">&quot;android.hardware.vr.headtracking&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-feature</span> <span class="attr">android:glEsVersion</span>=<span class="string">&quot;0x00020000&quot;</span> <span class="attr">android:required</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.INTERNET&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.ACCESS_NETWORK_STATE&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.WAKE_LOCK&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;com.android.vending.CHECK_LICENSE&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.ACCESS_WIFI_STATE&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Supported texture compression formats (cooked) --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">supports-gl-texture</span> <span class="attr">android:name</span>=<span class="string">&quot;GL_KHR_texture_compression_astc_ldr&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.READ_EXTERNAL_STORAGE&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-feature</span> <span class="attr">android:name</span>=<span class="string">&quot;android.hardware.usb.host&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>Run or package again.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=SCl75YIUyAU">How to Fix Only One Controller Tracking on Oculus Quest (after the v7 update - using UE 4.22)</a></li>
</ul>
<h3 id="Package-and-Install"><a href="#Package-and-Install" class="headerlink" title="Package and Install"></a>Package and Install</h3><p>When packaging Android programs in UE, several different selectable Texture formats are available to target different hardware using different formats for compressed textures:<br><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/30042/ue4-package-android-texture-format.webp"></p>
<blockquote>
<p>Not all Android devices are made the same. In particular, there are 4 different kinds of rendering hardware. They each support different formats of compressed textures.</p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">Format</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>ETC1</strong></td>
<td>Supported by all Android based devices but cannot compress alpha textures (they are stored uncompressed). Recommend using an RGB and a separate alpha texture if need alpha to get better compression.</td>
</tr>
<tr>
<td align="center"><strong>ETC2</strong></td>
<td>Supported by all OpenGL 3.x class devices and supports alpha compression.</td>
</tr>
<tr>
<td align="center"><strong>ATC</strong></td>
<td>Supported by Qualcomm Adreno GPUs and supports alpha compression.</td>
</tr>
<tr>
<td align="center"><strong>DXT</strong></td>
<td>Supported by Nvidia Tegra GPUs and supports alpha compression.</td>
</tr>
<tr>
<td align="center"><strong>PVRTC</strong></td>
<td>supported by PowerVR GPUs and supports alpha compression.</td>
</tr>
<tr>
<td align="center"><strong>ASTC</strong></td>
<td>Latest Texture compression format allowing more quality control by specifying block size and supports alpha compression. Available on some devices at this point and will be required for Vulkan Level 1.</td>
</tr>
</tbody></table>
<p>For detailed documentation on UE: <a target="_blank" rel="noopener" href="https://docs.unrealengine.com/en-US/Platforms/Mobile/Android/Reference/index.html">Android Development Reference</a></p>
<p>Since Quest uses the <strong>Qualcomm Snapdragon 835</strong>, you can select <code>ATC</code> when packaging.</p>
<p>After packaging is completed, you will find the following files in the <code>Binaries/Android</code> directory:</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">+---Binaries</span><br><span class="line">|   \---Android</span><br><span class="line">|           Install_QuestTemp-armv7-es2.bat</span><br><span class="line">|           main.1.com.imzlp.QuestTemp.obb</span><br><span class="line">|           QuestTemp-armv7-es2.apk</span><br><span class="line">|           Uninstall_QuestTemp-armv7-es2.bat</span><br></pre></td></tr></table></figure>

<p>The <code>apk</code> and <code>obb</code> files are the packaged game program and data pack.<br>You can use <code>adb</code> commands to install the apk and copy the obb data package.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">adb install QuestTemp-armv7-es2.apk</span><br><span class="line">20002 KB/s (47579881 bytes <span class="keyword">in</span> 2.322s)</span><br><span class="line">Success</span><br></pre></td></tr></table></figure>

<p>Then, copy the data pack to <code>/sdcard/Android/obb/com.imzlp.QuestTemp/</code>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb push main.1.com.imzlp.QuestTemp.obb /sdcard/Android/obb/com.imzlp.QuestTemp/main.1.com.imzlp.QuestTemp.obb</span><br></pre></td></tr></table></figure>

<blockquote>
<p>You can also directly execute <code>Install_QuestTemp-armv7-es2.bat</code>, which contains these few commands.</p>
</blockquote>
<h3 id="VR-Template-Video"><a href="#VR-Template-Video" class="headerlink" title="VR Template Video"></a>VR Template Video</h3><p>I recorded a simple video of this VR Template running on Quest: <a target="_blank" rel="noopener" href="https://youtu.be/BbS-6PywD-g">Oculus Quest Template</a>, showcasing quite stable positioning.</p>
<div class="video-container"><iframe src="https://www.youtube.com/embed/BbS-6PywD-g" frameborder="0" loading="lazy" allowfullscreen></iframe></div>

<h3 id="PC-View"><a href="#PC-View" class="headerlink" title="PC View"></a>PC View</h3><p>Unlike PC VR, where the VR view can be displayed directly on the PC monitor during testing, to view Quest’s perspective on the PC in real-time aside from screen mirroring, the open-source tool <a target="_blank" rel="noopener" href="https://github.com/Genymobile/scrcpy">scrcpy</a> can be used. It is specifically designed for displaying and controlling Android devices. I often use it to control my phone; it requires a data cable to connect the device and uses adb to connect. <a target="_blank" rel="noopener" href="https://github.com/Genymobile/scrcpy">scrcpy</a> shows the dual-eye view when used with Quest:<br><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/30042/scrpcy-quest-view.webp"></p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/30042/scrpcy-quest-view-2.webp"></p>
<h3 id="Debug-and-Performance"><a href="#Debug-and-Performance" class="headerlink" title="Debug and Performance"></a>Debug and Performance</h3><p>How can we check the parameters of the programs running on Quest, such as frame rate and system load?<br>You can use Android’s debugging tools <code>adb</code> and <code>logcat</code> commands to check: <a target="_blank" rel="noopener" href="https://developer.oculus.com/documentation/mobilesdk/latest/concepts/book-anddebug/">Android Debugging</a>, as well as the parameters supported by <code>logcat</code>: <a target="_blank" rel="noopener" href="https://developer.android.com/studio/command-line/logcat?hl=zh-cn">Logcat Command Line Tool</a>.</p>
<p>First, connect the Quest to the PC using USB, start the game, then enter the following command in the cmd window:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb logcat -s VrApi</span><br></pre></td></tr></table></figure>
<p>You will see a lot of outputs:</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\visionsmile&gt;adb logcat -s VrApi</span><br><span class="line">--------- beginning of system</span><br><span class="line">--------- beginning of main</span><br><span class="line">09-28 23:00:12.250 18371 18386 D VrApi   : targetSDKVersion 25</span><br><span class="line">09-28 23:00:12.256 18371 18386 I VrApi   : DEVICE MODEL NUMBER = Quest</span><br><span class="line">09-28 23:00:12.256 18371 18386 I VrApi   : DEVICE HARDWARE = monterey</span><br><span class="line">09-28 23:00:12.256 18371 18386 I VrApi   : DEVICE BUILD NAME = user-358570.9320.0</span><br><span class="line">09-28 23:00:12.256 18371 18386 I VrApi   : DEVICE BUILD TYPE = user</span><br><span class="line">09-28 23:00:12.256 18371 18386 I VrApi   : DEVICE OS VERSION = 7.1.1</span><br><span class="line">09-28 23:00:12.256 18371 18386 I VrApi   : VRAPI VERSION = 1.1.25.0-171385671-171385671 Sep  7 2019 04:35:06 Development RELEASE</span><br><span class="line">09-28 23:00:12.256 18371 18386 I VrApi   : VRAPI LOADER VERSION = 1.1.16.0</span><br><span class="line">09-28 23:00:12.256 18371 18386 I VrApi   : VRDRIVER VERSION = 8.0.0.148.626</span><br><span class="line">09-28 23:00:12.256 18371 18386 I VrApi   : APP NAME = QuestTemp</span><br><span class="line">09-28 23:00:12.256 18371 18386 I VrApi   : APP VERSION = 1.0 versionCode 1 internalVersionName &lt;none&gt;</span><br><span class="line">09-28 23:00:12.256 18371 18386 I VrApi   : APP VR TYPE = vr_only</span><br><span class="line">09-28 23:00:12.256 18371 18386 I VrApi   : APP PACKAGE NAME = com.imzlp.QuestTemp</span><br><span class="line">09-28 23:00:12.256 18371 18386 I VrApi   : APP ACTIVITY CLASS = com.epicgames.ue4.GameActivity</span><br><span class="line">09-28 23:00:12.256 18371 18386 I VrApi   : ovrModeParms::VRAPI_MODE_FLAG_ALLOW_POWER_SAVE = 1</span><br><span class="line">09-28 23:00:12.256 18371 18386 I VrApi   : ovrModeParms::VRAPI_MODE_FLAG_RESET_WINDOW_FULLSCREEN = 1</span><br><span class="line">09-28 23:00:12.256 18371 18386 I VrApi   : ovrModeParms::VRAPI_MODE_FLAG_NATIVE_WINDOW = 1</span><br><span class="line">09-28 23:00:12.256 18371 18386 I VrApi   : ovrModeParms::VRAPI_MODE_FLAG_FRONT_BUFFER_PROTECTED = 0</span><br><span class="line">09-28 23:00:12.256 18371 18386 I VrApi   : ovrModeParms::VRAPI_MODE_FLAG_FRONT_BUFFER_565 = 0</span><br><span class="line">09-28 23:00:12.256 18371 18386 I VrApi   : ovrModeParms::VRAPI_MODE_FLAG_FRONT_BUFFER_SRGB = 0</span><br><span class="line">09-28 23:00:12.256 18371 18386 I VrApi   : ovrModeParms::VRAPI_MODE_FLAG_CREATE_CONTEXT_NO_ERROR = 0</span><br><span class="line">09-28 23:00:12.256 18371 18386 I VrApi   : HMD sensor attached.</span><br><span class="line">09-28 23:00:12.264 18371 18386 I VrApi   : Client side frame sync enabled</span><br><span class="line">09-28 23:00:12.276 18371 18386 I VrApi   : OVR::Stats thread started</span><br><span class="line">09-28 23:00:12.287 18371 18386 I VrApi   : System brightness = 255</span><br><span class="line">09-28 23:00:12.295 18371 18519 D VrApi   : targetSDKVersion 25</span><br><span class="line">09-28 23:00:12.300 18371 18386 I VrApi   : Set brightness to 255</span><br><span class="line">09-28 23:00:12.303 18371 18386 I VrApi   : Set DND mode to true</span><br><span class="line">09-28 23:00:12.329 18371 18386 I VrApi   : System DND mode = true</span><br><span class="line">09-28 23:00:12.329 18371 18386 I VrApi   : ---------- vrapi_EnterVrMode [end] ----------</span><br><span class="line">09-28 23:00:12.365 18371 18520 I VrApi   : ovr_HandleHmdEvents: HMT was mounted</span><br><span class="line">09-28 23:00:13.532 18371 18519 I VrApi   : FPS=23,Prd=47ms,Tear=0,Early=0,Stale=1,VSnc=1,Lat=1,Fov=0,CPU4/GPU=3/3,1958/515MHz,OC=FF,TA=0/E0/E0,SP=N/F/F,Mem=1804MHz,Free=1588MB,PSM=0,PLS=0,Temp=28.0C/0.0C,TW=3.40ms,App=10.26ms,GD=3.30ms,CPU&amp;GPU=9.47ms,LCnt=1,GPU%=0.62,CPU%=0.29(W0.33)</span><br><span class="line">09-28 23:00:14.341 18371 18519 I VrApi   : FPS=72,Prd=45ms,Tear=1,Early=62,Stale=10,VSnc=1,Lat=1,Fov=0,CPU4/GPU=3/3,1958/515MHz,OC=FF,TA=0/E0/E0,SP=N/F/F,Mem=1804MHz,Free=1592MB,PSM=0,PLS=0,Temp=28.0C/0.0C,TW=3.75ms,App=8.58ms,GD=0.00ms,CPU&amp;GPU=9.06ms,LCnt=1,GPU%=0.76,CPU%=0.27(W0.32)</span><br><span class="line">09-28 23:00:15.341 18371 18519 I VrApi   : FPS=72,Prd=45ms,Tear=0,Early=69,Stale=0,VSnc=1,Lat=1,Fov=0,CPU4/GPU=2/3,1651/515MHz,OC=FF,TA=0/E0/E0,SP=N/F/F,Mem=1804MHz,Free=1593MB,PSM=0,PLS=0,Temp=28.0C/0.0C,TW=2.96ms,App=9.17ms,GD=0.65ms,CPU&amp;GPU=9.24ms,LCnt=1,GPU%=0.77,CPU%=0.27(W0.33)</span><br></pre></td></tr></table></figure>
<p>You can see the outputs from <code>VrApi</code>:</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FPS=72,Prd=45ms,Tear=0,Early=69,Stale=0,VSnc=1,Lat=1,Fov=0,CPU4/GPU=2/3,1651/515MHz,OC=FF,TA=0/E0/E0,SP=N/F/F,Mem=1804MHz,Free=1593MB,PSM=0,PLS=0,Temp=28.0C/0.0C,TW=2.96ms,App=9.17ms,GD=0.65ms,CPU&amp;GPU=9.24ms,LCnt=1,GPU%=0.77,CPU%=0.27(W0.33)</span><br></pre></td></tr></table></figure>
<p>These parameters represent various metrics when running the game on Quest.<br>The meanings of these parameters can be found in the Oculus Quest documentation:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.oculus.com/documentation/mobilesdk/latest/concepts/mobile-logcat-perf-stats/">Basic Performance Stats through Logcat</a></li>
</ul>
<h3 id="Capture-video-for-Quest"><a href="#Capture-video-for-Quest" class="headerlink" title="Capture video for Quest"></a>Capture video for Quest</h3><p>Oculus’s CTO is a legendary figure in the game development world—<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/zh-hans/%E7%B4%84%E7%BF%B0%C2%B7%E5%8D%A1%E9%A6%AC%E5%85%8B">John Carmack</a>, who recently (on 2019.10.18) mentioned a method for capturing full-frame video at 60/72 fps on Go/Quest:</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://twitter.com/ID_AA_Carmack/status/1184970761410351105">twitter link</a>: If you want to capture full 60/72 fps video on Go/Quest instead of half rate, you can ‘adb shell setprop debug.oculus.fullRateCapture 1’.</p>
</blockquote>
<p>Use the adb command:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ adb shell setprop debug.oculus.fullRateCapture 1</span><br></pre></td></tr></table></figure>

<h3 id="Documents-and-Tutorial"><a href="#Documents-and-Tutorial" class="headerlink" title="Documents and Tutorial"></a>Documents and Tutorial</h3><p>Development documentation for Oculus Quest:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.oculus.com/documentation/quest/latest/concepts/unreal-engine/">Oculus Quest - Unreal</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.oculus.com/documentation/mobilesdk/latest/concepts/book-perfanalysis/">Application Performance Analysis</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.oculus.com/distribute/latest/concepts/publish-quest-req/">Quest Virtual Reality Check (VRC) Guidelines</a></li>
</ul>
<p>UE’s Android development documentation:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://docs.unrealengine.com/en-US/Platforms/Mobile/Android/Reference/index.html">Android Development Reference</a></li>
</ul>
<p>Video tutorials:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=hEtu-ciPc7g">Using UE4 to Develop for Oculus Rift and Oculus Quest | Unreal Fest Europe 2019 | Unreal Engine</a></li>
<li><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=jlcj4HB9LX8">How to Build for Oculus Quest using Unreal Engine</a></li>
<li><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=SCl75YIUyAU">How to Fix Only One Controller Tracking on Oculus Quest (after the v7 update - using UE 4.22)</a></li>
<li><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=N7UfYFq2Xq4">Oculus Quest Performance Profiling and Performance Optimization</a></li>
</ul>
<h3 id="Assets-Download"><a href="#Assets-Download" class="headerlink" title="Assets Download"></a>Assets Download</h3><p>All resources mentioned in this article:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://stusdnueducn-my.sharepoint.com/:f:/g/personal/2017020625_stu_sdnu_edu_cn/ErTM0Ov4H6FOoCoPKb1IaLoBevJ1J_M3vRqwEFNSUtTGZQ?e=If69z7">CodeWorks_1R7</a></li>
<li><a target="_blank" rel="noopener" href="https://stusdnueducn-my.sharepoint.com/:u:/g/personal/2017020625_stu_sdnu_edu_cn/EbE_rZl0OVpOrfyNOZ9DlGsBX0q-AcZHGvKhCz9JwBS5RA?e=pTGgQf">NVPACK_1R7u1_20190923</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/the-expanse/SideQuest/releases">SideQuest</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/Genymobile/scrcpy">scrcpy</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/hxhb/oculus-quest-template">Oculus Quest VR Template Project: QuestTemp</a></li>
<li>Packaged QuestTemp: <a target="_blank" rel="noopener" href="https://stusdnueducn-my.sharepoint.com/:u:/g/personal/2017020625_stu_sdnu_edu_cn/ERiJmF8KLLBJuKQ8yLKswUgBk2_oChRqC_nEvH-A31_Xug?e=J6fdGx">QuestTemp-armv7-es2.7z</a></li>
</ul>
<h3 id="Other"><a href="#Other" class="headerlink" title="Other"></a>Other</h3><p><strong>Not-PC based VR</strong>:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://developers.google.com/vr">Google VR</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.oculus.com/quest/">Oculus Quest</a></li>
</ul>

    </div>

    
    
        
        
          
            <blockquote class="blockquote-center">
              
                The article is finished. If you have any questions, please comment and communicate.
              
            <br/>
            
                <div class="qr-code" onclick="return false">
                    <script src="/js/qrcode.min.js"></script>
                    <div id="qrcode">
                      
                        <img src="https://imzlp.com/images/wechat-qrcode.webp">
                      
                    <p>Scan the QR code on WeChat and follow me.</p>
                    </div>
                </div>
            
            </blockquote>
          
        

        
          <div class="postCopyright" style="clear:both;">
             <span>Title:</span><a href="/posts/30042/" target="_blank">Oculus Quest Development with UE4</a><br/>
             <span>Author:</span><a href="/about" target="_blank" title="查看 LIPENGZHA 的资料">LIPENGZHA</a><br/>
             <span>Publish Date:</span>2019/09/24 10:41<br/>
             
              <span>Update Date:</span>2020/09/17 21:31<br/>
             
             <span>Word Count:</span><span class="page-count">11k Words</span><br/>
             
             <span>Link:</span><a href="/posts/30042/" target="_blank" title="Oculus Quest Development with UE4">https://en.imzlp.com/posts/30042/</a>
             <span class="copy-path" data-clipboard-text="Link: https://en.imzlp.com/posts/30042/ Author: LIPENGZHA" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
             <script src="/js/jquery.min.js"></script>
             <script src="/js/clipboard.min.js"></script>
             <script> var clipboard = new Clipboard('.copy-path'); </script>
             <br/>
             
             <span>License:</span><i class="fab fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" title="Attribution-NonCommercial-ShareAlike 4.0 International">CC BY-NC-SA 4.0</a><br/>
             
             <span>Reprinting of the full article is prohibited.</span>
          </div>
        
    

        
  <div class="reward-container">
    <div>Your donation will encourage me to keep creating!</div>
    <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
      Donate
    </button>
    <div id="qr" style="display: none;">
        
        <div style="display: inline-block;">
          <img src="/images/reward/wechatpay.webp" alt="LIPENGZHA WeChat Pay">
          <p>WeChat Pay</p>
        </div>

    </div>
  </div>



      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/UnrealEngine/" rel="tag"># UnrealEngine</a>
              <a href="/tags/VR/" rel="tag"># VR</a>
              <a href="/tags/OculusQuest/" rel="tag"># OculusQuest</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/posts/20203/" rel="prev" title="Export Recast Navigation Data from UE4">
      <i class="fa fa-chevron-left"></i> Export Recast Navigation Data from UE4
    </a></div>
      <div class="post-nav-item">
    <a href="/posts/16643/" rel="next" title="UE Build System：Target and Module">
      UE Build System：Target and Module <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
      <div class="tabs tabs-comment">
        <ul class="nav-tabs">
            <li class="tab"><a href="#comment-utteranc">utteranc</a></li>
            <li class="tab"><a href="#comment-valine">valine</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane utteranc" id="comment-utteranc">
              
  
  <div class="comments">
  <script src="https://utteranc.es/client.js" repo="hxhb/blog-comments" issue-term="pathname" theme="github-light" crossorigin="anonymous" async></script>
  </div>
  
  
            </div>
            <div class="tab-pane valine" id="comment-valine">
              <div class="comments" id="valine-comments"></div>
            </div>
        </div>
      </div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#Oculus-Developer-Mode"><span class="nav-number">1.</span> <span class="nav-text">Oculus Developer Mode</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NVIDIA-CodeWorks-for-Android"><span class="nav-number">2.</span> <span class="nav-text">NVIDIA CodeWorks for Android</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Create-Quest-Project-with-UE4"><span class="nav-number">3.</span> <span class="nav-text">Create Quest Project with UE4</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Solve-Quest-Only-Tracking-One-Controller"><span class="nav-number">4.</span> <span class="nav-text">Solve Quest Only Tracking One Controller</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Package-and-Install"><span class="nav-number">5.</span> <span class="nav-text">Package and Install</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#VR-Template-Video"><span class="nav-number">6.</span> <span class="nav-text">VR Template Video</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#PC-View"><span class="nav-number">7.</span> <span class="nav-text">PC View</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Debug-and-Performance"><span class="nav-number">8.</span> <span class="nav-text">Debug and Performance</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Capture-video-for-Quest"><span class="nav-number">9.</span> <span class="nav-text">Capture video for Quest</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Documents-and-Tutorial"><span class="nav-number">10.</span> <span class="nav-text">Documents and Tutorial</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Assets-Download"><span class="nav-number">11.</span> <span class="nav-text">Assets Download</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Other"><span class="nav-number">12.</span> <span class="nav-text">Other</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person" oncontextmenu="return false" οndragstart="return false">
    <img class="site-author-image" itemprop="image" alt="LIPENGZHA"
      src="https://img.imzlp.com/imgs/zlp/picgo/2023/202304152112902.webp">
  <p class="site-author-name" itemprop="name">LIPENGZHA</p>
  <div class="site-description" itemprop="description">"I think, therefore I am"</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
             
          <span class="site-state-item-count">190</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">95</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">190</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/hxhb" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;hxhb" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://linkedin.com/in/lipengzha" title="Linkedin → https:&#x2F;&#x2F;linkedin.com&#x2F;in&#x2F;lipengzha" rel="noopener" target="_blank"><i class="fab fa-linkedin fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.zhihu.com/people/imzlp" title="知乎 → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;imzlp" rel="noopener" target="_blank"><i class="fa fa-custom zhihu fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="/images/wechat-qrcode-offical.webp" title="微信公众号 → &#x2F;images&#x2F;wechat-qrcode-offical.webp"><i class="fab fa-weixin fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:imzlp@foxmail.com" title="E-Mail → mailto:imzlp@foxmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fa fa-rss fa-fw"></i></a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://consolehelp.imzlp.com/" title="https:&#x2F;&#x2F;consolehelp.imzlp.com&#x2F;" rel="noopener" target="_blank">UE Console Help</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://imzlp.com/opensource/" title="https:&#x2F;&#x2F;imzlp.com&#x2F;opensource&#x2F;" rel="noopener" target="_blank">Open Source Projects</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://imzlp.com/posts/11515/" title="https:&#x2F;&#x2F;imzlp.com&#x2F;posts&#x2F;11515&#x2F;" rel="noopener" target="_blank">UE C++ API Dash Documents</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://ue5wiki.com/" title="https:&#x2F;&#x2F;ue5wiki.com&#x2F;" rel="noopener" target="_blank">Unreal Engine Wiki</a>
        </li>
    </ul>
  </div>

      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2014 – 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">LIPENGZHA</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="Symbols count total">1.5m</span>
</div>
  <div class="powered-by-other">
    
	    <center>Github Pages | Actions | NeXT | Cloudflare | Hexo Deploy</center>
      
  </div>

<script>
function checkWebp(callback) {
    var img = new Image();
    img.onload = function () { callback((img.width > 0) && (img.height > 0)); };
    img.onerror = function () { callback(false); };
    img.src = 'data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA';
}
function showImage(useWebp) {
    var imgs = [].slice.call(document.querySelectorAll('img'));
    imgs.forEach(function (e) {
        if (!useWebp) {
            var src = e.getAttribute('data-src')
            src = src.replace(/\.webp$/, '.png');
            e.setAttribute('data-src', src);
        }
    });
}
checkWebp(showImage);
</script>

        








      </div>
    </footer>
  </div>

  
  <script src="//lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/animejs/3.2.1/anime.min.js"></script>
  <script src="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/jquery/3.5.1/jquery.min.js"></script>
  <script src="//lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/fancybox/3.5.7/jquery.fancybox.min.js"></script>
  <script src="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/lozad.js/1.16.0/lozad.min.js"></script>
  <script src="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/pangu/4.0.7/pangu.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>



<script src="/js/code-unfold.js"></script>

  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>




  
<script src="/js/local-search.js"></script>









<script>
document.querySelectorAll('.pdfobject-container').forEach(element => {
  let url = element.dataset.target;
  let pdfOpenParams = {
    navpanes : 0,
    toolbar  : 0,
    statusbar: 0,
    pagemode : 'thumbs',
    view     : 'FitH'
  };
  let pdfOpenFragment = '#' + Object.entries(pdfOpenParams).map(([key, value]) => `${key}=${encodeURIComponent(value)}`).join('&');
  let fullURL = `/lib/pdf/web/viewer.html?file=${encodeURIComponent(url)}${pdfOpenFragment}`;

  if (NexT.utils.supportsPDFs()) {
    element.innerHTML = `<embed class="pdfobject" src="${url + pdfOpenFragment}" type="application/pdf" style="height: ${element.dataset.height};">`;
  } else {
    element.innerHTML = `<iframe src="${fullURL}" style="height: ${element.dataset.height};" frameborder="0"></iframe>`;
  }
});
</script>


<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  

  
  <script src="//img.imzlp.com/imgs/zlp/picgo/2021/quicklink.umd.js"></script>
  <script>
      window.addEventListener('load', () => {
      quicklink({
        timeout : 3000,
        priority: true,
        ignores : [uri => uri.includes('#'),uri => uri === 'https://en.imzlp.com/posts/30042/',]
      });
      });
  </script>


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/valine/1.4.14/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    var requiredFields = 'nick';
    requiredFields = requiredFields.split(',');
    
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'oCE6RMVkVoi5MgUhvFsn1EvV-gzGzoHsz',
      appKey     : 'K9SOaNYJ8PV6xaoFggWG5xvv',
      placeholder: "Leave something behind~",
      avatar     : 'robohash',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : 'en' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : '',
      requiredFields: requiredFields
    });
  }, window.Valine);
});
</script>

</body>
</html>
