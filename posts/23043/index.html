<!DOCTYPE html>
<html lang="en,default">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon-32x32-tilt-brush.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-tilt-brush.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-tilt-brush.png">
  <link rel="mask-icon" href="/images/favicon-32x32-tilt-brush.png" color="#222">
  <meta name="google-site-verification" content="ttIkhAIFZQM9Huj8roB0l95ePN2Tv2zv2wRFksi09WA">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noto Serif SC:300,300italic,400,400italic,700,700italic|Pacifico:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Roboto Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="//lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/5.15.2/css/all.min.css">
  <link rel="stylesheet" href="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/fancybox/3.5.7/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"en.imzlp.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false,"width":280},"copycode":{"enable":true,"show_result":true,"style":"flat"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"manual"},"fancybox":true,"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":false,"nav":null,"activeClass":"valine"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"code_unfold":{"enable":true,"CODE_MAX_HEIGHT":600},"path":"search.xml"};
  </script>

  <meta name="description" content="This article mainly summarizes my insights during the learning process of template metaprogramming, and I will also include some template metaprogramming code I have written here.">
<meta property="og:type" content="article">
<meta property="og:title" content="C++ Template Metaprogramming Data Collection">
<meta property="og:url" content="https://en.imzlp.com/posts/23043/index.html">
<meta property="og:site_name" content="Z&#39;s Blog">
<meta property="og:description" content="This article mainly summarizes my insights during the learning process of template metaprogramming, and I will also include some template metaprogramming code I have written here.">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2017-06-17T23:21:33.000Z">
<meta property="article:modified_time" content="2017-06-17T23:21:33.000Z">
<meta property="article:author" content="LIPENGZHA">
<meta property="article:tag" content="C++">
<meta property="article:tag" content="模板元编程">
<meta property="article:tag" content="Template">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://en.imzlp.com/posts/23043/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>C++ Template Metaprogramming Data Collection | Z's Blog</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-FDCJ41EFP5"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-FDCJ41EFP5');
      }
    </script>






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.staticfile.org/lxgw-wenkai-screen-webfont/1.7.0/style.min.css" /><!-- hexo injector head_end end --><link rel="alternate" href="/atom.xml" title="Z's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Z's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        
            
  <li class="menu-item menu-item-notes">

    <a href="/notes/" rel="section"><i class="fa fa-edit fa-fw"></i>Notes</a>

  </li>


      
        
            
  <li class="menu-item menu-item-essay">

    <a href="/essay/" rel="section"><i class="fas fa-feather-alt fa-fw"></i>Essay</a>

  </li>


      
        
            
  <li class="menu-item menu-item-resources">

    <a href="/resources/" rel="section"><i class="fa fa-inbox fa-fw"></i>Resources</a>

  </li>


      
        <li class="menu-item menu-item-friends">

    <a href="/friends/" rel="section"><i class="fas fa-link fa-fw"></i>Friends</a>

  </li>
        
            
  <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About Me</a>

  </li>


      
        <li class="menu-item menu-item-showcase">

    <a href="/showcase/" rel="section"><i class="fa fa-solid fa-trophy fa-fw"></i>ShowCase</a>

  </li>
        <li class="menu-item menu-item-changelog">

    <a href="/changelog/" rel="section"><i class="fa fa-history fa-fw"></i>Site Log</a>

  </li>
        <li class="menu-item menu-item-opensource">

    <a href="/opensource/" rel="section"><i class="fas fa-code-branch fa-fw"></i>Open Source</a>

  </li>
        <li class="menu-item menu-item-uewiki">

    <a href="https://ue5wiki.com/" rel="noopener" target="_blank"><i class="fab fa-wikipedia-w fa-fw"></i>Unreal Wiki</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>



<script type="text/javascript">
  let domain='en.imzlp.com';
  let domain_str = atob(domain);
  let pathname = location.pathname;
  if (domain_str!= location.host.toLowerCase()){
        console.log(`this host is not safe,jump to https://${domain_str}${pathname}`);
        location.href=`https://${domain_str}${pathname}`;
  }
</script>

</div>
    </header>

    
  <div class="reading-progress-bar"></div>
  <div class="l10n-header-widget">
    <script>
      // 获取当前页面的 URL
      const currentUrl = window.location.href;
      // 替换 URL 中的部分内容
      const jumpToL10nLink = currentUrl.replace('en.imzlp.com', 'imzlp.com');
      // 将 jumpToL10nLink 绑定到一个全局变量
      window.jumpToL10nLink = jumpToL10nLink;
    </script>

    <a href="#" class="post-l10n-link" title="切换至中文版本" style="float: left;border-bottom: none;" rel="noopener" target="_blank" onclick="window.open(window.jumpToL10nLink, '_blank'); return false;">
      <i class="fa fa-solid fa-language"></i>
    </a>
  </div>



    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en"
  >
    <link itemprop="mainEntityOfPage" href="https://en.imzlp.com/posts/23043/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://img.imzlp.com/imgs/zlp/picgo/2023/202304152112902.webp">
      <meta itemprop="name" content="LIPENGZHA">
      <meta itemprop="description" content=""I think, therefore I am"">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Z's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          C++ Template Metaprogramming Data Collection<a href="https://github.com/imzlp/blog-md/blob/en/_posts/2017-06-17-23043.md" class="post-edit-link" title="Edit this post" style="float: right;border-bottom: 0px;" rel="noopener" target="_blank"><i class="fa fa-pen-nib"></i></a><a href="https://imzlp.com/posts/23043/" class="post-l10n-link" title="切换至中文版本" style="float: left;border-bottom: 0px;" rel="noopener" target="_blank"><i class="fa fa-solid fa-language"></i></a>
        </h1>

        
          <div class="post-subtitle" style="text-align: center;line-height: 1;">
            <sub text-align="center" style="font-size: 15px;align-content: center;font-style: italic;bottom: 0em;">C++模板元编程资料辑录</sub>
          </div>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-06-17 23:21 23:21:33:21" itemprop="dateCreated datePublished" datetime="2017-06-17T23:21:33+00:00">2017-06-17 23:21</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">技术笔记</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/C/" itemprop="url" rel="index"><span itemprop="name">C++</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/C/%E6%A8%A1%E6%9D%BF%E5%85%83%E7%BC%96%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">模板元编程</span></a>
                </span>
            </span>

          
            <span id="/posts/23043/" class="post-meta-item leancloud_visitors" data-flag-title="C++ Template Metaprogramming Data Collection" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>7.3k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>18 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>This article mainly summarizes my insights during the learning process of template metaprogramming, and I will also include some template metaprogramming code I have written here.</p>
<span id="more"></span>

<h2 id="Template-Code"><a href="#Template-Code" class="headerlink" title="Template Code"></a>Template Code</h2><h3 id="Template-Metaprogramming-for-Base-Conversion"><a href="#Template-Metaprogramming-for-Base-Conversion" class="headerlink" title="Template Metaprogramming for Base Conversion"></a>Template Metaprogramming for Base Conversion</h3><p>Implemented a template metaprogram version to convert from decimal to base 2~10:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="type">int</span> N,<span class="type">int</span> Z&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Convert</span>&#123;</span><br><span class="line">  <span class="keyword">enum</span>:<span class="type">size_t</span>&#123;</span><br><span class="line">    resault=(N&lt;Z)?N:(<span class="number">10</span>*Convert&lt;N/Z,Z&gt;::resault+N%Z)</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="type">int</span> Z&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Convert</span>&lt;<span class="number">0</span>,Z&gt;&#123;<span class="keyword">enum</span>:<span class="type">size_t</span>&#123;resault=<span class="number">0</span>&#125;;&#125;;</span><br></pre></td></tr></table></figure>
<p>You can use it like this:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,Convert&lt;<span class="number">12345</span>,<span class="number">2</span>&gt;::resault);</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,Convert&lt;<span class="number">12345</span>,<span class="number">8</span>&gt;::resault);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The range of parameters received cannot exceed <code>size_t</code>.</p>
<p>Looking at the IR code of the above main function, you can see that there is no runtime overhead.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">define i32 @<span class="built_in">main</span>() #<span class="number">4</span> &#123;</span><br><span class="line">  %<span class="number">1</span> = call <span class="built_in">i32</span> (i8*, ...) @_ZL6printfPKcz(i8* getelementptr <span class="built_in">inbounds</span> ([<span class="number">4</span> x i8], [<span class="number">4</span> x i8]* @.str, i32 <span class="number">0</span>, i32 <span class="number">0</span>), i64 <span class="number">11000000111001</span>)</span><br><span class="line">  %<span class="number">2</span> = call <span class="built_in">i32</span> (i8*, ...) @_ZL6printfPKcz(i8* getelementptr <span class="built_in">inbounds</span> ([<span class="number">4</span> x i8], [<span class="number">4</span> x i8]* @.str, i32 <span class="number">0</span>, i32 <span class="number">0</span>), i64 <span class="number">30071</span>)</span><br><span class="line">  ret i32 <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Additionally, here is a template metaprogram version for integer power:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="type">int</span> N,<span class="type">int</span> Z&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">mtpow</span>&#123;</span><br><span class="line">  <span class="keyword">enum</span>:<span class="type">size_t</span>&#123;</span><br><span class="line">    resault=N*mtpow&lt;N,Z<span class="number">-1</span>&gt;::resault</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="type">int</span> N&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">mtpow</span>&lt;N,<span class="number">1</span>&gt;&#123;</span><br><span class="line">  <span class="keyword">enum</span>:<span class="type">size_t</span>&#123;</span><br><span class="line">    resault=N</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,mtpow&lt;<span class="number">3</span>,<span class="number">2</span>&gt;::resault);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Template-Metaprogramming-for-Fibonacci-Sequence"><a href="#Template-Metaprogramming-for-Fibonacci-Sequence" class="headerlink" title="Template Metaprogramming for Fibonacci Sequence"></a>Template Metaprogramming for Fibonacci Sequence</h3><p>There is no need to elaborate on what the <a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91%E6%95%B0%E5%88%97">Fibonacci sequence</a> is. Today, I couldn’t sleep during lunch break, so I whipped up a template metaprogram version that calculates the Nth term of the Fibonacci sequence and the sum of the first N terms with zero runtime overhead.<br>Without further ado, here is the code:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="type">int</span> N&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">FibonacciN</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">enum</span>:<span class="type">size_t</span>&#123;</span><br><span class="line">    resault=FibonacciN&lt;N<span class="number">-1</span>&gt;::resault+FibonacciN&lt;N<span class="number">-2</span>&gt;::resault</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">FibonacciN</span>&lt;<span class="number">1</span>&gt;&#123;</span><br><span class="line">  <span class="keyword">enum</span>:<span class="type">size_t</span>&#123;resault=<span class="number">1</span>&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">template</span>&lt;&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">FibonacciN</span>&lt;<span class="number">2</span>&gt;&#123;</span><br><span class="line">  <span class="keyword">enum</span>:<span class="type">size_t</span>&#123;resault=<span class="number">1</span>&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="type">int</span> N&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">FibonacciNSum</span>&#123;</span><br><span class="line">  <span class="keyword">enum</span>:<span class="type">size_t</span>&#123;</span><br><span class="line">    resault=FibonacciN&lt;N&gt;::resault+FibonacciNSum&lt;N<span class="number">-1</span>&gt;::resault</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">FibonacciNSum</span>&lt;<span class="number">1</span>&gt;&#123;</span><br><span class="line">  <span class="keyword">enum</span>:<span class="type">size_t</span>&#123;</span><br><span class="line">    resault=FibonacciN&lt;<span class="number">1</span>&gt;::resault</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,FibonacciN&lt;<span class="number">5</span>&gt;::resault);</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,FibonacciNSum&lt;<span class="number">5</span>&gt;::resault);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Let’s take a look at the LLVM-IR code (for brevity, only the main function part):</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">define i32 @<span class="built_in">main</span>(i32, i8**) #<span class="number">4</span> &#123;</span><br><span class="line">  %<span class="number">3</span> = alloca i32, align <span class="number">4</span></span><br><span class="line">  %<span class="number">4</span> = alloca i32, align <span class="number">4</span></span><br><span class="line">  %<span class="number">5</span> = alloca i8**, align <span class="number">8</span></span><br><span class="line">  store i32 <span class="number">0</span>, i32* %<span class="number">3</span>, align <span class="number">4</span></span><br><span class="line">  store i32 %<span class="number">0</span>, i32* %<span class="number">4</span>, align <span class="number">4</span></span><br><span class="line">  store i8** %<span class="number">1</span>, i8*** %<span class="number">5</span>, align <span class="number">8</span></span><br><span class="line">  %<span class="number">6</span> = call <span class="built_in">i32</span> (i8*, ...) @_ZL6printfPKcz(i8* getelementptr <span class="built_in">inbounds</span> ([<span class="number">4</span> x i8], [<span class="number">4</span> x i8]* @.str, i32 <span class="number">0</span>, i32 <span class="number">0</span>), i32 <span class="number">5</span>)</span><br><span class="line">  %<span class="number">7</span> = call <span class="built_in">i32</span> (i8*, ...) @_ZL6printfPKcz(i8* getelementptr <span class="built_in">inbounds</span> ([<span class="number">4</span> x i8], [<span class="number">4</span> x i8]* @.str, i32 <span class="number">0</span>, i32 <span class="number">0</span>), i32 <span class="number">12</span>)</span><br><span class="line">  ret i32 <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>You can see that the direct outputs in printf are just constant 5 and 12, which means there is completely no runtime overhead.</p>
<h3 id="Compile-Time-Type-Checking"><a href="#Compile-Time-Type-Checking" class="headerlink" title="Compile-Time Type Checking"></a>Compile-Time Type Checking</h3><p>How can we determine at compile time if a type is a class type?<br>Based on the SFINAE concept in C++, we can execute different logic based on whether the match is successful or fails:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">True</span>&#123;</span><br><span class="line">  <span class="type">char</span> x;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">False</span>&#123;</span><br><span class="line">  <span class="type">char</span> x[<span class="number">2</span>];</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">IsClass</span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> C&gt; <span class="type">static</span> True <span class="title">isClass</span><span class="params">(<span class="type">int</span> C::*)</span></span>&#123;<span class="keyword">return</span> True&#123;&#125;;&#125;</span><br><span class="line">  <span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> C&gt; <span class="type">static</span> False <span class="title">isClass</span><span class="params">(...)</span></span>&#123;<span class="keyword">return</span> False&#123;&#125;;&#125;</span><br><span class="line">  <span class="keyword">enum</span>&#123;ISCLASS=<span class="built_in">sizeof</span>(IsClass&lt;T&gt;::<span class="built_in">isClass</span>&lt;T&gt;(<span class="number">0</span>))==<span class="built_in">sizeof</span>(True)&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(IsClass&lt;<span class="type">double</span>&gt;::ISCLASS)&#123;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;yes&quot;</span>&lt;&lt;endl;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;no&quot;</span>&lt;&lt;endl;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// output: no</span></span><br></pre></td></tr></table></figure>
<p>The main point here is <code>True isClass(int C::*)</code>. Remember, as I mentioned in a previous article <a target="_blank" rel="noopener" href="https://imzlp.com/posts/27615/">Pointers to Class Members Are Not Pointers in C++</a>, 0 can be converted to a pointer to a member. The idea is that if type T has a pointer to a class member, then it is a class; otherwise, it is not.<br>Based on the same idea, we can also implement a check to see if there exists a conversion from type A to another B:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> A,<span class="keyword">typename</span> B&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">haveConvert</span>&#123;</span><br><span class="line">  <span class="function"><span class="type">static</span> True <span class="title">Convert</span><span class="params">(B)</span></span>&#123;<span class="keyword">return</span> True&#123;&#125;;&#125;</span><br><span class="line">  <span class="function"><span class="type">static</span> False <span class="title">Convert</span><span class="params">(...)</span></span>&#123;<span class="keyword">return</span> False&#123;&#125;;&#125;</span><br><span class="line">  <span class="keyword">enum</span>&#123;CHECK=<span class="built_in">sizeof</span>(haveConvert&lt;A, B&gt;::<span class="built_in">Convert</span>(A&#123;&#125;))==<span class="built_in">sizeof</span>(True)&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(haveConvert&lt;string,<span class="type">double</span>&gt;::CHECK)&#123;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;yes&quot;</span>&lt;&lt;endl;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;no&quot;</span>&lt;&lt;endl;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// output: no</span></span><br></pre></td></tr></table></figure>
<p>There’s also completely no runtime overhead. The code here is already determined during compilation, so at runtime it’s just:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="number">0</span>)&#123;</span><br><span class="line">  cout&lt;&lt;<span class="string">&quot;yes&quot;</span>&lt;&lt;endl;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">  cout&lt;&lt;<span class="string">&quot;no&quot;</span>&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>After optimization by the compiler, dead code is eliminated:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cout&lt;&lt;<span class="string">&quot;no&quot;</span>&lt;&lt;endl;</span><br></pre></td></tr></table></figure>
<p>From the LLVM-IR code, you can see that during runtime only the output of <code>cout</code> is executed:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@.str = <span class="keyword">private</span> unnamed_addr constant [<span class="number">3</span> x i8] c<span class="string">&quot;no\00&quot;</span>, align <span class="number">1</span></span><br><span class="line"></span><br><span class="line">; Function Attrs: norecurse uwtable</span><br><span class="line">define i32 @<span class="built_in">main</span>() #<span class="number">4</span> &#123;</span><br><span class="line">  %<span class="number">1</span> = call <span class="built_in">dereferenceable</span>(<span class="number">272</span>) %<span class="string">&quot;class.std::basic_ostream&quot;</span>* @_ZStlsISt11char_traitsIcEERSt13basic_ostreamIcT_ES5_PKc(%<span class="string">&quot;class.std::basic_ostream&quot;</span>* <span class="built_in">dereferenceable</span>(<span class="number">272</span>) @_ZSt4cout, i8* getelementptr <span class="built_in">inbounds</span> ([<span class="number">3</span> x i8], [<span class="number">3</span> x i8]* @.str, i32 <span class="number">0</span>, i32 <span class="number">0</span>))</span><br><span class="line">  %<span class="number">2</span> = call <span class="built_in">dereferenceable</span>(<span class="number">272</span>) %<span class="string">&quot;class.std::basic_ostream&quot;</span>* @_ZNSolsEPFRSoS_E(%<span class="string">&quot;class.std::basic_ostream&quot;</span>* %<span class="number">1</span>, %<span class="string">&quot;class.std::basic_ostream&quot;</span>* (%<span class="string">&quot;class.std::basic_ostream&quot;</span>*)* @_ZSt4endlIcSt11char_traitsIcEERSt13basic_ostreamIT_T0_ES6_)</span><br><span class="line">  ret i32 <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>This encapsulates the essence of template programming: having zero runtime overhead is such a big deal!!</p>
<h3 id="Using-Self-Type-in-Class-Members"><a href="#Using-Self-Type-in-Class-Members" class="headerlink" title="Using Self-Type in Class Members"></a>Using Self-Type in Class Members</h3><p>How to define a class member that can access the current class type?<br>You can use the following syntax:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">base</span>&#123;</span><br><span class="line">  <span class="keyword">using</span> selfType=T;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">foo</span>:<span class="keyword">public</span> base&lt;foo&lt;T&gt;&gt;&#123;&#125;;</span><br></pre></td></tr></table></figure>
<p>Although it does seem a bit forced…</p>
<h3 id="Passing-Templates-as-Template-Parameters"><a href="#Passing-Templates-as-Template-Parameters" class="headerlink" title="Passing Templates as Template Parameters"></a>Passing Templates as Template Parameters</h3><p>This refers to template template parameters. If we have a demand where the second parameter of the template is a template whose parameters are of the type of the first parameter:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Expect to use string as a template argument for vector inside TempClass</span></span><br><span class="line">TempClass&lt;string,vector&gt; test;</span><br></pre></td></tr></table></figure>
<p>However, you cannot use the above syntax, nor can you use <code>TempClass&lt;string,vector&lt;&gt;&gt;</code> like this.<br>Because it needs to pass a template, not a type of <code>vector&lt;T&gt;</code>. You can use the following syntax:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">X</span>,<span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">Y</span>=X&gt; <span class="keyword">class</span> Z&gt;</span><br><span class="line"><span class="keyword">struct</span> A</span><br><span class="line">&#123;</span><br><span class="line">  Z&lt;&gt; x; <span class="comment">// equal Z&lt;X&gt;, because default template parameter of template Z is X</span></span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">getZname</span><span class="params">()</span></span>&#123;</span><br><span class="line">    cout&lt;&lt;<span class="built_in">typeid</span>(<span class="keyword">this</span>-&gt;x).<span class="built_in">name</span>()&lt;&lt;endl;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">using</span> Vector=vector&lt;T&gt;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc,<span class="type">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  A&lt;string,Vector&gt; x;</span><br><span class="line">  x.<span class="built_in">getZname</span>();</span><br><span class="line">  vector&lt;string&gt; y;</span><br><span class="line">  cout&lt;&lt;<span class="built_in">typeid</span>(y).<span class="built_in">name</span>()&lt;&lt;endl;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Template-Array-Reference-Parameters-Will-Not-Implicitly-Convert-to-Pointers"><a href="#Template-Array-Reference-Parameters-Will-Not-Implicitly-Convert-to-Pointers" class="headerlink" title="Template Array Reference Parameters Will Not Implicitly Convert to Pointers"></a>Template Array Reference Parameters Will Not Implicitly Convert to Pointers</h3><p>First, look at this template, which is used to get the size of array elements:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T, <span class="type">size_t</span> N&gt;</span></span><br><span class="line"><span class="function"><span class="type">size_t</span> <span class="title">arr_size</span><span class="params">(T (&amp;)[N])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> N;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Usage: pass an array type, and get its element count from the return value:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="type">int</span> i_array[<span class="number">10</span>]=&#123;&#125;;</span><br><span class="line">  cout&lt;&lt;<span class="built_in">arr_size</span>(i_array)&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// output</span></span><br><span class="line"><span class="number">10</span></span><br></pre></td></tr></table></figure>
<p>Now, let’s analyze why the <code>arr_size</code> template function is written this way.<br>First, this template class takes two parameters, one is type T and the other is the size N, the compiler matches these two template parameters based on the passed arguments. The meaning of this template is to get the size of the elements (N) based on the <code>type</code> of the array (e.g., <code>int [N]</code>).<br>The most important part is the function parameter declaration:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">size_t</span> <span class="title">arr_size</span><span class="params">(T (&amp;)[N])</span></span></span><br></pre></td></tr></table></figure>
<p>There are two questions:</p>
<ol>
<li>Why do we need <code>&amp;</code>? Can’t we use pass by value?</li>
<li>Why do we need parentheses? Would <code>T &amp;[]</code> not work?</li>
</ol>
<p>First, let’s address the first question: Why do we need to pass by reference? Can’t pass by value work?<br><code>Pass by value</code> does not work. We can write a function that passes <code>limited array argument elements</code> to analyze what the actual argument looks like when passed by value:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">test_array</span><span class="params">(<span class="type">int</span> (arr)[<span class="number">10</span>])</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="type">int</span> i_array[<span class="number">10</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">  <span class="built_in">test_array</span>(i_array);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>As usual, let’s look directly at the LLVM-IR code generated by the above:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">; Function Attrs: noinline nounwind optnone uwtable</span><br><span class="line">define dso_local <span class="type">void</span> @_Z10test_arrayPi(i32*) #<span class="number">4</span> &#123;</span><br><span class="line">  %<span class="number">2</span> = alloca i32*, align <span class="number">8</span></span><br><span class="line">  store i32* %<span class="number">0</span>, i32** %<span class="number">2</span>, align <span class="number">8</span></span><br><span class="line">  ret <span class="type">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; Function Attrs: noinline norecurse nounwind optnone uwtable</span><br><span class="line">define dso_local i32 @<span class="built_in">main</span>() #<span class="number">5</span> &#123;</span><br><span class="line">  %<span class="number">1</span> = alloca i32, align <span class="number">4</span></span><br><span class="line">  %<span class="number">2</span> = alloca [<span class="number">10</span> x i32], align <span class="number">16</span></span><br><span class="line">  store i32 <span class="number">0</span>, i32* %<span class="number">1</span>, align <span class="number">4</span></span><br><span class="line">  %<span class="number">3</span> = bitcast [<span class="number">10</span> x i32]* %<span class="number">2</span> to i8*</span><br><span class="line">  call <span class="type">void</span> @llvm.memset.p0i8.<span class="built_in">i64</span>(i8* align <span class="number">16</span> %<span class="number">3</span>, i8 <span class="number">0</span>, i64 <span class="number">40</span>, i1 <span class="literal">false</span>)</span><br><span class="line">  %<span class="number">4</span> = getelementptr inbounds [<span class="number">10</span> x i32], [<span class="number">10</span> x i32]* %<span class="number">2</span>, i32 <span class="number">0</span>, i32 <span class="number">0</span></span><br><span class="line">  call <span class="type">void</span> @_Z10test_arrayPi(i32* %<span class="number">4</span>)</span><br><span class="line">  ret i32 <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Directly observing the function signature of <code>test_array</code>:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> @_Z10test_arrayPi(i32*)</span><br></pre></td></tr></table></figure>
<p>There is an implicit conversion from array to pointer! At this point, the type information of the array is lost.<br>If we use pass by value, we cannot retrieve the number of elements in the array during type deduction because the count is lost as the values are passed in.<br>So does passing by reference solve the problem?<br>Yes, passing by reference won’t have implicit conversion because reference types need to bind to the original type, and pointer types and array types are different:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">test_array</span><span class="params">(<span class="type">int</span> (&amp;arr)[<span class="number">10</span>])</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="type">int</span> i_array[<span class="number">10</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">  <span class="built_in">test_array</span>(i_array);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Its LLVM-IR code is:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">; Function Attrs: noinline nounwind optnone uwtable</span><br><span class="line">define dso_local <span class="type">void</span> @_Z10test_arrayRA10_i([<span class="number">10</span> x i32]* <span class="built_in">dereferenceable</span>(<span class="number">40</span>)) #<span class="number">0</span> &#123;</span><br><span class="line">  %<span class="number">2</span> = alloca [<span class="number">10</span> x i32]*, align <span class="number">8</span></span><br><span class="line">  store [<span class="number">10</span> x i32]* %<span class="number">0</span>, [<span class="number">10</span> x i32]** %<span class="number">2</span>, align <span class="number">8</span></span><br><span class="line">  ret <span class="type">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; Function Attrs: noinline norecurse nounwind optnone uwtable</span><br><span class="line">define dso_local i32 @<span class="built_in">main</span>() #<span class="number">1</span> &#123;</span><br><span class="line">  %<span class="number">1</span> = alloca [<span class="number">10</span> x i32], align <span class="number">16</span></span><br><span class="line">  %<span class="number">2</span> = bitcast [<span class="number">10</span> x i32]* %<span class="number">1</span> to i8*</span><br><span class="line">  call <span class="type">void</span> @llvm.memset.p0i8.<span class="built_in">i64</span>(i8* align <span class="number">16</span> %<span class="number">2</span>, i8 <span class="number">0</span>, i64 <span class="number">40</span>, i1 <span class="literal">false</span>)</span><br><span class="line">  call <span class="type">void</span> @_Z10test_arrayRA10_i([<span class="number">10</span> x i32]* <span class="built_in">dereferenceable</span>(<span class="number">40</span>) %<span class="number">1</span>)</span><br><span class="line">  ret i32 <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>You can see that the type of the <code>test_array</code> parameter is also an array type now, retaining the type information, so this usage can be utilized in templates.</p>
<p>Now, for the second question: Why do we need parentheses? Would <code>T &amp;arr_ref[N]</code> not work?<br>No, let’s first look at what the type semantics of <code>T &amp;arr_ref[N]</code> is:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> &amp;i_arr_ref[<span class="number">10</span>]; <span class="comment">// error: &#x27;i_arr_ref&#x27; declared as array of references of type &#x27;int &amp;&#x27;</span></span><br></pre></td></tr></table></figure>
<p>First, the <code>[]</code> has higher precedence than <code>&amp;</code>, so the binding of <code>T &amp;arr_ref[N]</code> is interpreted as <code>T &amp;(arr_ref[10])</code>, which is an array of references type, but there is no array of references type in the C++ standard:</p>
<blockquote>
<p>[<strong>ISO/IEC 14882:2014 §8.3.2.5</strong>] There shall be no references to references, no arrays of references, and no pointers to references.</p>
</blockquote>
<p>That means there can be no references to references, no arrays of references, and no pointers to references, and hence the type <code>T &amp;[N]</code> is illegal.<br>What if we add parentheses?</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> (&amp;i_arr_ref)[<span class="number">10</span>]; <span class="comment">// error: declaration of reference variable &#x27;i_arr_ref&#x27; requires an initializer</span></span><br></pre></td></tr></table></figure>
<p>Initialization would look like:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> i_array[<span class="number">10</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="built_in">int</span> (&amp;i_arr_ref)[<span class="number">10</span>]=i_array;</span><br></pre></td></tr></table></figure>
<p>This declaration type is a reference to an array of type <code>int [10]</code>, which is legal. The corresponding LLVM-IR code is:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">define dso_local i32 @<span class="built_in">main</span>() #<span class="number">1</span> &#123;</span><br><span class="line">  %<span class="number">1</span> = alloca [<span class="number">10</span> x i32], align <span class="number">16</span></span><br><span class="line">  %<span class="number">2</span> = alloca [<span class="number">10</span> x i32]*, align <span class="number">8</span></span><br><span class="line">  %<span class="number">3</span> = bitcast [<span class="number">10</span> x i32]* %<span class="number">1</span> to i8*</span><br><span class="line">  call <span class="type">void</span> @llvm.memset.p0i8.<span class="built_in">i64</span>(i8* align <span class="number">16</span> %<span class="number">3</span>, i8 <span class="number">0</span>, i64 <span class="number">40</span>, i1 <span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line">  %<span class="number">4</span> = store [<span class="number">10</span> x i32]* %<span class="number">1</span>, [<span class="number">10</span> x i32]** %<span class="number">2</span>, align <span class="number">8</span></span><br><span class="line">  ret i32 <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>In fact, there are similar declarations for pointers to array objects (which differ from pointer types to array names):</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> (*pointer_to_array)[<span class="number">10</span>];</span><br></pre></td></tr></table></figure>
<p>I have mentioned earlier that references are implemented by pointers in the compiler. The following code generates exactly the same LLVM-IR code:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> i_array[<span class="number">10</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="built_in">int</span> (*pointer_to_array)[<span class="number">10</span>]=&amp;i_array;</span><br><span class="line"><span class="built_in">int</span> (&amp;i_array_ref)[<span class="number">10</span>]=i_array;</span><br></pre></td></tr></table></figure>
<p>Corresponding LLVM-IR code is:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">define dso_local i32 @<span class="built_in">main</span>() #<span class="number">5</span> &#123;</span><br><span class="line">  <span class="comment">// declare i_array</span></span><br><span class="line">  %<span class="number">1</span> = alloca [<span class="number">10</span> x i32], align <span class="number">16</span></span><br><span class="line">  <span class="comment">// declare pointer_to_array</span></span><br><span class="line">  %<span class="number">2</span> = alloca [<span class="number">10</span> x i32]*, align <span class="number">8</span></span><br><span class="line">  <span class="comment">// declare i_arr_ref</span></span><br><span class="line">  %<span class="number">3</span> = alloca [<span class="number">10</span> x i32]*, align <span class="number">8</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// initialize i_array</span></span><br><span class="line">  %<span class="number">4</span> = bitcast [<span class="number">10</span> x i32]* %<span class="number">1</span> to i8*</span><br><span class="line">  call <span class="type">void</span> @llvm.memset.p0i8.<span class="built_in">i64</span>(i8* align <span class="number">16</span> %<span class="number">4</span>, i8 <span class="number">0</span>, i64 <span class="number">40</span>, i1 <span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// initialize pointer_to_array</span></span><br><span class="line">  store [<span class="number">10</span> x i32]* %<span class="number">1</span>, [<span class="number">10</span> x i32]** %<span class="number">2</span>, align <span class="number">8</span></span><br><span class="line">  <span class="comment">// initialize i_arr_ref</span></span><br><span class="line">  store [<span class="number">10</span> x i32]* %<span class="number">1</span>, [<span class="number">10</span> x i32]** %<span class="number">3</span>, align <span class="number">8</span></span><br><span class="line">  ret i32 <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Template-Metaprogramming-Resources"><a href="#Template-Metaprogramming-Resources" class="headerlink" title="Template Metaprogramming Resources"></a>Template Metaprogramming Resources</h2><h3 id="The-Development-History-of-Templates"><a href="#The-Development-History-of-Templates" class="headerlink" title="The Development History of Templates"></a>The Development History of Templates</h3><p>Excerpted from an article by <strong>Herb Sutter</strong>, chairman of the C++ standards committee, titled “Exceptional C++: 40 New Engineering Puzzles, Programming Problems, And Solutions.”</p>
<ul>
<li>The first design proposal for C++ templates was put forward by Bjarne Stroustrup in October 1988 [Stroustrup88].</li>
<li>In 1990, Margaret Ellis and Bjarne Stroustrup co-authored The Annotated C++ Reference Manual (also known as ARM) [Ellis90]. That same year, the ISO/ANSI C++ standards committee continued to progress and used ARM as the foundational document. ARM was the first reference containing descriptions of templates; the templates described were quite rudimentary, with the whole specification occupying only 10 pages. At that time, the focus was entirely on supporting parameterized types and functions, with the example given in ARM being a List container that could store objects of various types, along with a sort algorithm that could sort sequences of various types. However, even back then, people were already considering whether to grant templates a separate compilation capability. Cfront (Stroustrup’s C++ compiler) supported a “separate” compilation of templates, although the approach at the time was not scalable (as noted above).</li>
<li>From 1990 to 1996, dozens of C++ compiler developers emerged, each adopting different methods to implement templates while the standards committee significantly improved and expanded (complicating) templates. The in-depth book C++ Templates [Vandevoorde03] devotes about 133 out of 552 pages to a complete description of standard C++ templates, and the entire book is dedicated to detailing this language feature and how to use it effectively.</li>
<li>In the early to mid-1990s, the C++ standards committee focused primarily on making templates more robust and practical, thereby providing better support for their basic usage. Few would doubt that they created a highly flexible somewhat quirky miracle, which later became known as Turing complete metaprogramming; programs could be written that were as complex as desired, executing at compile time. However, the template metaprogramming and advanced library design techniques that are now prevalent in C++ were not anticipated by those who initially gave life to C++ templates—the decisions made then have shaped everything we have today. Most of the template techniques that became popular did not even exist between 1990 and 1996! Remember, at the end of 1994, Stepanov submitted his STL library to the standards committee for the first time, and in 1995 STL was adopted as a standard, viewed as a groundbreaking achievement at the time. Yet today, STL is “just” a container and algorithm library. Of course, STL was indeed a revolutionary breakthrough in 1995, and even today, it remains a powerful testament to what distinguishes C++ from other languages; however, from today’s standards, STL is merely a small trial run for C++ templates.</li>
</ul>

    </div>

    
    
        
        
          
            <blockquote class="blockquote-center">
              
                The article is finished. If you have any questions, please comment and communicate.
              
            <br/>
            
                <div class="qr-code" onclick="return false">
                    <script src="/js/qrcode.min.js"></script>
                    <div id="qrcode">
                      
                        <img src="https://imzlp.com/images/wechat-qrcode.webp">
                      
                    <p>Scan the QR code on WeChat and follow me.</p>
                    </div>
                </div>
            
            </blockquote>
          
        

        
          <div class="postCopyright" style="clear:both;">
             <span>Title:</span><a href="/posts/23043/" target="_blank">C++ Template Metaprogramming Data Collection</a><br/>
             <span>Author:</span><a href="/about" target="_blank" title="查看 LIPENGZHA 的资料">LIPENGZHA</a><br/>
             <span>Publish Date:</span>2017/06/17 23:21<br/>
             
             <span>Word Count:</span><span class="page-count">7.3k Words</span><br/>
             
             <span>Link:</span><a href="/posts/23043/" target="_blank" title="C++ Template Metaprogramming Data Collection">https://en.imzlp.com/posts/23043/</a>
             <span class="copy-path" data-clipboard-text="Link: https://en.imzlp.com/posts/23043/ Author: LIPENGZHA" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
             <script src="/js/jquery.min.js"></script>
             <script src="/js/clipboard.min.js"></script>
             <script> var clipboard = new Clipboard('.copy-path'); </script>
             <br/>
             
             <span>License:</span><i class="fab fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" title="Attribution-NonCommercial-ShareAlike 4.0 International">CC BY-NC-SA 4.0</a><br/>
             
             <span>Reprinting of the full article is prohibited.</span>
          </div>
        
    

        
  <div class="reward-container">
    <div>Your donation will encourage me to keep creating!</div>
    <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
      Donate
    </button>
    <div id="qr" style="display: none;">
        
        <div style="display: inline-block;">
          <img src="/images/reward/wechatpay.webp" alt="LIPENGZHA WeChat Pay">
          <p>WeChat Pay</p>
        </div>

    </div>
  </div>



      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/C/" rel="tag"># C++</a>
              <a href="/tags/%E6%A8%A1%E6%9D%BF%E5%85%83%E7%BC%96%E7%A8%8B/" rel="tag"># 模板元编程</a>
              <a href="/tags/Template/" rel="tag"># Template</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/posts/11306/" rel="prev" title="Why can't we override && and || and , (comma)?">
      <i class="fa fa-chevron-left"></i> Why can't we override && and || and , (comma)?
    </a></div>
      <div class="post-nav-item">
    <a href="/posts/21564/" rel="next" title="operator new: void* to T* conversion">
      operator new: void* to T* conversion <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
      <div class="tabs tabs-comment">
        <ul class="nav-tabs">
            <li class="tab"><a href="#comment-utteranc">utteranc</a></li>
            <li class="tab"><a href="#comment-valine">valine</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane utteranc" id="comment-utteranc">
              
  
  <div class="comments">
  <script src="https://utteranc.es/client.js" repo="hxhb/blog-comments" issue-term="pathname" theme="github-light" crossorigin="anonymous" async></script>
  </div>
  
  
            </div>
            <div class="tab-pane valine" id="comment-valine">
              <div class="comments" id="valine-comments"></div>
            </div>
        </div>
      </div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Template-Code"><span class="nav-number">1.</span> <span class="nav-text">Template Code</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Template-Metaprogramming-for-Base-Conversion"><span class="nav-number">1.1.</span> <span class="nav-text">Template Metaprogramming for Base Conversion</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Template-Metaprogramming-for-Fibonacci-Sequence"><span class="nav-number">1.2.</span> <span class="nav-text">Template Metaprogramming for Fibonacci Sequence</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Compile-Time-Type-Checking"><span class="nav-number">1.3.</span> <span class="nav-text">Compile-Time Type Checking</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Using-Self-Type-in-Class-Members"><span class="nav-number">1.4.</span> <span class="nav-text">Using Self-Type in Class Members</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Passing-Templates-as-Template-Parameters"><span class="nav-number">1.5.</span> <span class="nav-text">Passing Templates as Template Parameters</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Template-Array-Reference-Parameters-Will-Not-Implicitly-Convert-to-Pointers"><span class="nav-number">1.6.</span> <span class="nav-text">Template Array Reference Parameters Will Not Implicitly Convert to Pointers</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Template-Metaprogramming-Resources"><span class="nav-number">2.</span> <span class="nav-text">Template Metaprogramming Resources</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#The-Development-History-of-Templates"><span class="nav-number">2.1.</span> <span class="nav-text">The Development History of Templates</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person" oncontextmenu="return false" οndragstart="return false">
    <img class="site-author-image" itemprop="image" alt="LIPENGZHA"
      src="https://img.imzlp.com/imgs/zlp/picgo/2023/202304152112902.webp">
  <p class="site-author-name" itemprop="name">LIPENGZHA</p>
  <div class="site-description" itemprop="description">"I think, therefore I am"</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
             
          <span class="site-state-item-count">190</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">95</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">190</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/hxhb" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;hxhb" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://linkedin.com/in/lipengzha" title="Linkedin → https:&#x2F;&#x2F;linkedin.com&#x2F;in&#x2F;lipengzha" rel="noopener" target="_blank"><i class="fab fa-linkedin fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.zhihu.com/people/imzlp" title="知乎 → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;imzlp" rel="noopener" target="_blank"><i class="fa fa-custom zhihu fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="/images/wechat-qrcode-offical.webp" title="微信公众号 → &#x2F;images&#x2F;wechat-qrcode-offical.webp"><i class="fab fa-weixin fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:imzlp@foxmail.com" title="E-Mail → mailto:imzlp@foxmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fa fa-rss fa-fw"></i></a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://consolehelp.imzlp.com/" title="https:&#x2F;&#x2F;consolehelp.imzlp.com&#x2F;" rel="noopener" target="_blank">UE Console Help</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://imzlp.com/opensource/" title="https:&#x2F;&#x2F;imzlp.com&#x2F;opensource&#x2F;" rel="noopener" target="_blank">Open Source Projects</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://imzlp.com/posts/11515/" title="https:&#x2F;&#x2F;imzlp.com&#x2F;posts&#x2F;11515&#x2F;" rel="noopener" target="_blank">UE C++ API Dash Documents</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://ue5wiki.com/" title="https:&#x2F;&#x2F;ue5wiki.com&#x2F;" rel="noopener" target="_blank">Unreal Engine Wiki</a>
        </li>
    </ul>
  </div>

      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2014 – 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">LIPENGZHA</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="Symbols count total">1.5m</span>
</div>
  <div class="powered-by-other">
    
	    <center>Github Pages | Actions | NeXT | Cloudflare | Hexo Deploy</center>
      
  </div>

<script>
function checkWebp(callback) {
    var img = new Image();
    img.onload = function () { callback((img.width > 0) && (img.height > 0)); };
    img.onerror = function () { callback(false); };
    img.src = 'data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA';
}
function showImage(useWebp) {
    var imgs = [].slice.call(document.querySelectorAll('img'));
    imgs.forEach(function (e) {
        if (!useWebp) {
            var src = e.getAttribute('data-src')
            src = src.replace(/\.webp$/, '.png');
            e.setAttribute('data-src', src);
        }
    });
}
checkWebp(showImage);
</script>

        








      </div>
    </footer>
  </div>

  
  <script src="//lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/animejs/3.2.1/anime.min.js"></script>
  <script src="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/jquery/3.5.1/jquery.min.js"></script>
  <script src="//lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/fancybox/3.5.7/jquery.fancybox.min.js"></script>
  <script src="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/lozad.js/1.16.0/lozad.min.js"></script>
  <script src="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/pangu/4.0.7/pangu.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>



<script src="/js/code-unfold.js"></script>

  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>




  
<script src="/js/local-search.js"></script>









<script>
document.querySelectorAll('.pdfobject-container').forEach(element => {
  let url = element.dataset.target;
  let pdfOpenParams = {
    navpanes : 0,
    toolbar  : 0,
    statusbar: 0,
    pagemode : 'thumbs',
    view     : 'FitH'
  };
  let pdfOpenFragment = '#' + Object.entries(pdfOpenParams).map(([key, value]) => `${key}=${encodeURIComponent(value)}`).join('&');
  let fullURL = `/lib/pdf/web/viewer.html?file=${encodeURIComponent(url)}${pdfOpenFragment}`;

  if (NexT.utils.supportsPDFs()) {
    element.innerHTML = `<embed class="pdfobject" src="${url + pdfOpenFragment}" type="application/pdf" style="height: ${element.dataset.height};">`;
  } else {
    element.innerHTML = `<iframe src="${fullURL}" style="height: ${element.dataset.height};" frameborder="0"></iframe>`;
  }
});
</script>


<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  

  
  <script src="//img.imzlp.com/imgs/zlp/picgo/2021/quicklink.umd.js"></script>
  <script>
      window.addEventListener('load', () => {
      quicklink({
        timeout : 3000,
        priority: true,
        ignores : [uri => uri.includes('#'),uri => uri === 'https://en.imzlp.com/posts/23043/',]
      });
      });
  </script>


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/valine/1.4.14/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    var requiredFields = 'nick';
    requiredFields = requiredFields.split(',');
    
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'oCE6RMVkVoi5MgUhvFsn1EvV-gzGzoHsz',
      appKey     : 'K9SOaNYJ8PV6xaoFggWG5xvv',
      placeholder: "Leave something behind~",
      avatar     : 'robohash',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : 'en' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : '',
      requiredFields: requiredFields
    });
  }, window.Valine);
});
</script>

</body>
</html>
