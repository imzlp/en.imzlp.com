<!DOCTYPE html>
<html lang="en,default">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon-32x32-tilt-brush.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-tilt-brush.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-tilt-brush.png">
  <link rel="mask-icon" href="/images/favicon-32x32-tilt-brush.png" color="#222">
  <meta name="google-site-verification" content="ttIkhAIFZQM9Huj8roB0l95ePN2Tv2zv2wRFksi09WA">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noto Serif SC:300,300italic,400,400italic,700,700italic|Pacifico:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Roboto Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="//lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/5.15.2/css/all.min.css">
  <link rel="stylesheet" href="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/fancybox/3.5.7/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"en.imzlp.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false,"width":280},"copycode":{"enable":true,"show_result":true,"style":"flat"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"manual"},"fancybox":true,"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":false,"nav":null,"activeClass":"valine"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"code_unfold":{"enable":true,"CODE_MAX_HEIGHT":600},"path":"search.xml"};
  </script>

  <meta name="description" content="The main content of this article introduces the deployment of the UE development environment on Mac, configuration of iOS remote packaging, the application of UPL on iOS (intervening in the ipa packag">
<meta property="og:type" content="article">
<meta property="og:title" content="UE Development Notes: Mac&#x2F;iOS">
<meta property="og:url" content="https://en.imzlp.com/posts/1948/index.html">
<meta property="og:site_name" content="Z&#39;s Blog">
<meta property="og:description" content="The main content of this article introduces the deployment of the UE development environment on Mac, configuration of iOS remote packaging, the application of UPL on iOS (intervening in the ipa packag">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/picgo/2023/20230323184158.webp">
<meta property="article:published_time" content="2020-09-01T21:45:03.000Z">
<meta property="article:modified_time" content="2023-09-08T09:47:17.000Z">
<meta property="article:author" content="LIPENGZHA">
<meta property="article:tag" content="UnrealEngine">
<meta property="article:tag" content="iOS">
<meta property="article:tag" content="Mac">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img.imzlp.com/imgs/zlp/picgo/2023/20230323184158.webp">

<link rel="canonical" href="https://en.imzlp.com/posts/1948/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>UE Development Notes: Mac/iOS | Z's Blog</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-FDCJ41EFP5"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-FDCJ41EFP5');
      }
    </script>






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.staticfile.org/lxgw-wenkai-screen-webfont/1.7.0/style.min.css" /><!-- hexo injector head_end end --><link rel="alternate" href="/atom.xml" title="Z's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Z's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        
            
  <li class="menu-item menu-item-notes">

    <a href="/notes/" rel="section"><i class="fa fa-edit fa-fw"></i>Notes</a>

  </li>


      
        
            
  <li class="menu-item menu-item-essay">

    <a href="/essay/" rel="section"><i class="fas fa-feather-alt fa-fw"></i>Essay</a>

  </li>


      
        
            
  <li class="menu-item menu-item-resources">

    <a href="/resources/" rel="section"><i class="fa fa-inbox fa-fw"></i>Resources</a>

  </li>


      
        <li class="menu-item menu-item-friends">

    <a href="/friends/" rel="section"><i class="fas fa-link fa-fw"></i>Friends</a>

  </li>
        
            
  <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About Me</a>

  </li>


      
        <li class="menu-item menu-item-showcase">

    <a href="/showcase/" rel="section"><i class="fa fa-solid fa-trophy fa-fw"></i>ShowCase</a>

  </li>
        <li class="menu-item menu-item-changelog">

    <a href="/changelog/" rel="section"><i class="fa fa-history fa-fw"></i>Site Log</a>

  </li>
        <li class="menu-item menu-item-opensource">

    <a href="/opensource/" rel="section"><i class="fas fa-code-branch fa-fw"></i>Open Source</a>

  </li>
        <li class="menu-item menu-item-uewiki">

    <a href="https://ue5wiki.com/" rel="noopener" target="_blank"><i class="fab fa-wikipedia-w fa-fw"></i>Unreal Wiki</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>



<script type="text/javascript">
  let domain='en.imzlp.com';
  let domain_str = atob(domain);
  let pathname = location.pathname;
  if (domain_str!= location.host.toLowerCase()){
        console.log(`this host is not safe,jump to https://${domain_str}${pathname}`);
        location.href=`https://${domain_str}${pathname}`;
  }
</script>

</div>
    </header>

    
  <div class="reading-progress-bar"></div>
  <div class="l10n-header-widget">
    <script>
      // 获取当前页面的 URL
      const currentUrl = window.location.href;
      // 替换 URL 中的部分内容
      const jumpToL10nLink = currentUrl.replace('en.imzlp.com', 'imzlp.com');
      // 将 jumpToL10nLink 绑定到一个全局变量
      window.jumpToL10nLink = jumpToL10nLink;
    </script>

    <a href="#" class="post-l10n-link" title="切换至中文版本" style="float: left;border-bottom: none;" rel="noopener" target="_blank" onclick="window.open(window.jumpToL10nLink, '_blank'); return false;">
      <i class="fa fa-solid fa-language"></i>
    </a>
  </div>



    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en"
  >
    <link itemprop="mainEntityOfPage" href="https://en.imzlp.com/posts/1948/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://img.imzlp.com/imgs/zlp/picgo/2023/202304152112902.webp">
      <meta itemprop="name" content="LIPENGZHA">
      <meta itemprop="description" content=""I think, therefore I am"">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Z's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          UE Development Notes: Mac/iOS<a href="https://github.com/imzlp/blog-md/blob/en/_posts/2020-09-01-1948.md" class="post-edit-link" title="Edit this post" style="float: right;border-bottom: 0px;" rel="noopener" target="_blank"><i class="fa fa-pen-nib"></i></a><a href="https://imzlp.com/posts/1948/" class="post-l10n-link" title="切换至中文版本" style="float: left;border-bottom: 0px;" rel="noopener" target="_blank"><i class="fa fa-solid fa-language"></i></a>
        </h1>

        
          <div class="post-subtitle" style="text-align: center;line-height: 1;">
            <sub text-align="center" style="font-size: 15px;align-content: center;font-style: italic;bottom: 0em;">UE开发笔记：Mac/iOS篇</sub>
          </div>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-09-01 21:45 21:45:03:45" itemprop="dateCreated datePublished" datetime="2020-09-01T21:45:03+00:00">2020-09-01 21:45</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-09-08 09:47 09:47:17:47" itemprop="dateModified" datetime="2023-09-08T09:47:17+00:00">2023-09-08 09:47</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/UnrealEngine/" itemprop="url" rel="index"><span itemprop="name">UnrealEngine</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/UnrealEngine/Apple/" itemprop="url" rel="index"><span itemprop="name">Apple</span></a>
                </span>
            </span>

          
            <span id="/posts/1948/" class="post-meta-item leancloud_visitors" data-flag-title="UE Development Notes: Mac/iOS" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>17k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>42 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>The main content of this article introduces the deployment of the UE development environment on Mac, configuration of iOS remote packaging, the application of UPL on iOS (intervening in the ipa packaging process), tools and development skills, as well as analysis of related engine code, documenting some pitfalls encountered in the project. It is primarily compiled from my previous <a target="_blank" rel="noopener" href="https://imzlp.com/notes">notes</a>, and related Mac and iOS content will also be updated in this article in the future.</p>
<span id="more"></span>

<h2 id="Remote-Build-for-iOS"><a href="#Remote-Build-for-iOS" class="headerlink" title="Remote Build for iOS"></a>Remote Build for iOS</h2><p>UE can directly package Android and Windows builds on Windows (Android requires configuring JDK/SDK/NDK/Gradle and other environments). Packaging iOS requires a Mac. If every time packaging iOS you have to perform operations on a Mac, it is essentially the same as on Windows, but the process cannot be reused, making it cumbersome, especially when the engine is modified. You need to first update the engine code and compile it, then update the project and execute packaging. Fortunately, UE provides remote iOS build capabilities, allowing packaging for Win/Android/iOS to be done in the same build process.</p>
<p>Pre-requisites:</p>
<ol>
<li>One computer running MacOS on the intranet (white or black)</li>
<li>Apply for a p12 certificate and mobileprovision</li>
<li>The PC and Mac need to be able to access each other on the network (in the same subnet)</li>
</ol>
<h3 id="IOS-Certificate-Application"><a href="#IOS-Certificate-Application" class="headerlink" title="IOS Certificate Application"></a>IOS Certificate Application</h3><p>Before packaging iOS, you need to apply for an iOS developer account to create certificates, which can be applied at <a target="_blank" rel="noopener" href="https://developer.apple.com/">developer.apple.com</a>. You need to obtain the p12 certificate and mobileprovision, which should then be imported into UE’s project settings. Note that you must match whether the created certificate is a <code>Developer</code> or <code>Distribution</code> certificate during packaging; otherwise, packaging will fail.</p>
<p>There are many articles on the internet detailing the certificate application process. Here, I will simply record the process I followed, and the steps are not the most detailed, only for reference.</p>
<p>Firstly, export a certificate on the Mac:<br>Open the software <code>Keychain Access</code> - <code>Certificate Assistant</code> - <code>Request a Certificate from a Certificate Authority</code>:<br><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/1948/AppleDev/mac-os-export-ca.webp"><br>Choose to save it to disk, which generates a file named <code>CertificateSigningRequest.certSigningRequest</code>.<br>Then log in to <a target="_blank" rel="noopener" href="https://developer.apple.com/">Apple Developer</a>, go to <code>Account</code> - <code>Certificates</code>:<br><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/1948/AppleDev/apple-developer-certification-ids-profiles.webp"></p>
<p>After entering, create <code>Apple Development</code> or <code>iOS App Development</code>, and during the creation process, upload the <code>CertificateSigningRequest.certSigningRequest</code> file generated above.</p>
<p>Add devices:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/1948/AppleDev/apple-developer-add-device.webp"></p>
<p>You can use UE’s <code>IPhonePackager.exe</code> to check the uuid of iOS devices:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/1948/AppleDev/ue-iphonepackagetool-device-uuid.webp"></p>
<p>Generate Provision:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/1948/AppleDev/apple-developer-generated-provisioning-profile.webp"></p>
<p>After generating it, download the <code>provision</code> file:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/1948/AppleDev/apple-developer-download-provisioning-profile.webp"></p>
<p>In Apple Developer, only the cer certificate can be downloaded, but the engine requires a p12. You need to import the cer certificate into the Mac’s Keychain, then export it as a p12 certificate:</p>
<blockquote>
<p>Note: Make sure to select under the “Certificates” category; otherwise, the p12 option will be grayed out.</p>
</blockquote>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2024/08/08/162854.png"></p>
<h3 id="Configuration-for-Remote-Build"><a href="#Configuration-for-Remote-Build" class="headerlink" title="Configuration for Remote Build"></a>Configuration for Remote Build</h3><p>Packaging iOS with UE requires importing the certificate and <code>provision</code> in the project settings, and setting the <code>BundleName</code> and <code>Bundle Identifier</code> to the Bundle ID configured on the Apple Developer website, formatted as <code>com.xxxxx.yyyyyy</code>.</p>
<p>After importing the p12 certificate and mobileprovision, it should appear as in the figure:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/1948/ue4-project-settings-ios-import-mobileprevision-ce.webp"></p>
<p>Once the certificate is imported, you can start configuring remote packaging.</p>
<p>First, enable remote login in Mac’s <code>System Preferences</code> - <code>Sharing</code>:<br><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/1948/mac-setting-sharing.webp"></p>
<p>Then on Windows, add the <code>mobileprovision</code> to the project and set the <code>BundleName</code> and <code>Bundle Identifier</code>.<br>Next, scroll down to find <code>IOS</code> - <code>Build</code> under <code>Remote Build Options</code>:<br><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/1948/ue-project-settings-IOS-remote-build.webp"><br>Enter the IP address of the target Mac (if no port is specified, the default is 22; if specifying a port, use the format <code>xx.xx.xx.xx:2222</code> with a colon separating them) and username.</p>
<p>Then click <code>Generated SSH Key</code>, and a window will pop up:<br><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/1948/ue4-remote-build-generated-sshkey-01.webp"><br>Press any key to continue.<br>You will be prompted to enter a password; enter it as instructed. Then you will be asked to enter the password for the <code>MAC</code> computer, and after entering, it will prompt:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Enter passphrase (empty <span class="keyword">for</span> no passphrase):</span><br></pre></td></tr></table></figure>

<p>This asks you to input the password for the generated ssh Key, which you can normally skip by just pressing Enter.<br>Pressing <code>Enter</code> continuously will inform you that the ssh key has been successfully generated:<br><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/1948/ue4-remote-build-generated-sshkey-02.webp"><br>Then you will be asked to enter the first set password and the password for the target MAC machine, and after completion, it will indicate there are no errors, which is good:<br><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/1948/ue4-remote-build-generated-sshkey-03.webp"></p>
<p>The path where the generated SSH Key is stored is:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\imzlp\AppData\Roaming/Unreal Engine/UnrealBuildTool/SSHKeys/192.168.2.89/imzlp/RemoteToolChainPrivate.key</span><br></pre></td></tr></table></figure>

<p>If you want to share it with other members in the group, share the <code>RemoteToolChainPrivate.key</code>, and have them set <code>IOS</code> - <code>Build</code> - <code>RemoteBuildOptions</code> to use the <code>Override existing SSH Permissions file</code> path pointing to <code>RemoteToolChainPrivate.key</code>.</p>
<p>After this, you can package just like packaging for Windows or packaging iOS on Win:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/1948/ue4-package-ios-in-windows.webp"></p>
<p>Remote Mac packaging goes through several stages:</p>
<ol>
<li>Upload the engine and project code from your local machine to Mac</li>
<li>Execute compilation on Mac</li>
<li>After compilation is complete, generate the ipa package on Mac (but excluding Cooked resources)</li>
<li>Pull back the generated ipa package to the local machine, unpack, Cook art resources, and merge into ipa</li>
</ol>
<p>For the first step, uploading the local engine and project code to Mac is achieved using rsync; the <code>Engine\Build\Rsync</code> directory contains filters for files that need to be uploaded to the target machine during remote construction.<br>For projects, you can create the <code>&lt;ProjectDir&gt;/Build/Rsync/RsyncProject.txt</code> file in the project directory and add your desired file filtering for uploading to Mac, which can solve the problem of some files being overlooked during remote packaging.<br>The default RsyncProject.txt filter used during uploads by UE includes both engine and project directories; for the specific code, see: <a target="_blank" rel="noopener" href="https://github.com/EpicGames/UnrealEngine/blob/release/Engine/Source/Programs/UnrealBuildTool/ToolChain/RemoteMac.cs#L927">UnrealBuildTool/ToolChain/RemoteMac.cs#L927</a></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://docs.unrealengine.com/en-US/Platforms/Mobile/iOS/Windows/index.html">Building for iOS on Windows</a></li>
<li><a target="_blank" rel="noopener" href="https://www.audiokinetic.com/zh/library/edge/?source=UE4&id=using_faq.html">WWise FAQ</a></li>
</ul>
<h3 id="SSH-Key-Login-Failure"><a href="#SSH-Key-Login-Failure" class="headerlink" title="SSH Key Login Failure"></a>SSH Key Login Failure</h3><p>If you receive the following error when making the SSH connection:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lipengzha@192.168.31.55: Permission denied (publickey,password,keyboard-interactive).</span><br></pre></td></tr></table></figure>

<p>You may modify the Mac’s SSH configuration (<code>/etc/ssh/sshd_config</code>):</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">RSAAuthentication yes</span><br><span class="line">PubkeyAuthentication yes</span><br></pre></td></tr></table></figure>

<p>Then reload the configuration:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo launchctl unload /System/Library/LaunchDaemons/ssh.plist</span><br><span class="line">sudo launchctl load -w /System/Library/LaunchDaemons/ssh.plist</span><br></pre></td></tr></table></figure>

<ul>
<li><a target="_blank" rel="noopener" href="https://unix.stackexchange.com/questions/205842/unable-to-login-with-ssh-rsa-key">Unable to login with SSH-RSA key</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/daly2008/p/5030795.html">The StrictModes parameter in sshd_config under linux</a></li>
</ul>
<h3 id="iOS-Packaging-Certificate-Configuration-Error-Issue"><a href="#iOS-Packaging-Certificate-Configuration-Error-Issue" class="headerlink" title="iOS Packaging Certificate Configuration Error Issue"></a>iOS Packaging Certificate Configuration Error Issue</h3><p>When adding <code>Provision</code> and <code>Certificate</code> in UE’s project settings, the <code>Bundle Identifier</code> must correspond to the certificate; however, after setting up, if you try to package, you may receive the following error:</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Provision not found. A provision is required for deploying your app to the device.  </span><br><span class="line">Signing key not found. The app could not be digitally signed, because the signing key is not configured.  </span><br></pre></td></tr></table></figure>

<p>If such a situation arises after configuring the certificate and <code>Provision</code>, check whether the certificate is <strong>Development</strong> or <strong>Distribution</strong>. By default, the project setting does not check <strong>Distribution</strong>. If the imported certificate is a distribution certificate, it can <strong>only package as Shipping</strong> and must check <strong>Distribution</strong>.</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/1948/ue4-package-project-for-distribution.webp"></p>
<p>If you use a distribution certificate without checking <strong>For Distribution</strong>, you will encounter the following error during packaging:</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Check dependencies</span><br><span class="line">Code Signing Error: Provisioning profile &quot;com.tencent.tmgp.zyhx_Production_SignProvision&quot; doesn&#x27;t match the entitlements file&#x27;s value for the get-task-allow entitlement.</span><br><span class="line">Code Signing Error: Code signing is required for product type &#x27;Application&#x27; in SDK &#x27;iOS 13.6&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="SSH-Key-Path-Lookup-Bug"><a href="#SSH-Key-Path-Lookup-Bug" class="headerlink" title="SSH Key Path Lookup Bug"></a>SSH Key Path Lookup Bug</h3><p>Previously mentioned in <code>Project Settings</code> - <code>Platforms</code> - <code>iOS</code>, you can specify the SSH Key in <code>Override Existing SSH Permissions file</code>; if not specified, it defaults to using the engine lookup path. By default, it searches for the following paths:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> FString DefaultKeyFilename = <span class="built_in">TEXT</span>(<span class="string">&quot;RemoteToolChainPrivate.key&quot;</span>);</span><br><span class="line"><span class="type">const</span> FString RelativeFilePathLocation = FPaths::<span class="built_in">Combine</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;SSHKeys&quot;</span>), *RemoteServerName, *RSyncUsername, *DefaultKeyFilename);</span><br><span class="line">TArray&lt;FString&gt; PossibleKeyLocations;</span><br><span class="line">PossibleKeyLocations.<span class="built_in">Add</span>(FPaths::<span class="built_in">Combine</span>(*FPaths::<span class="built_in">ProjectDir</span>(), <span class="built_in">TEXT</span>(<span class="string">&quot;Build&quot;</span>), <span class="built_in">TEXT</span>(<span class="string">&quot;NotForLicensees&quot;</span>), *RelativeFilePathLocation));</span><br><span class="line">PossibleKeyLocations.<span class="built_in">Add</span>(FPaths::<span class="built_in">Combine</span>(*FPaths::<span class="built_in">ProjectDir</span>(), <span class="built_in">TEXT</span>(<span class="string">&quot;Build&quot;</span>), <span class="built_in">TEXT</span>(<span class="string">&quot;NoRedist&quot;</span>), *RelativeFilePathLocation));</span><br><span class="line">PossibleKeyLocations.<span class="built_in">Add</span>(FPaths::<span class="built_in">Combine</span>(*FPaths::<span class="built_in">ProjectDir</span>(), <span class="built_in">TEXT</span>(<span class="string">&quot;Build&quot;</span>), *RelativeFilePathLocation));</span><br><span class="line">PossibleKeyLocations.<span class="built_in">Add</span>(FPaths::<span class="built_in">Combine</span>(*FPaths::<span class="built_in">EngineDir</span>(), <span class="built_in">TEXT</span>(<span class="string">&quot;Build&quot;</span>), <span class="built_in">TEXT</span>(<span class="string">&quot;NotForLicensees&quot;</span>), *RelativeFilePathLocation));</span><br><span class="line">PossibleKeyLocations.<span class="built_in">Add</span>(FPaths::<span class="built_in">Combine</span>(*FPaths::<span class="built_in">EngineDir</span>(), <span class="built_in">TEXT</span>(<span class="string">&quot;Build&quot;</span>), <span class="built_in">TEXT</span>(<span class="string">&quot;NoRedist&quot;</span>), *RelativeFilePathLocation));</span><br><span class="line">PossibleKeyLocations.<span class="built_in">Add</span>(FPaths::<span class="built_in">Combine</span>(*FPaths::<span class="built_in">EngineDir</span>(), <span class="built_in">TEXT</span>(<span class="string">&quot;Build&quot;</span>), *RelativeFilePathLocation));</span><br><span class="line">PossibleKeyLocations.<span class="built_in">Add</span>(FPaths::<span class="built_in">Combine</span>(*Path, <span class="built_in">TEXT</span>(<span class="string">&quot;Unreal Engine&quot;</span>), <span class="built_in">TEXT</span>(<span class="string">&quot;UnrealBuildTool&quot;</span>), *RelativeFilePathLocation));</span><br></pre></td></tr></table></figure>

<p><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/1948/ue4-project--ios-found-existing-ssh.webp"></p>
<p>However, when the <code>RemoteServerName</code> includes a port, there is a bug in UE’s implementation when hoping to use the engine lookup path.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">UIOSRuntimeSettings::PostInitProperties</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Super::<span class="built_in">PostInitProperties</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">// We can have a look for potential keys</span></span><br><span class="line">	<span class="keyword">if</span> (!RemoteServerName.<span class="built_in">IsEmpty</span>() &amp;&amp; !RSyncUsername.<span class="built_in">IsEmpty</span>())</span><br><span class="line">	&#123;</span><br><span class="line">		SSHPrivateKeyLocation = <span class="built_in">TEXT</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="type">const</span> FString DefaultKeyFilename = <span class="built_in">TEXT</span>(<span class="string">&quot;RemoteToolChainPrivate.key&quot;</span>);</span><br><span class="line">		<span class="type">const</span> FString RelativeFilePathLocation = FPaths::<span class="built_in">Combine</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;SSHKeys&quot;</span>), *RemoteServerName, *RSyncUsername, *DefaultKeyFilename);</span><br><span class="line"></span><br><span class="line">		FString Path = FPlatformMisc::<span class="built_in">GetEnvironmentVariable</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;APPDATA&quot;</span>));</span><br><span class="line"></span><br><span class="line">		TArray&lt;FString&gt; PossibleKeyLocations;</span><br><span class="line">		PossibleKeyLocations.<span class="built_in">Add</span>(FPaths::<span class="built_in">Combine</span>(*FPaths::<span class="built_in">ProjectDir</span>(), <span class="built_in">TEXT</span>(<span class="string">&quot;Build&quot;</span>), <span class="built_in">TEXT</span>(<span class="string">&quot;NotForLicensees&quot;</span>), *RelativeFilePathLocation));</span><br><span class="line">		PossibleKeyLocations.<span class="built_in">Add</span>(FPaths::<span class="built_in">Combine</span>(*FPaths::<span class="built_in">ProjectDir</span>(), <span class="built_in">TEXT</span>(<span class="string">&quot;Build&quot;</span>), <span class="built_in">TEXT</span>(<span class="string">&quot;NoRedist&quot;</span>), *RelativeFilePathLocation));</span><br><span class="line">		PossibleKeyLocations.<span class="built_in">Add</span>(FPaths::<span class="built_in">Combine</span>(*FPaths::<span class="built_in">ProjectDir</span>(), <span class="built_in">TEXT</span>(<span class="string">&quot;Build&quot;</span>), *RelativeFilePathLocation));</span><br><span class="line">		PossibleKeyLocations.<span class="built_in">Add</span>(FPaths::<span class="built_in">Combine</span>(*FPaths::<span class="built_in">EngineDir</span>(), <span class="built_in">TEXT</span>(<span class="string">&quot;Build&quot;</span>), <span class="built_in">TEXT</span>(<span class="string">&quot;NotForLicensees&quot;</span>), *RelativeFilePathLocation));</span><br><span class="line">		PossibleKeyLocations.<span class="built_in">Add</span>(FPaths::<span class="built_in">Combine</span>(*FPaths::<span class="built_in">EngineDir</span>(), <span class="built_in">TEXT</span>(<span class="string">&quot;Build&quot;</span>), <span class="built_in">TEXT</span>(<span class="string">&quot;NoRedist&quot;</span>), *RelativeFilePathLocation));</span><br><span class="line">		PossibleKeyLocations.<span class="built_in">Add</span>(FPaths::<span class="built_in">Combine</span>(*FPaths::<span class="built_in">EngineDir</span>(), <span class="built_in">TEXT</span>(<span class="string">&quot;Build&quot;</span>), *RelativeFilePathLocation));</span><br><span class="line">		PossibleKeyLocations.<span class="built_in">Add</span>(FPaths::<span class="built_in">Combine</span>(*Path, <span class="built_in">TEXT</span>(<span class="string">&quot;Unreal Engine&quot;</span>), <span class="built_in">TEXT</span>(<span class="string">&quot;UnrealBuildTool&quot;</span>), *RelativeFilePathLocation));</span><br><span class="line"></span><br><span class="line">		<span class="comment">// Find a potential path that we will use if the user hasn&#x27;t overridden.</span></span><br><span class="line">		<span class="comment">// For information purposes only</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="type">const</span> FString&amp; NextLocation : PossibleKeyLocations)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span> (IFileManager::<span class="built_in">Get</span>().<span class="built_in">FileSize</span>(*NextLocation) &gt; <span class="number">0</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				SSHPrivateKeyLocation = NextLocation;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>This code has bugs on Windows because when <code>RemoteServerName</code> includes a specified port, the SSH Key cannot be found under Windows since paths on Windows cannot contain a colon. Therefore, there will be issues when looking for the Key path, which requires modifications in the engine to resolve.<br>Modify the above code:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SSHPrivateKeyLocation = <span class="built_in">TEXT</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">FString RealRemoteServerName = RemoteServerName;</span><br><span class="line"><span class="keyword">if</span>(RemoteServerName.<span class="built_in">Contains</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;:&quot;</span>)))</span><br><span class="line">&#123;</span><br><span class="line">    FString RemoteServerPort;</span><br><span class="line">    RemoteServerName.<span class="built_in">Split</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;:&quot;</span>),&amp;RealRemoteServerName,&amp;RemoteServerPort);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">const</span> FString DefaultKeyFilename = <span class="built_in">TEXT</span>(<span class="string">&quot;RemoteToolChainPrivate.key&quot;</span>);</span><br><span class="line"><span class="type">const</span> FString RelativeFilePathLocation = FPaths::<span class="built_in">Combine</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;SSHKeys&quot;</span>), *RealRemoteServerName, *RSyncUsername, *DefaultKeyFilename);</span><br></pre></td></tr></table></figure>

<p>Recompiling the engine can resolve this.</p>
<h3 id="Remote-Shader-Compilation-Key-Lookup-Bug"><a href="#Remote-Shader-Compilation-Key-Lookup-Bug" class="headerlink" title="Remote Shader Compilation Key Lookup Bug"></a>Remote Shader Compilation Key Lookup Bug</h3><blockquote>
<p>Note: Since version 4.26 and later, the engine version supports compiling Metal shaders on Windows, details can be found in the documents:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://docs.unrealengine.com/5.1/en-US/using-the-windows-metal-shader-compiler-for-ios-in-unreal-engine/">Using the Windows Metal Shader Compiler for iOS</a>。</li>
<li><a target="_blank" rel="noopener" href="https://developer.apple.com/download/all/?q=metal">Metal Developer Tools for Windows</a></li>
</ul>
</blockquote>
<p>In <code>Project Settings</code> - <code>Platforms</code> - <code>IOS</code>, enabling <code>Enable Remote Shader Compile</code>, if the build machine address includes a specified port, there will be issues in searching for the SSH Key:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Developer/Apple/MetalShaderFormat/Private/MetalShaderCompiler.cpp</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">IsRemoteBuildingConfigured</span><span class="params">(<span class="type">const</span> FShaderCompilerEnvironment* InEnvironment)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    GRemoteBuildServerSSHKey = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (InEnvironment != <span class="literal">nullptr</span> &amp;&amp; InEnvironment-&gt;RemoteServerData.<span class="built_in">Contains</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;SSHPrivateKeyOverridePath&quot;</span>)))</span><br><span class="line">    &#123;</span><br><span class="line">        GRemoteBuildServerSSHKey = InEnvironment-&gt;RemoteServerData[<span class="built_in">TEXT</span>(<span class="string">&quot;SSHPrivateKeyOverridePath&quot;</span>)];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (GRemoteBuildServerSSHKey.<span class="built_in">Len</span>() == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        GConfig-&gt;<span class="built_in">GetString</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;/Script/IOSRuntimeSettings.IOSRuntimeSettings&quot;</span>), <span class="built_in">TEXT</span>(<span class="string">&quot;SSHPrivateKeyOverridePath&quot;</span>), GRemoteBuildServerSSHKey, GEngineIni);</span><br><span class="line"></span><br><span class="line">        GConfig-&gt;<span class="built_in">GetString</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;/Script/IOSRuntimeSettings.IOSRuntimeSettings&quot;</span>), <span class="built_in">TEXT</span>(<span class="string">&quot;SSHPrivateKeyOverridePath&quot;</span>), GRemoteBuildServerSSHKey, GEngineIni);</span><br><span class="line">        <span class="keyword">if</span> (GRemoteBuildServerSSHKey.<span class="built_in">Len</span>() == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (!FParse::<span class="built_in">Value</span>(FCommandLine::<span class="built_in">Get</span>(), <span class="built_in">TEXT</span>(<span class="string">&quot;serverkey&quot;</span>), GRemoteBuildServerSSHKey) &amp;&amp; GRemoteBuildServerSSHKey.<span class="built_in">Len</span>() == <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (GRemoteBuildServerSSHKey.<span class="built_in">Len</span>() == <span class="number">0</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">// RemoteToolChain.cs in UBT looks in a few more places but the code in FIOSTargetSettingsCustomization::OnGenerateSSHKey() only puts the key in this location so just going with that to keep things simple</span></span><br><span class="line">                    FString Path = FPlatformMisc::<span class="built_in">GetEnvironmentVariable</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;APPDATA&quot;</span>));</span><br><span class="line">                    GRemoteBuildServerSSHKey = FString::<span class="built_in">Printf</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;%s\\Unreal Engine\\UnrealBuildTool\\SSHKeys\\%s\\%s\\RemoteToolChainPrivate.key&quot;</span>), *Path, *GRemoteBuildServerHost, *GRemoteBuildServerUser);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ...    </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>As you can see, the Key path is directly concatenated using <code>GRemoteBuildServerHost</code>, but if a port is specified in the configuration, the value of <code>GRemoteBuildServerHost</code> will be in the format <code>xxx.xx.xx.xx:1234</code>. However, on Windows, directory names cannot contain <code>:</code>, resulting in failure to locate the Key.</p>
<p>In the same file, in the <code>ExecRemoteProcess</code> function, there is no processing for cases involving a specified port:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">ExecRemoteProcess</span><span class="params">(<span class="type">const</span> TCHAR* Command, <span class="type">const</span> TCHAR* Params, int32* OutReturnCode, FString* OutStdOut, FString* OutStdErr)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">if</span> PLATFORM_MAC &amp;&amp; !UNIXLIKE_TO_MAC_REMOTE_BUILDING</span></span><br><span class="line">	<span class="keyword">return</span> FPlatformProcess::<span class="built_in">ExecProcess</span>(Command, Params, OutReturnCode, OutStdOut, OutStdErr);</span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line">	<span class="keyword">if</span> (GRemoteBuildServerHost.<span class="built_in">IsEmpty</span>())</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	FString CmdLine = <span class="built_in">FString</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;-i \&quot;&quot;</span>)) + GRemoteBuildServerSSHKey + <span class="built_in">TEXT</span>(<span class="string">&quot;\&quot; \&quot;&quot;</span>) + GRemoteBuildServerUser + <span class="string">&#x27;@&#x27;</span> + GRemoteBuildServerHost + <span class="built_in">TEXT</span>(<span class="string">&quot;\&quot; &quot;</span>) + Command + <span class="built_in">TEXT</span>(<span class="string">&quot; &quot;</span>) + (Params != <span class="literal">nullptr</span> ? Params : <span class="built_in">TEXT</span>(<span class="string">&quot;&quot;</span>));</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">ExecProcess</span>(*GSSHPath, *CmdLine, OutReturnCode, OutStdOut, OutStdErr);</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>This needs to be handled:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">ExecRemoteProcess</span><span class="params">(<span class="type">const</span> TCHAR* Command, <span class="type">const</span> TCHAR* Params, int32* OutReturnCode, FString* OutStdOut, FString* OutStdErr)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">if</span> PLATFORM_MAC &amp;&amp; !UNIXLIKE_TO_MAC_REMOTE_BUILDING</span></span><br><span class="line">	<span class="keyword">return</span> FPlatformProcess::<span class="built_in">ExecProcess</span>(Command, Params, OutReturnCode, OutStdOut, OutStdErr);</span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line">	<span class="keyword">if</span> (GRemoteBuildServerHost.<span class="built_in">IsEmpty</span>())</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	FString RemoteBuildServerIP = GRemoteBuildServerHost;</span><br><span class="line">	FString RemoteBuildServerPort = <span class="built_in">TEXT</span>(<span class="string">&quot;22&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span>(GRemoteBuildServerHost.<span class="built_in">Contains</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;:&quot;</span>)))</span><br><span class="line">	&#123;</span><br><span class="line">		GRemoteBuildServerHost.<span class="built_in">Split</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;:&quot;</span>),&amp;RemoteBuildServerIP,&amp;RemoteBuildServerPort);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	FString CmdLine = <span class="built_in">FString</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;-i \&quot;&quot;</span>)) + GRemoteBuildServerSSHKey + <span class="built_in">TEXT</span>(<span class="string">&quot;\&quot; \&quot;&quot;</span>) + GRemoteBuildServerUser + <span class="string">&#x27;@&#x27;</span> + RemoteBuildServerIP + <span class="built_in">TEXT</span>(<span class="string">&quot;\&quot; &quot;</span>) <span class="built_in">TEXT</span>(<span class="string">&quot;-p &quot;</span>) + RemoteBuildServerPort +<span class="built_in">TEXT</span>(<span class="string">&quot; &quot;</span>)+ Command + <span class="built_in">TEXT</span>(<span class="string">&quot; &quot;</span>) + (Params != <span class="literal">nullptr</span> ? Params : <span class="built_in">TEXT</span>(<span class="string">&quot;&quot;</span>));</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">ExecProcess</span>(*GSSHPath, *CmdLine, OutReturnCode, OutStdOut, OutStdErr);</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Signing-Errors"><a href="#Signing-Errors" class="headerlink" title="Signing Errors"></a>Signing Errors</h3><h4 id="Developer-Signature-Expired"><a href="#Developer-Signature-Expired" class="headerlink" title="Developer Signature Expired"></a>Developer Signature Expired</h4><p>If you see the following logs during packaging, it indicates that the iOS certificate has expired:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/Users/buildmachine/UE4/Builds/lipengzha-PCb/C/BuildAgent/workspace/FGameEngine/Client/Intermediate/ProjectFilesIOS/FGame.xcodeproj: error: No certificate for team &#x27;6H9S4KQ3C9&#x27; matching &#x27;iPhone Developer: Created via API (7ZQD4FUW73)&#x27; found: Select a different signing certificate for CODE_SIGN_IDENTITY, a team that matches your selected certificate, or switch to automatic provisioning. (in target &#x27;FGame&#x27; from project &#x27;FGame&#x27;)</span><br><span class="line">warning: Run script build phase &#x27;Sign Manual Frameworks&#x27; will be run during every build because it does not specify any outputs. To address this warning, either add output dependencies to the script phase, or configure it to run in every build by unchecking &quot;Based on dependency analysis&quot; in the script phase. (in target &#x27;FGame&#x27;)</span><br><span class="line">** BUILD FAILED **</span><br></pre></td></tr></table></figure>

<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2023/20230906095818.png"></p>
<p>Simply updating the certificate will resolve the issue.</p>
<h4 id="Apple-Intermediate-Certificate-Expired"><a href="#Apple-Intermediate-Certificate-Expired" class="headerlink" title="Apple Intermediate Certificate Expired"></a>Apple Intermediate Certificate Expired</h4><p>If the following error appears when packaging on Windows:</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">IPP ERROR: Application exception: System.Security.Cryptography.CryptographicException</span><br><span class="line">A certificate chain could not be built to a trusted root authority.</span><br></pre></td></tr></table></figure>

<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2023/202309080942174.png"></p>
<p>This is also caused by the expiration of an Apple intermediate certificate; updating it will suffice. See: <a target="_blank" rel="noopener" href="https://imzlp.com/posts/11956/#%E6%96%B9%E6%B3%95%E4%BA%8C">BuildGraph: Building a binary engine supporting multi-platform packaging</a></p>
<h3 id="Notes"><a href="#Notes" class="headerlink" title="Notes"></a>Notes</h3><p>When conducting remote iOS builds on Windows, several constraints apply:</p>
<ol>
<li>The individual file size within the IPA cannot exceed 2G, such as Pak files.</li>
<li>The total size of the IPA cannot exceed 4G.</li>
</ol>
<p>Otherwise, you may encounter the following error:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">IPP ERROR: Application exception: Ionic.Zip.ZipException: Compressed or Uncompressed size, or offset exceeds the maximum value. Consider setting the UseZip64WhenSaving property on the ZipFile instance.</span><br><span class="line">       Ionic.Zip.ZipEntry.SetZip64Flags()</span><br><span class="line">       Ionic.Zip.ZipEntry.PostProcessOutput(Stream s)</span><br><span class="line">       Ionic.Zip.ZipEntry._WriteEntryData(Stream s)</span><br><span class="line">       Ionic.Zip.ZipEntry.Write(Stream s)</span><br><span class="line">       Ionic.Zip.ZipFile.Save()</span><br><span class="line">       iPhonePackager.FileOperations.ZipFileSystem.Close()</span><br><span class="line">       iPhonePackager.CookTime.RepackageIPAFromStub()</span><br><span class="line">       iPhonePackager.Program.Main(String[] args)</span><br></pre></td></tr></table></figure>

<h2 id="Mac-Development-Environment"><a href="#Mac-Development-Environment" class="headerlink" title="Mac Development Environment"></a>Mac Development Environment</h2><h3 id="Installing-UE-on-MacOS"><a href="#Installing-UE-on-MacOS" class="headerlink" title="Installing UE on MacOS"></a>Installing UE on MacOS</h3><p>UE requires the partition format of MacOS to be <strong>case-insensitive</strong> (otherwise, EpicLauncher cannot install), and the engine installation requires the system version to be greater than <code>10.13.5</code>; otherwise, there may be crashes and unsupported situations (attempting to ignore errors may not result in successful installation).<br>Compiling relies on Xcode, similar to how it depends on VS, necessitating the installation of the compilation environment.<br>If an error message appears while creating a project after installing UE and Xcode:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">An error occurred <span class="keyword">while</span> trying to generate project files.</span><br><span class="line">Running Mono...</span><br><span class="line">Setting up Mono</span><br><span class="line">/Users/Shared/UnrealEngine/<span class="number">4.22</span>/Engine /Users/Shared/UnrealEngine/<span class="number">4.22</span>/Engine/Binaries/Mac</span><br><span class="line">Discovering modules, targets <span class="keyword">and</span> source code <span class="keyword">for</span> project...</span><br><span class="line">Compiling with non-<span class="function">standard <span class="title">Xcode</span> <span class="params">(xcode-select)</span>: /Library/Developer/CommandLineTools/</span></span><br><span class="line"><span class="function">Triggered an exception while looking for SDK directory in Xcode.app</span></span><br><span class="line"><span class="function">System.IO.DirectoryNotFoundException: Directory <span class="string">&#x27;/Library/Developer/CommandLineTools/Platforms/MacOSX.platform/Developer/SDKs&#x27;</span> not found.</span></span><br><span class="line"><span class="function">  at System.IO.Directory.ValidateDirectoryListing (System.String path, System.String searchPattern, System.Boolean&amp; stop) [<span class="number">0x00000</span>] in &lt;filename unknown&gt;:<span class="number">0</span> </span></span><br><span class="line"><span class="function">  at System.IO.Directory.GetFileSystemEntries (System.String path, System.String searchPattern) [<span class="number">0x00000</span>] in &lt;filename unknown&gt;:<span class="number">0</span> </span></span><br><span class="line"><span class="function">  at System.IO.Directory.GetDirectories (System.String path, System.String searchPattern) [<span class="number">0x00000</span>] in &lt;filename unknown&gt;:<span class="number">0</span> </span></span><br><span class="line"><span class="function">  at System.IO.Directory.GetDirectories (System.String path) [<span class="number">0x00000</span>] in &lt;filename unknown&gt;:<span class="number">0</span> </span></span><br><span class="line"><span class="function">  at UnrealBuildTool.AppleToolChain.SelectSDK (System.String BaseSDKDir, System.String OSPrefix, System.String&amp; PlatformSDKVersion, Boolean bVerbose) [<span class="number">0x00000</span>] in &lt;filename unknown&gt;:<span class="number">0</span> </span></span><br><span class="line"><span class="function">ERROR: Invalid SDK MacOSX.sdk, not found in /Library/Developer/CommandLineTools/Platforms/MacOSX.platform/Developer/SDKs</span></span><br></pre></td></tr></table></figure>

<p>You should install <a target="_blank" rel="noopener" href="https://download.developer.apple.com/Developer_Tools/Command_Line_Tools_macOS_10.13_for_Xcode_9.3/Command_Line_Tools_macOS_10.13_for_Xcode_9.3.dmg">Xcode Command Line Tools</a>, and then execute the following command:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo <span class="built_in">ln</span> -s /Applications/Xcode.app/Contents/Developer/Platforms /Library/Developer/CommandLineTools/</span><br></pre></td></tr></table></figure>

<ul>
<li><a target="_blank" rel="noopener" href="https://forums.unrealengine.com/development-discussion/c-gameplay-programming/102037-os-x-can-t-create-new-project">OS X: Can’t create new project</a></li>
<li><a target="_blank" rel="noopener" href="https://answers.unrealengine.com/questions/777184/i-cant-build-a-c-program-on-my-mac-with-xcode.html">I can’t build a c++ program on my Mac with Xcode</a></li>
</ul>
<h3 id="Modify-SSHD-Default-Port-on-Mac"><a href="#Modify-SSHD-Default-Port-on-Mac" class="headerlink" title="Modify SSHD Default Port on Mac"></a>Modify SSHD Default Port on Mac</h3><p>Sometimes internal networks have port restrictions, and ports below xxxx are not typically open, so how to conduct remote builds when port 22 is restricted? Modify the default port for SSH!</p>
<p>Edit the ssh port in the <code>/etc/services</code> file:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vim /etc/services</span><br></pre></td></tr></table></figure>

<p>Change the SSH port to another value:</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh              22/udp     # SSH Remote Login Protocol</span><br><span class="line">ssh              22/tcp     # SSH Remote Login Protocol</span><br></pre></td></tr></table></figure>

<p>Change to:</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh              2222/udp     # SSH Remote Login Protocol</span><br><span class="line">ssh              2222/tcp     # SSH Remote Login Protocol</span><br></pre></td></tr></table></figure>

<p>Save and exit. You will also need to reload the configuration to make the new port effective:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo launchctl unload /System/Library/LaunchDaemons/ssh.plist</span><br><span class="line">sudo launchctl load -w /System/Library/LaunchDaemons/ssh.plist</span><br></pre></td></tr></table></figure>

<p>Then test if the port is connectable:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh localhost -p 2222</span><br></pre></td></tr></table></figure>

<ul>
<li><a target="_blank" rel="noopener" href="https://superuser.com/questions/1398824/cant-change-port-listen-on-macos-x-mojave-for-built-in-ssh">Can’t change PORT to listen on macOS X Mojave for built-in SSH</a></li>
</ul>
<h3 id="Enable-Multi-threading-Compilation-for-Xcode"><a href="#Enable-Multi-threading-Compilation-for-Xcode" class="headerlink" title="Enable Multi-threading Compilation for Xcode"></a>Enable Multi-threading Compilation for Xcode</h3><p>First, check the Mac’s hardware configuration:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sysctl machdep.cpu</span><br></pre></td></tr></table></figure>

<p>Find the field <code>machdep.cpu.core_count</code>, where the value is the number of cores on the Mac.</p>
<p>Then you can enable multi-threading for Xcode, with the number being cores * 2; for instance, if you have 8 cores, you can enable 16 threads:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defaults write com.apple.Xcode PBXNumberOfParallelBuildSubtasks 16</span><br></pre></td></tr></table></figure>
<h3 id="Built-in-Frameworks-in-Mac-System"><a href="#Built-in-Frameworks-in-Mac-System" class="headerlink" title="Built-in Frameworks in Mac System"></a>Built-in Frameworks in Mac System</h3><p>Sometimes it is necessary to introduce system frameworks in UE modules. What are the default frameworks included in Mac? You can check in the following way. I am using system version <code>10.15.2</code>, which can be checked with <code>sw_vers</code>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">buildmachine@LIPENGZHA-MC0 ~ % sw_vers</span><br><span class="line">ProductName:    Mac OS X</span><br><span class="line">ProductVersion: 10.15.2</span><br><span class="line">BuildVersion:   19C57</span><br></pre></td></tr></table></figure>

<p>The built-in frameworks are located in the following directory:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/System/Library/Frameworks</span><br></pre></td></tr></table></figure>

<p>The <code>10.15.2</code> version includes the following frameworks:</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">AGL.framework                           ColorSync.framework                     CoreVideo.framework                    GameKit.framework</span><br><span class="line">LinkPresentation.framework              OpenGL.framework                        SoundAnalysis.framework</span><br><span class="line">AVFoundation.framework                  Combine.framework                       CoreWLAN.framework                     GameplayKit.framework</span><br><span class="line">LocalAuthentication.framework           PCSC.framework                          Speech.framework</span><br><span class="line">AVKit.framework                         Contacts.framework                      CryptoKit.framework                    HIDDriverKit.framework</span><br><span class="line">MapKit.framework                        PDFKit.framework                        SpriteKit.framework</span><br><span class="line">Accelerate.framework                    ContactsUI.framework                    CryptoTokenKit.framework               Hypervisor.framework</span><br><span class="line">MediaAccessibility.framework            PencilKit.framework                     StoreKit.framework</span><br><span class="line">Accounts.framework                      CoreAudio.framework                     DVDPlayback.framework                  ICADevices.framework</span><br><span class="line">MediaLibrary.framework                  Photos.framework                        SwiftUI.framework</span><br><span class="line">AdSupport.framework                     CoreAudioKit.framework                  DeviceCheck.framework                  IMServicePlugIn.framework</span><br><span class="line">MediaPlayer.framework                   PhotosUI.framework                      SyncServices.framework</span><br><span class="line">AddressBook.framework                   CoreAudioTypes.framework                DirectoryService.framework             IOBluetooth.framework</span><br><span class="line">MediaToolbox.framework                  PreferencePanes.framework               System.framework</span><br><span class="line">AppKit.framework                        CoreBluetooth.framework                 DiscRecording.framework                IOBluetoothUI.framework</span><br><span class="line">Message.framework                       PushKit.framework                       SystemConfiguration.framework</span><br><span class="line">AppleScriptKit.framework                CoreData.framework                      DiscRecordingUI.framework              IOKit.framework</span><br><span class="line">Metal.framework                         Python.framework                        SystemExtensions.framework</span><br><span class="line">AppleScriptObjC.framework               CoreDisplay.framework                   DiskArbitration.framework              IOSurface.framework</span><br><span class="line">MetalKit.framework                      QTKit.framework                         TWAIN.framework</span><br><span class="line">ApplicationServices.framework           CoreFoundation.framework                DriverKit.framework                    IOUSBHost.framework</span><br><span class="line">MetalPerformanceShaders.framework       Quartz.framework                        Tcl.framework</span><br><span class="line">AudioToolbox.framework                  CoreGraphics.framework                  EventKit.framework                     IdentityLookup.framework</span><br><span class="line">MetricKit.framework                     QuartzCore.framework                    Tk.framework</span><br><span class="line">AudioUnit.framework                     CoreHaptics.framework                   ExceptionHandling.framework            ImageCaptureCore.framework</span><br><span class="line">ModelIO.framework                       QuickLook.framework                     USBDriverKit.framework</span><br><span class="line">AudioVideoBridging.framework            CoreImage.framework                     ExecutionPolicy.framework              ImageIO.framework</span><br><span class="line">MultipeerConnectivity.framework         QuickLookThumbnailing.framework         UserNotifications.framework</span><br><span class="line">AuthenticationServices.framework        CoreLocation.framework                  ExternalAccessory.framework            InputMethodKit.framework</span><br><span class="line">NaturalLanguage.framework               RealityKit.framework                    VideoDecodeAcceleration.framework</span><br><span class="line">Automator.framework                     CoreMIDI.framework                      FWAUserLib.framework                   InstallerPlugins.framework</span><br><span class="line">NetFS.framework                         Ruby.framework                          VideoSubscriberAccount.framework</span><br><span class="line">BackgroundTasks.framework               CoreMIDIServer.framework                FileProvider.framework                 InstantMessage.framework</span><br><span class="line">Network.framework                       SafariServices.framework                VideoToolbox.framework</span><br><span class="line">BusinessChat.framework                  CoreML.framework                        FileProviderUI.framework               Intents.framework</span><br><span class="line">NetworkExtension.framework              SceneKit.framework                      Vision.framework</span><br><span class="line">CFNetwork.framework                     CoreMedia.framework                     FinderSync.framework                   JavaFrameEmbedding.framework</span><br><span class="line">NetworkingDriverKit.framework           ScreenSaver.framework                   WebKit.framework</span><br><span class="line">CalendarStore.framework                 CoreMediaIO.framework                   ForceFeedback.framework                JavaScriptCore.framework</span><br><span class="line">NotificationCenter.framework            ScriptingBridge.framework               iTunesLibrary.framework</span><br><span class="line">CallKit.framework                       CoreMotion.framework                    Foundation.framework                   JavaVM.framework</span><br><span class="line">OSAKit.framework                        Security.framework                      vecLib.framework</span><br><span class="line">Carbon.framework                        CoreServices.framework                  GLKit.framework                        Kerberos.framework</span><br><span class="line">OSLog.framework                         SecurityFoundation.framework            vmnet.framework</span><br><span class="line">CloudKit.framework                      CoreSpotlight.framework                 GLUT.framework                         Kernel.framework</span><br><span class="line">OpenAL.framework                        SecurityInterface.framework</span><br><span class="line">Cocoa.framework                         CoreTelephony.framework                 GSS.framework                          LDAP.framework</span><br><span class="line">OpenCL.framework                        ServiceManagement.framework</span><br><span class="line">Collaboration.framework                 CoreText.framework                      GameController.framework               LatentSemanticMapping.framework</span><br><span class="line">OpenDirectory.framework                 Social.framework</span><br><span class="line">```### Installing Command Line Tools</span><br><span class="line"></span><br><span class="line">&gt; Xcode&#x27;s metal shader compiler was not found, verify Xcode has been installed on this Mac and that it has been selected in Xcode &gt; Preferences &gt; Locations &gt; Command-line Tools.</span><br><span class="line"></span><br><span class="line">Related issues:</span><br><span class="line"></span><br><span class="line">- [Unreal Engine inaccurately reports &quot;XCode is too old&quot; when CommandLineTools installed](https://answers.unrealengine.com/questions/723143/unreal-engine-inaccurately-reports-xcode-is-too-ol-1.html)</span><br><span class="line"></span><br><span class="line">To install XCode and Command Line Tools for Xcode offline, you can download from Apple&#x27;s developer website: [More Downloads for Apple Developers](https://developer.apple.com/download/more/)</span><br><span class="line"></span><br><span class="line">After installing `Command Line Tools`, if the error still appears during cooking, you need to execute the following command (first ensure that the `/Library/Developer/CommandLineTools` path exists; generally, this is the default installation path for `Command Line Tools`):</span><br><span class="line"></span><br><span class="line">```bash</span><br><span class="line">$ sudo xcode-select -s /Library/Developer/CommandLineTools</span><br></pre></td></tr></table></figure>

<p>After setting <code>CommandLineTools</code>, you may encounter a message during packaging:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ERROR: Invalid SDK MacOSX.sdk, <span class="keyword">not</span> found in /Library/Developer/CommandLineTools/Platforms/MacOSX.platform/Developer/SDKs</span><br></pre></td></tr></table></figure>

<p>This is because, after setting it as <code>CommandLineTools</code> via <code>xcode-select</code>, the libraries in Xcode are no longer found during packaging. The solution is to create a symbolic link for the <code>Platforms</code> directory from Xcode in the <code>CommandLineTools</code> directory:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">ln</span> -s /Applications/Xcode.app/Contents/Developer/Platforms /Library/Developer/CommandLineTools/Platforms</span><br></pre></td></tr></table></figure>

<h3 id="actool-Error"><a href="#actool-Error" class="headerlink" title="actool Error"></a>actool Error</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">UATHelper: Packaging (iOS):   xcrun: error: unable to find utility &quot;actool&quot;, not a developer tool or in PATH</span><br><span class="line">PackagingResults: Error: unable to find utility &quot;actool&quot;, not a developer tool or in PATH</span><br></pre></td></tr></table></figure>

<p>This error occurs because, after setting <code>CommandLineTool</code> as the default command line tool, the <code>CommandLinTool/use/bin</code> directory does not contain tools like <code>actool</code>. This is a frustrating problem; using Xcode as the default command line tool leads to cooking failures, while using CommandLineTool creates issues during compilation. My workaround is to link <code>/Applications/Xcode.app/Contents/Developer/usr/bin</code> to <code>/Library/Developer/CommandLineTools/usr</code>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Of course, back up CommandLineTool/usr/bin first</span></span><br><span class="line">$ <span class="built_in">mv</span> /Library/Developer/CommandLineTools/usr/bin /Library/Developer/CommandLineTools/usr/Command_bin</span><br><span class="line"><span class="comment"># Create symbolic link for Xcode&#x27;s bin directory</span></span><br><span class="line">$ sudo <span class="built_in">ln</span> -s /Applications/Xcode.app/Contents/Developer/usr/bin /Library/Developer/CommandLineTools/usr/bin</span><br></pre></td></tr></table></figure>

<h3 id="Remove-Restrictions-on-macOS-Installed-Software"><a href="#Remove-Restrictions-on-macOS-Installed-Software" class="headerlink" title="Remove Restrictions on macOS Installed Software"></a>Remove Restrictions on macOS Installed Software</h3><ul>
<li>Allow any source, run third-party applications</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo spctl --master-disable</span><br></pre></td></tr></table></figure>

<ul>
<li>Install grayed-out dmg</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdiutil attach <span class="comment">#dmg filename#</span></span><br></pre></td></tr></table></figure>

<ul>
<li><a target="_blank" rel="noopener" href="http://16bing.com/2017/04/06/mac-security-anywhere/">Open macOS Sierra to allow “any source” option, run third-party applications</a></li>
<li><a target="_blank" rel="noopener" href="http://www.voidcn.com/article/p-gtvyrrux-bau.html">Unable to install gray mac dmg files</a></li>
</ul>
<h3 id="macOS-Read-Write-NTFS"><a href="#macOS-Read-Write-NTFS" class="headerlink" title="macOS Read/Write NTFS"></a>macOS Read/Write NTFS</h3><p>After installing macOS, I found that macOS could read NTFS files but could not write to them, which is quite frustrating. It was said that this is due to Microsoft’s restrictions, but macOS itself has the read/write capability, which is just disabled. You can enable it via the following method.</p>
<p>First, execute <code>diskutil list</code> in the terminal to view disk information:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">visionsmile$ diskutil list</span><br><span class="line">/dev/disk0 (internal, physical):</span><br><span class="line">   <span class="comment">#:                       TYPE NAME                    SIZE       IDENTIFIER</span></span><br><span class="line">   0:      GUID_partition_scheme                        *240.1 GB   disk0</span><br><span class="line">   1:                        EFI                         312.5 MB   disk0s1</span><br><span class="line">   2:         Microsoft Reserved                         134.2 MB   disk0s2</span><br><span class="line">   3:       Microsoft Basic Data Windows                 164.3 GB   disk0s3</span><br><span class="line">   4:                 Apple_APFS Container disk1         75.3 GB    disk0s4</span><br><span class="line"></span><br><span class="line">/dev/disk1 (synthesized):</span><br><span class="line">   <span class="comment">#:                       TYPE NAME                    SIZE       IDENTIFIER</span></span><br><span class="line">   0:      APFS Container Scheme -                      +75.3 GB    disk1</span><br><span class="line">                                 Physical Store disk0s4</span><br><span class="line">   1:                APFS Volume OSX                     34.2 GB    disk1s1</span><br><span class="line">   2:                APFS Volume Preboot                 21.1 MB    disk1s2</span><br><span class="line">   3:                APFS Volume Recovery                509.8 MB   disk1s3</span><br><span class="line">   4:                APFS Volume VM                      2.1 GB     disk1s4</span><br><span class="line"></span><br><span class="line">/dev/disk2 (external, physical):</span><br><span class="line">   <span class="comment">#:                       TYPE NAME                    SIZE       IDENTIFIER</span></span><br><span class="line">   0:      GUID_partition_scheme                        *4.0 TB     disk2</span><br><span class="line">   1:         Microsoft Reserved                         134.2 MB   disk2s1</span><br><span class="line">   2:       Microsoft Basic Data Document                4.0 TB     disk2s2</span><br><span class="line"></span><br><span class="line">/dev/disk3 (internal, physical):</span><br><span class="line">   <span class="comment">#:                       TYPE NAME                    SIZE       IDENTIFIER</span></span><br><span class="line">   0:     FDisk_partition_scheme                        *1.0 TB     disk3</span><br><span class="line">   1:               Windows_NTFS Documents2              1.0 TB     disk3s1</span><br></pre></td></tr></table></figure>

<p>You need to note the NAME information of the NTFS disk; here I have three NTFS partitions: <code>windows</code>/<code>Documents</code>/<code>Documents2</code>.</p>
<p>Next, execute the command to update the fstab file:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/fstab</span><br></pre></td></tr></table></figure>

<p>Enter the following content and replace what comes after <code>LABEL=</code> with the names of the partitions recorded above:</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">LABEL=Windows none ntfs rw,auto,nobrowse</span><br><span class="line">LABEL=Documents none ntfs rw,auto,nobrowse</span><br><span class="line">LABEL=Documents2 none ntfs rw,auto,nobrowse</span><br></pre></td></tr></table></figure>

<p>After rebooting, you will be able to write to the NTFS partitions. Note: After rebooting, the removable disk will not display on the desktop; you must open Finder to see it.</p>
<h2 id="Issues-Encountered-in-UE4-Projects-on-Mac"><a href="#Issues-Encountered-in-UE4-Projects-on-Mac" class="headerlink" title="Issues Encountered in UE4 Projects on Mac"></a>Issues Encountered in UE4 Projects on Mac</h2><h3 id="Cook-Errors"><a href="#Cook-Errors" class="headerlink" title="Cook Errors"></a>Cook Errors</h3><p>When encountering an error during cooking, the error message is:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CookResults: Error: Package Native Shader Library failed for MacNoEditor.</span><br></pre></td></tr></table></figure>

<p>This is caused by the setting in <code>Project Settings</code>-<code>Packing</code>-<code>Shared Material Native Library</code>. Turning this off will resolve the issue.</p>
<blockquote>
<p>PS: I saw a similar bug submission in UE’s issue tracker, but it was marked as fixed in 4.18: <a target="_blank" rel="noopener" href="https://issues.unrealengine.com/issue/UE-49105">UE-49105</a>. I don’t know why this issue still exists.</p>
</blockquote>
<h2 id="UPL-Application-in-iOS"><a href="#UPL-Application-in-iOS" class="headerlink" title="UPL Application in iOS"></a>UPL Application in iOS</h2><p><a target="_blank" rel="noopener" href="https://docs.unrealengine.com/en-US/Platforms/Mobile/UnrealPluginLanguage/index.html">Unreal Plugin Language</a> is a XML-based language provided by UE to control the process of building Apk and ipa, such as modifying <code>AndroidManifest.xml</code> or <code>info.plist</code>.</p>
<h3 id="Analysis-of-plist-Generation-Process"><a href="#Analysis-of-plist-Generation-Process" class="headerlink" title="Analysis of plist Generation Process"></a>Analysis of plist Generation Process</h3><p>In the <code>UEDeployIOS.cs</code> file, the <code>GeneratePList</code> function constructs the UPL object using the incoming <code>UPLScripts</code>:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="built_in">bool</span> <span class="title">GeneratePList</span>(<span class="params">FileReference ProjectFile, UnrealTargetConfiguration Config, <span class="built_in">string</span> ProjectDirectory, <span class="built_in">bool</span> bIsUE4Game, <span class="built_in">string</span> GameName, <span class="built_in">bool</span> bIsClient, <span class="built_in">string</span> ProjectName, <span class="built_in">string</span> InEngineDir, <span class="built_in">string</span> AppDirectory, List&lt;<span class="built_in">string</span>&gt; UPLScripts, VersionNumber SdkVersion, <span class="built_in">string</span> BundleID, <span class="built_in">bool</span> bBuildAsFramework, <span class="keyword">out</span> <span class="built_in">bool</span> bSupportsPortrait, <span class="keyword">out</span> <span class="built_in">bool</span> bSupportsLandscape, <span class="keyword">out</span> <span class="built_in">bool</span> bSkipIcons</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">// remember name with -IOS-Shipping, etc</span></span><br><span class="line">	<span class="comment">// string ExeName = GameName;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// strip out the markup</span></span><br><span class="line">	GameName = GameName.Split(<span class="string">&quot;-&quot;</span>.ToCharArray())[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">	List&lt;<span class="built_in">string</span>&gt; ProjectArches = <span class="keyword">new</span> List&lt;<span class="built_in">string</span>&gt;();</span><br><span class="line">	ProjectArches.Add(<span class="string">&quot;None&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">string</span> BundlePath;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// get the receipt</span></span><br><span class="line">	<span class="keyword">if</span> (bIsUE4Game)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// ReceiptFilename = TargetReceipt.GetDefaultPath(UnrealBuildTool.EngineDirectory, &quot;UE4Game&quot;, UnrealTargetPlatform.IOS, Config, &quot;&quot;);</span></span><br><span class="line">		BundlePath = Path.Combine(UnrealBuildTool.EngineDirectory.ToString(), <span class="string">&quot;Intermediate&quot;</span>, <span class="string">&quot;IOS-Deploy&quot;</span>, <span class="string">&quot;UE4Game&quot;</span>, Config.ToString(), <span class="string">&quot;Payload&quot;</span>, <span class="string">&quot;UE4Game.app&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// ReceiptFilename = TargetReceipt.GetDefaultPath(new DirectoryReference(ProjectDirectory), GameName, UnrealTargetPlatform.IOS, Config, &quot;&quot;);</span></span><br><span class="line">		BundlePath = AppDirectory;<span class="comment">//Path.Combine(ProjectDirectory, &quot;Binaries&quot;, &quot;IOS&quot;, &quot;Payload&quot;, ProjectName + &quot;.app&quot;);</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">string</span> RelativeEnginePath = UnrealBuildTool.EngineDirectory.MakeRelativeTo(DirectoryReference.GetCurrentDirectory());</span><br><span class="line"></span><br><span class="line">	UnrealPluginLanguage UPL = <span class="keyword">new</span> UnrealPluginLanguage(ProjectFile, UPLScripts, ProjectArches, <span class="string">&quot;&quot;</span>, <span class="string">&quot;&quot;</span>, UnrealTargetPlatform.IOS);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Passing in true for distribution is not ideal here but given the way that ios packaging happens and this call chain it seems unavoidable for now, maybe there is a way to correctly pass it in that I can&#x27;t find?</span></span><br><span class="line">	UPL.Init(ProjectArches, <span class="literal">true</span>, RelativeEnginePath, BundlePath, ProjectDirectory, Config.ToString(), <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> GenerateIOSPList(ProjectFile, Config, ProjectDirectory, bIsUE4Game, GameName, bIsClient, ProjectName, InEngineDir, AppDirectory, SdkVersion, UPL, BundleID, bBuildAsFramework, <span class="keyword">out</span> bSupportsPortrait, <span class="keyword">out</span> bSupportsLandscape, <span class="keyword">out</span> bSkipIcons);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>In the final call of <a target="_blank" rel="noopener" href="https://github.com/EpicGames/UnrealEngine/blob/283e412aa843210f2d6e9ed0236861cf749b3429/Engine/Source/Programs/UnrealBuildTool/Platform/IOS/UEDeployIOS.cs#L198">GeneratedIOSList</a>, it constructs the default plist content, reads from <code>Additional Plist Data</code>, and calls UPL to handle the plist content, with UPL being processed last.</p>
<p>It is important to note that in the <code>GeneratedPList</code> function, all UPL.xml files added across all modules are fetched via <a target="_blank" rel="noopener" href="https://github.com/EpicGames/UnrealEngine/blob/283e412aa843210f2d6e9ed0236861cf749b3429/Engine/Source/Programs/UnrealBuildTool/Platform/IOS/UEDeployIOS.cs#L760">GeneratedIOSList</a>, with these XML files merged together. The merge order is based on the order of <code>AdditionalProperties</code>, with the last added UPL executing last. If multiple UPL operations are used in a project, you need to pay attention to the order.</p>
<h3 id="Intervening-in-the-IPA-Generation-Process-Operating-Plist"><a href="#Intervening-in-the-IPA-Generation-Process-Operating-Plist" class="headerlink" title="Intervening in the IPA Generation Process: Operating Plist"></a>Intervening in the IPA Generation Process: Operating Plist</h3><p>The ipa package for iOS always contains a plist file, which can be used to configure certain properties of the app. Apple’s developer documentation provides detailed descriptions of each supported key: <a target="_blank" rel="noopener" href="https://developer.apple.com/library/archive/documentation/General/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html#//apple_ref/doc/uid/TP40009252-SW10">iOS Keys</a></p>
<p>The default packaging in UE 4.25.1 generates a plist file like the following: <a href="info.plist">info.plist</a>. In some special requirements, elements need to be added, modified, or deleted from this plist.</p>
<p>In UE’s project settings, elements can be added to the plist. In <code>Project Settings</code>-<code>Platform</code>-<code>iOS</code>-<code>Additional Plist data</code>, a string can be entered, which will be inserted into the plist file:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">key</span>&gt;</span>AdditionalElementAAA<span class="tag">&lt;/<span class="name">key</span>&gt;</span>\n<span class="tag">&lt;<span class="name">string</span>&gt;</span>this key is a test element.<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>The <code>\n</code> in the middle is a formatting code used for a new line.<br><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/1948/ue4-project-ios-additional-plist-data.webp"></p>
<p>If you want to modify or delete elements in the plist, you need to write logic using UPL (of course, UPL can also be used to add elements; this approach is recommended).</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">root</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">log</span> <span class="attr">text</span>=<span class="string">&quot;UPL Example adding element to plist...&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">trace</span> <span class="attr">enable</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">iosPListUpdates</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">addElements</span> <span class="attr">tag</span>=<span class="string">&quot;dict&quot;</span> <span class="attr">once</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">key</span>&gt;</span>AdditionalElementAAA<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">string</span>&gt;</span>this key is a test element.<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">addElements</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">iosPListUpdates</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>The above is used to add elements, and the content is the same as directly writing to <code>Additional Plist data</code>.</p>
<p>Iterating through the keys in plist:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">root</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">log</span> <span class="attr">text</span>=<span class="string">&quot;UPL Example...&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">trace</span> <span class="attr">enable</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">iosPListUpdates</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">loopElements</span> <span class="attr">tag</span>=<span class="string">&quot;dict&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">loopElements</span> <span class="attr">tag</span>=<span class="string">&quot;$&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">setStringFromTag</span> <span class="attr">result</span>=<span class="string">&quot;TagName&quot;</span> <span class="attr">tag</span>=<span class="string">&quot;$&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">setBoolIsEqual</span> <span class="attr">result</span>=<span class="string">&quot;bIsKey&quot;</span> <span class="attr">arg1</span>=<span class="string">&quot;$S(TagName)&quot;</span> <span class="attr">arg2</span>=<span class="string">&quot;key&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">if</span> <span class="attr">condition</span>=<span class="string">&quot;bIsKey&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">true</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">log</span> <span class="attr">text</span>=<span class="string">&quot;$S(TagName):$S(TagValue)&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">true</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">loopElements</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">loopElements</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">iosPListUpdates</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Note: The current element is referenced by <code>tag = &quot;$&quot;</code>.</p>
<p>During compilation, the following log will appear:</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">UPL: /Users/buildmachine/UE4/Builds/lipengzha-PC1/C/BuildAgent/workspace/PackageFGameClient/FGame/Plugins/UPLExample/Source/UPLExample/ThirdParty/IOS/IOS_UPL.xml</span><br><span class="line">UPL Init: None</span><br><span class="line">UPL Example adding element to plist...</span><br><span class="line">key : CFBundleURLTypes</span><br><span class="line">key : CFBundleDevelopmentRegion</span><br><span class="line">key : CFBundleDisplayName</span><br><span class="line">key : CFBundleExecutable</span><br><span class="line">key : CFBundleIdentifier</span><br><span class="line">key : CFBundleInfoDictionaryVersion</span><br><span class="line">key : CFBundleName</span><br><span class="line">key : CFBundlePackageType</span><br><span class="line">key : CFBundleSignature</span><br><span class="line">key : CFBundleVersion</span><br><span class="line">key : CFBundleShortVersionString</span><br><span class="line">key : LSRequiresIPhoneOS</span><br><span class="line">key : UIStatusBarHidden</span><br><span class="line">key : UIFileSharingEnabled</span><br><span class="line">key : UIRequiresFullScreen</span><br><span class="line">key : UIViewControllerBasedStatusBarAppearance</span><br><span class="line">key : UIInterfaceOrientation</span><br><span class="line">key : UISupportedInterfaceOrientations</span><br><span class="line">key : UIRequiredDeviceCapabilities</span><br><span class="line">key : CFBundleIcons</span><br><span class="line">key : CFBundleIcons~ipad</span><br><span class="line">key : UILaunchStoryboardName</span><br><span class="line">key : CFBundleSupportedPlatforms</span><br><span class="line">key : MinimumOSVersion</span><br><span class="line">key : ITSAppUsesNonExemptEncryption</span><br><span class="line">key : NSLocationAlwaysAndWhenInUseUsageDescription</span><br><span class="line">key : NSLocationWhenInUseUsageDescription</span><br><span class="line">key : CFBundleURLName</span><br><span class="line">key : CFBundleURLSchemes</span><br><span class="line">key : CFBundlePrimaryIcon</span><br><span class="line">key : CFBundleIconFiles</span><br><span class="line">key : CFBundleIconName</span><br><span class="line">key : UIPrerenderedIcon</span><br><span class="line">key : CFBundlePrimaryIcon</span><br><span class="line">key : CFBundleIconFiles</span><br><span class="line">key : CFBundleIconName</span><br><span class="line">key : UIPrerenderedIcon</span><br></pre></td></tr></table></figure>

<p>Adding new elements is relatively simple, but deleting and modifying is more troublesome, requiring a traversal of all nodes and deleting the current element based on a match (note that the plist consists of key-value pairs; each <code>&lt;key&gt;&lt;/key&gt;</code> corresponds to a value element that must also be deleted, or the packaging will fail):</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">key</span>&gt;</span>BuildMachineOSBuild<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">string</span>&gt;</span>19C57<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>I wrote a convenient process to delete elements from the plist, allowing for multiple groups of elements to be easily removed:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">root</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">log</span> <span class="attr">text</span>=<span class="string">&quot;UPL Example adding element to plist...&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">trace</span> <span class="attr">enable</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">iosPListUpdates</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">addElements</span> <span class="attr">tag</span>=<span class="string">&quot;dict&quot;</span> <span class="attr">once</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">key</span>&gt;</span>AdditionalElementA<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">string</span>&gt;</span>this key is a AdditionalElementA element.<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">key</span>&gt;</span>AdditionalElementB<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">string</span>&gt;</span>this key is a AdditionalElementB element.<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">addElements</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">setString</span> <span class="attr">result</span>=<span class="string">&quot;NeedDeleteKey_1&quot;</span> <span class="attr">value</span>=<span class="string">&quot;AdditionalElementA&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setString</span> <span class="attr">result</span>=<span class="string">&quot;NeedDeleteKey_2&quot;</span> <span class="attr">value</span>=<span class="string">&quot;AdditionalElementB&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setInt</span> <span class="attr">result</span>=<span class="string">&quot;loopSumNum&quot;</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span>/&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">setInt</span> <span class="attr">result</span>=<span class="string">&quot;loopCount&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setBoolIsLessEqual</span> <span class="attr">result</span>=<span class="string">&quot;loopRun&quot;</span> <span class="attr">arg1</span>=<span class="string">&quot;$I(loopCount)&quot;</span> <span class="attr">arg2</span>=<span class="string">&quot;$I(loopSumNum)&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">while</span> <span class="attr">condition</span>=<span class="string">&quot;loopRun&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">log</span> <span class="attr">text</span>=<span class="string">&quot;count:$I(loopCount) SearchKey:$S(NeedDeleteKey_$I(loopCount))&quot;</span>/&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="tag">&lt;<span class="name">setBool</span> <span class="attr">result</span>=<span class="string">&quot;bIsDeleteElement&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">loopElements</span> <span class="attr">tag</span>=<span class="string">&quot;dict&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">loopElements</span> <span class="attr">tag</span>=<span class="string">&quot;$&quot;</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- delete value --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">if</span> <span class="attr">condition</span>=<span class="string">&quot;bIsDeleteElement&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">true</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">setBool</span> <span class="attr">result</span>=<span class="string">&quot;bIsDeleteElement&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">log</span> <span class="attr">text</span>=<span class="string">&quot;bIsDeleteElement is true!!!&quot;</span>/&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">setStringFromTag</span> <span class="attr">result</span>=<span class="string">&quot;TagName&quot;</span> <span class="attr">tag</span>=<span class="string">&quot;$&quot;</span>/&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">setStringFromTagText</span> <span class="attr">result</span>=<span class="string">&quot;TagValue&quot;</span> <span class="attr">tag</span>=<span class="string">&quot;$&quot;</span>/&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">log</span> <span class="attr">text</span>=<span class="string">&quot;Delete element value,tagname:$S(TagName) value:$S(TagValue)&quot;</span>/&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">removeElement</span> <span class="attr">tag</span>=<span class="string">&quot;$&quot;</span> <span class="attr">once</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">true</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="comment">&lt;!-- delete key --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">setStringFromTag</span> <span class="attr">result</span>=<span class="string">&quot;TagName&quot;</span> <span class="attr">tag</span>=<span class="string">&quot;$&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">setBoolIsEqual</span> <span class="attr">result</span>=<span class="string">&quot;bIsKey&quot;</span> <span class="attr">arg1</span>=<span class="string">&quot;$S(TagName)&quot;</span> <span class="attr">arg2</span>=<span class="string">&quot;key&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">if</span> <span class="attr">condition</span>=<span class="string">&quot;bIsKey&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">true</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">setStringFromTagText</span> <span class="attr">result</span>=<span class="string">&quot;TagValue&quot;</span> <span class="attr">tag</span>=<span class="string">&quot;$&quot;</span>/&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">log</span> <span class="attr">text</span>=<span class="string">&quot;tagname:$S(TagName) tagvalue:$S(TagValue)&quot;</span>/&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">setBoolIsEqual</span> <span class="attr">result</span>=<span class="string">&quot;bIs_NeedDeleteKey_$I(loopCount)&quot;</span> <span class="attr">arg1</span>=<span class="string">&quot;$S(TagValue)&quot;</span> <span class="attr">arg2</span>=<span class="string">&quot;$S(NeedDeleteKey_$I(loopCount))&quot;</span>/&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">if</span> <span class="attr">condition</span>=<span class="string">&quot;bIs_NeedDeleteKey_$I(loopCount)&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">true</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">log</span> <span class="attr">text</span>=<span class="string">&quot;Match key $S(NeedDeleteKey_$I(loopCount)).&quot;</span>/&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">log</span> <span class="attr">text</span>=<span class="string">&quot;Delete element key,tagname:$S(TagName) value:$S(TagValue).&quot;</span>/&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">removeElement</span> <span class="attr">tag</span>=<span class="string">&quot;$&quot;</span> <span class="attr">once</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">setBool</span> <span class="attr">result</span>=<span class="string">&quot;bIsDeleteElement&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">true</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">true</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">loopElements</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">loopElements</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">&lt;!--control loop end--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">setIntAdd</span> <span class="attr">result</span>=<span class="string">&quot;loopCount&quot;</span> <span class="attr">arg1</span>=<span class="string">&quot;$I(loopCount)&quot;</span> <span class="attr">arg2</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">setBoolIsLessEqual</span> <span class="attr">result</span>=<span class="string">&quot;loopRun&quot;</span> <span class="attr">arg1</span>=<span class="string">&quot;$I(loopCount)&quot;</span> <span class="attr">arg2</span>=<span class="string">&quot;$I(loopSumNum)&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">condition</span>=<span class="string">&quot;loopRun&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">true</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">log</span> <span class="attr">text</span>=<span class="string">&quot;add loopCount to $I(loopCount)&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">true</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">false</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">log</span> <span class="attr">text</span>=<span class="string">&quot;the loop is finished!&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">false</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">while</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">iosPListUpdates</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>At the beginning of the script, two elements pairs are added, followed by the deletion code, with the following three lines being important to note:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">setString</span> <span class="attr">result</span>=<span class="string">&quot;NeedDeleteKey_1&quot;</span> <span class="attr">value</span>=<span class="string">&quot;AdditionalElementA&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">setString</span> <span class="attr">result</span>=<span class="string">&quot;NeedDeleteKey_2&quot;</span> <span class="attr">value</span>=<span class="string">&quot;AdditionalElementB&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">setInt</span> <span class="attr">result</span>=<span class="string">&quot;loopSumNum&quot;</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>The first two lines contain the variables for the elements to be deleted, where the values are the strings of the keys to be deleted. Note that the naming rule must start with <code>NeedDeleteKey_</code>.<br>The third line creates a variable named <code>loopSumNum</code> to keep track of how many element pairs need to be deleted. Here, I test deleting two, so its value is <code>2</code>.</p>
<p>When packaging and building, this script will execute and produce the following output:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">UPL: /Users/buildmachine/UE4/Builds/lipengzha-PC1/C/BuildAgent/workspace/PackageFGameClient/FGame/Plugins/UPLExample/Source/UPLExample/ThirdParty/IOS/IOS_UPL.xml</span><br><span class="line">UPL Init: None</span><br><span class="line">UPL Example adding element to plist...</span><br><span class="line">count:1 SearchKey:AdditionalElementA</span><br><span class="line">tagname:key tagvalue:CFBundleURLTypes</span><br><span class="line">tagname:key tagvalue:CFBundleDevelopmentRegion</span><br><span class="line">tagname:key tagvalue:CFBundleDisplayName</span><br><span class="line">tagname:key tagvalue:CFBundleExecutable</span><br><span class="line">tagname:key tagvalue:CFBundleIdentifier</span><br><span class="line">tagname:key tagvalue:CFBundleInfoDictionaryVersion</span><br><span class="line">tagname:key tagvalue:CFBundleName</span><br><span class="line">tagname:key tagvalue:CFBundlePackageType</span><br><span class="line">tagname:key tagvalue:CFBundleSignature</span><br><span class="line">tagname:key tagvalue:CFBundleVersion</span><br><span class="line">tagname:key tagvalue:CFBundleShortVersionString</span><br><span class="line">tagname:key tagvalue:LSRequiresIPhoneOS</span><br><span class="line">tagname:key tagvalue:UIStatusBarHidden</span><br><span class="line">tagname:key tagvalue:UIFileSharingEnabled</span><br><span class="line">tagname:key tagvalue:UIRequiresFullScreen</span><br><span class="line">tagname:key tagvalue:UIViewControllerBasedStatusBarAppearance</span><br><span class="line">tagname:key tagvalue:UIInterfaceOrientation</span><br><span class="line">tagname:key tagvalue:UISupportedInterfaceOrientations</span><br><span class="line">tagname:key tagvalue:UIRequiredDeviceCapabilities</span><br><span class="line">tagname:key tagvalue:CFBundleIcons</span><br><span class="line">tagname:key tagvalue:CFBundleIcons~ipad</span><br><span class="line">tagname:key tagvalue:UILaunchStoryboardName</span><br><span class="line">tagname:key tagvalue:CFBundleSupportedPlatforms</span><br><span class="line">tagname:key tagvalue:MinimumOSVersion</span><br><span class="line">tagname:key tagvalue:ITSAppUsesNonExemptEncryption</span><br><span class="line">tagname:key tagvalue:NSLocationAlwaysAndWhenInUseUsageDescription</span><br><span class="line">tagname:key tagvalue:NSLocationWhenInUseUsageDescription</span><br><span class="line">tagname:key tagvalue:AdditionalElementA</span><br><span class="line">Match key AdditionalElementA.</span><br><span class="line">Delete element key,tagname:key value:AdditionalElementA.</span><br><span class="line">bIsDeleteElement is true!!!</span><br><span class="line">Delete element value,tagname:string value:this key is a AdditionalElementA element.</span><br><span class="line">tagname:key tagvalue:AdditionalElementB</span><br><span class="line">tagname:key tagvalue:CFBundleURLName</span><br><span class="line">tagname:key tagvalue:CFBundleURLSchemes</span><br><span class="line">tagname:key tagvalue:CFBundlePrimaryIcon</span><br><span class="line">tagname:key tagvalue:CFBundleIconFiles</span><br><span class="line">tagname:key tagvalue:CFBundleIconName</span><br><span class="line">tagname:key tagvalue:UIPrerenderedIcon</span><br><span class="line">tagname:key tagvalue:CFBundlePrimaryIcon</span><br><span class="line">tagname:key tagvalue:CFBundleIconFiles</span><br><span class="line">tagname:key tagvalue:CFBundleIconName</span><br><span class="line">tagname:key tagvalue:UIPrerenderedIcon</span><br><span class="line">add loopCount to 2</span><br><span class="line">count:2 SearchKey:AdditionalElementB</span><br><span class="line">tagname:key tagvalue:CFBundleURLTypes</span><br><span class="line">tagname:key tagvalue:CFBundleDevelopmentRegion</span><br><span class="line">tagname:key tagvalue:CFBundleDisplayName</span><br><span class="line">tagname:key tagvalue:CFBundleExecutable</span><br><span class="line">tagname:key tagvalue:CFBundleIdentifier</span><br><span class="line">tagname:key tagvalue:CFBundleInfoDictionaryVersion</span><br><span class="line">tagname:key tagvalue:CFBundleName</span><br><span class="line">tagname:key tagvalue:CFBundlePackageType</span><br><span class="line">tagname:key tagvalue:CFBundleSignature</span><br><span class="line">tagname:key tagvalue:CFBundleVersion</span><br><span class="line">tagname:key tagvalue:CFBundleShortVersionString</span><br><span class="line">tagname:key tagvalue:LSRequiresIPhoneOS</span><br><span class="line">tagname:key tagvalue:UIStatusBarHidden</span><br><span class="line">tagname:key tagvalue:UIFileSharingEnabled</span><br><span class="line">tagname:key tagvalue:UIRequiresFullScreen</span><br><span class="line">tagname:key tagvalue:UIViewControllerBasedStatusBarAppearance</span><br><span class="line">tagname:key tagvalue:UIInterfaceOrientation</span><br><span class="line">tagname:key tagvalue:UISupportedInterfaceOrientations</span><br><span class="line">tagname:key tagvalue:UIRequiredDeviceCapabilities</span><br><span class="line">tagname:key tagvalue:CFBundleIcons</span><br><span class="line">tagname:key tagvalue:CFBundleIcons~ipad</span><br><span class="line">tagname:key tagvalue:UILaunchStoryboardName</span><br><span class="line">tagname:key tagvalue:CFBundleSupportedPlatforms</span><br><span class="line">tagname:key tagvalue:MinimumOSVersion</span><br><span class="line">tagname:key tagvalue:ITSAppUsesNonExemptEncryption</span><br><span class="line">tagname:key tagvalue:NSLocationAlwaysAndWhenInUseUsageDescription</span><br><span class="line">tagname:key tagvalue:NSLocationWhenInUseUsageDescription</span><br><span class="line">tagname:key tagvalue:AdditionalElementAAA</span><br><span class="line">tagname:key tagvalue:AdditionalElementB</span><br><span class="line">Match key AdditionalElementB.</span><br><span class="line">Delete element key,tagname:key value:AdditionalElementB.</span><br><span class="line">bIsDeleteElement is true!!!</span><br><span class="line">Delete element value,tagname:string value:this key is a AdditionalElementB element.</span><br><span class="line">tagname:key tagvalue:CFBundleURLName</span><br><span class="line">tagname:key tagvalue:CFBundleURLSchemes</span><br><span class="line">tagname:key tagvalue:CFBundlePrimaryIcon</span><br><span class="line">tagname:key tagvalue:CFBundleIconFiles</span><br><span class="line">tagname:key tagvalue:CFBundleIconName</span><br><span class="line">tagname:key tagvalue:UIPrerenderedIcon</span><br><span class="line">tagname:key tagvalue:CFBundlePrimaryIcon</span><br><span class="line">tagname:key tagvalue:CFBundleIconFiles</span><br><span class="line">tagname:key tagvalue:CFBundleIconName</span><br><span class="line">tagname:key tagvalue:UIPrerenderedIcon</span><br><span class="line">the loop is finished!</span><br></pre></td></tr></table></figure>

<p>As long as deletion is possible, the deleted elements can be re-added using <code>addElements</code>, thus achieving the modification purpose. ### Adding Frameworks for iOS</p>
<p>The <code>Framework</code> on iOS is somewhat similar to a static linked library, equivalent to a collection of <code>.a</code> + <code>.h</code> + resources packaged together. For a more specific description of the differences, see: <a target="_blank" rel="noopener" href="https://blog.csdn.net/lvxiangan/article/details/43115131">Difference between iOS Library .a and .framework</a></p>
<p>In UE, using the example of integrating the iOS <code>SSKeychain</code> that operates the Keychain, <code>PublicAdditionalFrameworks</code> is used in the Module’s <code>build.cs</code> to add:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">PublicAdditionalFrameworks.Add(</span><br><span class="line">    <span class="keyword">new</span> Framework(</span><br><span class="line">        <span class="string">&quot;SSKeychain&quot;</span>,</span><br><span class="line">        <span class="string">&quot;ThirdParty/IOS/SSKeychain.embeddedframework.zip&quot;</span>,</span><br><span class="line">        <span class="string">&quot;SSKeychain.framework/SSKeychain.bundle&quot;</span></span><br><span class="line">        )</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>The first parameter for constructing the Framework is the name, the second is the framework path (relative to the Module), and the third is the <code>bundle</code> path of the Framework after extraction (if the framework does not have a bundle, this parameter can be ignored, and even if there is a bundle but this third parameter is not written, it seems like it also doesn’t cause any problems).</p>
<p>This can be verified by opening the <code>SSKeychain.embeddedframework.zip</code> file:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">SSKeychain.embeddedframework</span><br><span class="line">    └─SSKeychain.framework</span><br><span class="line">        │  Info.plist</span><br><span class="line">        │  SSKeychain</span><br><span class="line">        │</span><br><span class="line">        ├─Headers</span><br><span class="line">        │      SSKeychain.h</span><br><span class="line">        │      SSKeychainQuery.h</span><br><span class="line">        │</span><br><span class="line">        ├─Modules</span><br><span class="line">        │      <span class="keyword">module</span>.modulemap</span><br><span class="line">        │</span><br><span class="line">        ├─SSKeychain.bundle</span><br><span class="line">        │  └─en.lproj</span><br><span class="line">        │          SSKeychain.strings</span><br><span class="line">        │</span><br><span class="line">        └─_CodeSignature</span><br><span class="line">                CodeDirectory</span><br><span class="line">                CodeRequirements</span><br><span class="line">                CodeRequirements<span class="number">-1</span></span><br><span class="line">                CodeResources</span><br><span class="line">                CodeSignature</span><br></pre></td></tr></table></figure>

<p>The path relative to the <code>.framework</code> must be filled in correctly; otherwise, it cannot be used because the packaging process will extract this zip and copy it to the package. If the path is specified incorrectly, it will not be copied.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">2020.05</span><span class="number">.14</span><span class="number">-11.04</span><span class="number">.48</span>:<span class="number">324</span>][<span class="number">988</span>]UATHelper: <span class="built_in">Packaging</span> (iOS):     [<span class="number">2</span>/<span class="number">183</span>] sh Unzipping : /Users/zyhmac/UE4/Builds/ZHALIPENG/C/Users/imzlp/Documents/UnrealProjectSSD/MicroEnd_423/Plugins/PlatformUtils/Source/PlatformUtils/ThirdParty/IOS/SSKeychain.embeddedframework.zip -&gt; /Users/zyhmac/UE4/Builds/ZHALIPENG/D/UnrealEngine/Epic/UE_4<span class="number">.23</span>/Engine/Intermediate/UnzippedFrameworks/SSKeychain/SSKeychain.embeddedframework</span><br></pre></td></tr></table></figure>

<p>Note: Do not introduce the same third-party framework file simultaneously in two different modules; otherwise, the following error may occur (for example, if I introduced <code>SSKeychain.embeddedframework.zip</code> in plugin A, then introduced it in another plugin B within the same project):</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Unable to merge actions producing SSKeychain.embeddedframework.extracted: prerequisites are different.</span><br></pre></td></tr></table></figure>

<h2 id="Common-Issues-for-Testing-iOS-Packages"><a href="#Common-Issues-for-Testing-iOS-Packages" class="headerlink" title="Common Issues for Testing iOS Packages"></a>Common Issues for Testing iOS Packages</h2><h3 id="iOS-UE4App-Data-Directory"><a href="#iOS-UE4App-Data-Directory" class="headerlink" title="iOS UE4App Data Directory"></a>iOS UE4App Data Directory</h3><p>Accessing the iOS program’s documents directory requires the App to enable file sharing. This can be enabled in UE’s <code>Project Settings</code>-<code>Platform</code>-<code>IOS</code>-<code>File System</code>:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/1948/ue4-ios-support-file-sharing.webp"></p>
<p>Only after this is enabled can you access the application’s documents directory following packaging.</p>
<p>You can use <a target="_blank" rel="noopener" href="https://imazing.com/zh">iMaZing</a> to access the iOS app’s documents directory, allowing you to create folders, copy files, etc., which is quite convenient.</p>
<p>UE has this directory structure on Win and Android platforms:</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">+---Engine</span><br><span class="line">|   +---Content</span><br><span class="line">\---FGame</span><br><span class="line">    +---Content</span><br><span class="line">    |   +---Movies</span><br><span class="line">    |   \---Paks</span><br><span class="line">    \---Saved</span><br><span class="line">        +---Logs</span><br><span class="line">        \---Paks</span><br></pre></td></tr></table></figure>

<p>On Windows, it is relative to the packaging directory, while on Android, it defaults to <code>&lt;Sdcard&gt;/UE4Game/PROJECT_NAME/</code>.</p>
<p>On iOS, this structure is relative to the App’s documents directory (these folders were manually created; there are no logs during Shipping):</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/1948/ue4-assess-ios-app-document-folder.webp"></p>
<p>If you want to mount pak, just place it in the corresponding directory structure, and you can access it through the <code>FPaths</code> API in the program.</p>
<h3 id="Viewing-iOS-Device-Logs-on-Windows"><a href="#Viewing-iOS-Device-Logs-on-Windows" class="headerlink" title="Viewing iOS Device Logs on Windows"></a>Viewing iOS Device Logs on Windows</h3><p>For Android devices, you can use <code>adb logcat</code> to capture logs, but it’s quite troublesome to view iOS logs since it requires a Mac.</p>
<p>However, after a bit of searching, I found a tool that allows you to view the current device logs in real-time on Windows: <a target="_blank" rel="noopener" href="https://www.blackberry.com/blackberrytraining/web/KB_Resources/KB36986_iOSLogInfo_4.3.4.zip">IOSLogInfo</a></p>
<p>After downloading, extract it, and executing <code>sdsiosloginfo.exe</code> will display output similar to <code>logcat</code> logs. If you have a <code>Git bash</code> environment, you can also use <code>|</code> for filtering.</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/1948/iOSLogInfo-for-windows.webp"></p>
<h3 id="Log-Location-for-UE-Projects-on-Mac"><a href="#Log-Location-for-UE-Projects-on-Mac" class="headerlink" title="Log Location for UE Projects on Mac"></a>Log Location for UE Projects on Mac</h3><blockquote>
<p>The log location for opening UE projects on MacOS is <code>~/Library/Logs/Unreal Engine/ProjectName</code>, <a target="_blank" rel="noopener" href="https://wiki.unrealengine.com/Locating_Project_Logs">Locating Project Logs</a></p>
</blockquote>
<h3 id="Paklist-Location-for-Packaging-on-Mac"><a href="#Paklist-Location-for-Packaging-on-Mac" class="headerlink" title="Paklist Location for Packaging on Mac"></a>Paklist Location for Packaging on Mac</h3><p>The location of the Paklist generated during IPA packaging on Mac is <code>~/Library/Logs/Unreal Engine/LocalBuildLogs/BuildCookRun</code>, which differs from Windows packaging.<br><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/20210910142449.webp"></p>
<h2 id="Relevant-Links"><a href="#Relevant-Links" class="headerlink" title="Relevant Links"></a>Relevant Links</h2><ul>
<li><a target="_blank" rel="noopener" href="https://wiki.unrealengine.com/Mobile_Development_Troubleshooting_Guide">UE4 Mobile Device Development Guide</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.unrealengine.com/en-US/Platforms/Mobile/iOS/Windows/index.html">Building for iOS on Windows</a></li>
<li>A tool similar to logcat for iOS: <a target="_blank" rel="noopener" href="https://lemonjar.com/iosconsole/">iOS Console</a></li>
</ul>

    </div>

    
    
        
        
          
            <blockquote class="blockquote-center">
              
                The article is finished. If you have any questions, please comment and communicate.
              
            <br/>
            
                <div class="qr-code" onclick="return false">
                    <script src="/js/qrcode.min.js"></script>
                    <div id="qrcode">
                      
                        <img src="https://imzlp.com/images/wechat-qrcode.webp">
                      
                    <p>Scan the QR code on WeChat and follow me.</p>
                    </div>
                </div>
            
            </blockquote>
          
        

        
          <div class="postCopyright" style="clear:both;">
             <span>Title:</span><a href="/posts/1948/" target="_blank">UE Development Notes: Mac/iOS</a><br/>
             <span>Author:</span><a href="/about" target="_blank" title="查看 LIPENGZHA 的资料">LIPENGZHA</a><br/>
             <span>Publish Date:</span>2020/09/01 21:45<br/>
             
              <span>Update Date:</span>2023/09/08 09:47<br/>
             
             <span>Word Count:</span><span class="page-count">17k Words</span><br/>
             
             <span>Link:</span><a href="/posts/1948/" target="_blank" title="UE Development Notes: Mac/iOS">https://en.imzlp.com/posts/1948/</a>
             <span class="copy-path" data-clipboard-text="Link: https://en.imzlp.com/posts/1948/ Author: LIPENGZHA" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
             <script src="/js/jquery.min.js"></script>
             <script src="/js/clipboard.min.js"></script>
             <script> var clipboard = new Clipboard('.copy-path'); </script>
             <br/>
             
             <span>License:</span><i class="fab fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" title="Attribution-NonCommercial-ShareAlike 4.0 International">CC BY-NC-SA 4.0</a><br/>
             
             <span>Reprinting of the full article is prohibited.</span>
          </div>
        
    

        
  <div class="reward-container">
    <div>Your donation will encourage me to keep creating!</div>
    <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
      Donate
    </button>
    <div id="qr" style="display: none;">
        
        <div style="display: inline-block;">
          <img src="/images/reward/wechatpay.webp" alt="LIPENGZHA WeChat Pay">
          <p>WeChat Pay</p>
        </div>

    </div>
  </div>



      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/UnrealEngine/" rel="tag"># UnrealEngine</a>
              <a href="/tags/iOS/" rel="tag"># iOS</a>
              <a href="/tags/Mac/" rel="tag"># Mac</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/posts/28513/" rel="prev" title="UE import atlas: TexturePacker">
      <i class="fa fa-chevron-left"></i> UE import atlas: TexturePacker
    </a></div>
      <div class="post-nav-item">
    <a href="/posts/17371/" rel="next" title="UE hot update: demand analysis and solution design">
      UE hot update: demand analysis and solution design <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
      <div class="tabs tabs-comment">
        <ul class="nav-tabs">
            <li class="tab"><a href="#comment-utteranc">utteranc</a></li>
            <li class="tab"><a href="#comment-valine">valine</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane utteranc" id="comment-utteranc">
              
  
  <div class="comments">
  <script src="https://utteranc.es/client.js" repo="hxhb/blog-comments" issue-term="pathname" theme="github-light" crossorigin="anonymous" async></script>
  </div>
  
  
            </div>
            <div class="tab-pane valine" id="comment-valine">
              <div class="comments" id="valine-comments"></div>
            </div>
        </div>
      </div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Remote-Build-for-iOS"><span class="nav-number">1.</span> <span class="nav-text">Remote Build for iOS</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#IOS-Certificate-Application"><span class="nav-number">1.1.</span> <span class="nav-text">IOS Certificate Application</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Configuration-for-Remote-Build"><span class="nav-number">1.2.</span> <span class="nav-text">Configuration for Remote Build</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SSH-Key-Login-Failure"><span class="nav-number">1.3.</span> <span class="nav-text">SSH Key Login Failure</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#iOS-Packaging-Certificate-Configuration-Error-Issue"><span class="nav-number">1.4.</span> <span class="nav-text">iOS Packaging Certificate Configuration Error Issue</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SSH-Key-Path-Lookup-Bug"><span class="nav-number">1.5.</span> <span class="nav-text">SSH Key Path Lookup Bug</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Remote-Shader-Compilation-Key-Lookup-Bug"><span class="nav-number">1.6.</span> <span class="nav-text">Remote Shader Compilation Key Lookup Bug</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Signing-Errors"><span class="nav-number">1.7.</span> <span class="nav-text">Signing Errors</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Developer-Signature-Expired"><span class="nav-number">1.7.1.</span> <span class="nav-text">Developer Signature Expired</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Apple-Intermediate-Certificate-Expired"><span class="nav-number">1.7.2.</span> <span class="nav-text">Apple Intermediate Certificate Expired</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Notes"><span class="nav-number">1.8.</span> <span class="nav-text">Notes</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Mac-Development-Environment"><span class="nav-number">2.</span> <span class="nav-text">Mac Development Environment</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Installing-UE-on-MacOS"><span class="nav-number">2.1.</span> <span class="nav-text">Installing UE on MacOS</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Modify-SSHD-Default-Port-on-Mac"><span class="nav-number">2.2.</span> <span class="nav-text">Modify SSHD Default Port on Mac</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Enable-Multi-threading-Compilation-for-Xcode"><span class="nav-number">2.3.</span> <span class="nav-text">Enable Multi-threading Compilation for Xcode</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Built-in-Frameworks-in-Mac-System"><span class="nav-number">2.4.</span> <span class="nav-text">Built-in Frameworks in Mac System</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#actool-Error"><span class="nav-number">2.5.</span> <span class="nav-text">actool Error</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Remove-Restrictions-on-macOS-Installed-Software"><span class="nav-number">2.6.</span> <span class="nav-text">Remove Restrictions on macOS Installed Software</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#macOS-Read-Write-NTFS"><span class="nav-number">2.7.</span> <span class="nav-text">macOS Read&#x2F;Write NTFS</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Issues-Encountered-in-UE4-Projects-on-Mac"><span class="nav-number">3.</span> <span class="nav-text">Issues Encountered in UE4 Projects on Mac</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Cook-Errors"><span class="nav-number">3.1.</span> <span class="nav-text">Cook Errors</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#UPL-Application-in-iOS"><span class="nav-number">4.</span> <span class="nav-text">UPL Application in iOS</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Analysis-of-plist-Generation-Process"><span class="nav-number">4.1.</span> <span class="nav-text">Analysis of plist Generation Process</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Intervening-in-the-IPA-Generation-Process-Operating-Plist"><span class="nav-number">4.2.</span> <span class="nav-text">Intervening in the IPA Generation Process: Operating Plist</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Common-Issues-for-Testing-iOS-Packages"><span class="nav-number">5.</span> <span class="nav-text">Common Issues for Testing iOS Packages</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#iOS-UE4App-Data-Directory"><span class="nav-number">5.1.</span> <span class="nav-text">iOS UE4App Data Directory</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Viewing-iOS-Device-Logs-on-Windows"><span class="nav-number">5.2.</span> <span class="nav-text">Viewing iOS Device Logs on Windows</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Log-Location-for-UE-Projects-on-Mac"><span class="nav-number">5.3.</span> <span class="nav-text">Log Location for UE Projects on Mac</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Paklist-Location-for-Packaging-on-Mac"><span class="nav-number">5.4.</span> <span class="nav-text">Paklist Location for Packaging on Mac</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Relevant-Links"><span class="nav-number">6.</span> <span class="nav-text">Relevant Links</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person" oncontextmenu="return false" οndragstart="return false">
    <img class="site-author-image" itemprop="image" alt="LIPENGZHA"
      src="https://img.imzlp.com/imgs/zlp/picgo/2023/202304152112902.webp">
  <p class="site-author-name" itemprop="name">LIPENGZHA</p>
  <div class="site-description" itemprop="description">"I think, therefore I am"</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
             
          <span class="site-state-item-count">190</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">95</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">190</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/hxhb" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;hxhb" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://linkedin.com/in/lipengzha" title="Linkedin → https:&#x2F;&#x2F;linkedin.com&#x2F;in&#x2F;lipengzha" rel="noopener" target="_blank"><i class="fab fa-linkedin fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.zhihu.com/people/imzlp" title="知乎 → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;imzlp" rel="noopener" target="_blank"><i class="fa fa-custom zhihu fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="/images/wechat-qrcode-offical.webp" title="微信公众号 → &#x2F;images&#x2F;wechat-qrcode-offical.webp"><i class="fab fa-weixin fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:imzlp@foxmail.com" title="E-Mail → mailto:imzlp@foxmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fa fa-rss fa-fw"></i></a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://consolehelp.imzlp.com/" title="https:&#x2F;&#x2F;consolehelp.imzlp.com&#x2F;" rel="noopener" target="_blank">UE Console Help</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://imzlp.com/opensource/" title="https:&#x2F;&#x2F;imzlp.com&#x2F;opensource&#x2F;" rel="noopener" target="_blank">Open Source Projects</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://imzlp.com/posts/11515/" title="https:&#x2F;&#x2F;imzlp.com&#x2F;posts&#x2F;11515&#x2F;" rel="noopener" target="_blank">UE C++ API Dash Documents</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://ue5wiki.com/" title="https:&#x2F;&#x2F;ue5wiki.com&#x2F;" rel="noopener" target="_blank">Unreal Engine Wiki</a>
        </li>
    </ul>
  </div>

      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2014 – 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">LIPENGZHA</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="Symbols count total">1.5m</span>
</div>
  <div class="powered-by-other">
    
	    <center>Github Pages | Actions | NeXT | Cloudflare | Hexo Deploy</center>
      
  </div>

<script>
function checkWebp(callback) {
    var img = new Image();
    img.onload = function () { callback((img.width > 0) && (img.height > 0)); };
    img.onerror = function () { callback(false); };
    img.src = 'data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA';
}
function showImage(useWebp) {
    var imgs = [].slice.call(document.querySelectorAll('img'));
    imgs.forEach(function (e) {
        if (!useWebp) {
            var src = e.getAttribute('data-src')
            src = src.replace(/\.webp$/, '.png');
            e.setAttribute('data-src', src);
        }
    });
}
checkWebp(showImage);
</script>

        








      </div>
    </footer>
  </div>

  
  <script src="//lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/animejs/3.2.1/anime.min.js"></script>
  <script src="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/jquery/3.5.1/jquery.min.js"></script>
  <script src="//lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/fancybox/3.5.7/jquery.fancybox.min.js"></script>
  <script src="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/lozad.js/1.16.0/lozad.min.js"></script>
  <script src="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/pangu/4.0.7/pangu.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>



<script src="/js/code-unfold.js"></script>

  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>




  
<script src="/js/local-search.js"></script>









<script>
document.querySelectorAll('.pdfobject-container').forEach(element => {
  let url = element.dataset.target;
  let pdfOpenParams = {
    navpanes : 0,
    toolbar  : 0,
    statusbar: 0,
    pagemode : 'thumbs',
    view     : 'FitH'
  };
  let pdfOpenFragment = '#' + Object.entries(pdfOpenParams).map(([key, value]) => `${key}=${encodeURIComponent(value)}`).join('&');
  let fullURL = `/lib/pdf/web/viewer.html?file=${encodeURIComponent(url)}${pdfOpenFragment}`;

  if (NexT.utils.supportsPDFs()) {
    element.innerHTML = `<embed class="pdfobject" src="${url + pdfOpenFragment}" type="application/pdf" style="height: ${element.dataset.height};">`;
  } else {
    element.innerHTML = `<iframe src="${fullURL}" style="height: ${element.dataset.height};" frameborder="0"></iframe>`;
  }
});
</script>


<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  

  
  <script src="//img.imzlp.com/imgs/zlp/picgo/2021/quicklink.umd.js"></script>
  <script>
      window.addEventListener('load', () => {
      quicklink({
        timeout : 3000,
        priority: true,
        ignores : [uri => uri.includes('#'),uri => uri === 'https://en.imzlp.com/posts/1948/',]
      });
      });
  </script>


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/valine/1.4.14/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    var requiredFields = 'nick';
    requiredFields = requiredFields.split(',');
    
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'oCE6RMVkVoi5MgUhvFsn1EvV-gzGzoHsz',
      appKey     : 'K9SOaNYJ8PV6xaoFggWG5xvv',
      placeholder: "Leave something behind~",
      avatar     : 'robohash',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : 'en' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : '',
      requiredFields: requiredFields
    });
  }, window.Valine);
});
</script>

</body>
</html>
