<!DOCTYPE html>
<html lang="en,default">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon-32x32-tilt-brush.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-tilt-brush.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-tilt-brush.png">
  <link rel="mask-icon" href="/images/favicon-32x32-tilt-brush.png" color="#222">
  <meta name="google-site-verification" content="ttIkhAIFZQM9Huj8roB0l95ePN2Tv2zv2wRFksi09WA">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noto Serif SC:300,300italic,400,400italic,700,700italic|Pacifico:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Roboto Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="//lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/5.15.2/css/all.min.css">
  <link rel="stylesheet" href="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/fancybox/3.5.7/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"en.imzlp.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false,"width":280},"copycode":{"enable":true,"show_result":true,"style":"flat"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"manual"},"fancybox":true,"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":false,"nav":null,"activeClass":"valine"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"code_unfold":{"enable":true,"CODE_MAX_HEIGHT":600},"path":"search.xml"};
  </script>

  <meta name="description" content="The UE4 provides a mature configuration mechanism for INI files, and the engine uses ini as configuration files for both the engine and projects. This article will briefly analyze the loading of GConf">
<meta property="og:type" content="article">
<meta property="og:title" content="UE code analysis: GConfig loading">
<meta property="og:url" content="https://en.imzlp.com/posts/2386/index.html">
<meta property="og:site_name" content="Z&#39;s Blog">
<meta property="og:description" content="The UE4 provides a mature configuration mechanism for INI files, and the engine uses ini as configuration files for both the engine and projects. This article will briefly analyze the loading of GConf">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/picgo/2023/20230323192614.webp">
<meta property="article:published_time" content="2019-05-27T22:57:58.000Z">
<meta property="article:modified_time" content="2020-05-28T18:02:53.000Z">
<meta property="article:author" content="LIPENGZHA">
<meta property="article:tag" content="UnrealEngine">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img.imzlp.com/imgs/zlp/picgo/2023/20230323192614.webp">

<link rel="canonical" href="https://en.imzlp.com/posts/2386/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>UE code analysis: GConfig loading | Z's Blog</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-FDCJ41EFP5"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-FDCJ41EFP5');
      }
    </script>






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.staticfile.org/lxgw-wenkai-screen-webfont/1.7.0/style.min.css" /><!-- hexo injector head_end end --><link rel="alternate" href="/atom.xml" title="Z's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Z's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        
            
  <li class="menu-item menu-item-notes">

    <a href="/notes/" rel="section"><i class="fa fa-edit fa-fw"></i>Notes</a>

  </li>


      
        
            
  <li class="menu-item menu-item-essay">

    <a href="/essay/" rel="section"><i class="fas fa-feather-alt fa-fw"></i>Essay</a>

  </li>


      
        
            
  <li class="menu-item menu-item-resources">

    <a href="/resources/" rel="section"><i class="fa fa-inbox fa-fw"></i>Resources</a>

  </li>


      
        <li class="menu-item menu-item-friends">

    <a href="/friends/" rel="section"><i class="fas fa-link fa-fw"></i>Friends</a>

  </li>
        
            
  <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About Me</a>

  </li>


      
        <li class="menu-item menu-item-showcase">

    <a href="/showcase/" rel="section"><i class="fa fa-solid fa-trophy fa-fw"></i>ShowCase</a>

  </li>
        <li class="menu-item menu-item-changelog">

    <a href="/changelog/" rel="section"><i class="fa fa-history fa-fw"></i>Site Log</a>

  </li>
        <li class="menu-item menu-item-opensource">

    <a href="/opensource/" rel="section"><i class="fas fa-code-branch fa-fw"></i>Open Source</a>

  </li>
        <li class="menu-item menu-item-uewiki">

    <a href="https://ue5wiki.com/" rel="noopener" target="_blank"><i class="fab fa-wikipedia-w fa-fw"></i>Unreal Wiki</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>



<script type="text/javascript">
  let domain='en.imzlp.com';
  let domain_str = atob(domain);
  let pathname = location.pathname;
  if (domain_str!= location.host.toLowerCase()){
        console.log(`this host is not safe,jump to https://${domain_str}${pathname}`);
        location.href=`https://${domain_str}${pathname}`;
  }
</script>

</div>
    </header>

    
  <div class="reading-progress-bar"></div>
  <div class="l10n-header-widget">
    <script>
      // 获取当前页面的 URL
      const currentUrl = window.location.href;
      // 替换 URL 中的部分内容
      const jumpToL10nLink = currentUrl.replace('en.imzlp.com', 'imzlp.com');
      // 将 jumpToL10nLink 绑定到一个全局变量
      window.jumpToL10nLink = jumpToL10nLink;
    </script>

    <a href="#" class="post-l10n-link" title="切换至中文版本" style="float: left;border-bottom: none;" rel="noopener" target="_blank" onclick="window.open(window.jumpToL10nLink, '_blank'); return false;">
      <i class="fa fa-solid fa-language"></i>
    </a>
  </div>



    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en"
  >
    <link itemprop="mainEntityOfPage" href="https://en.imzlp.com/posts/2386/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://img.imzlp.com/imgs/zlp/picgo/2023/202304152112902.webp">
      <meta itemprop="name" content="LIPENGZHA">
      <meta itemprop="description" content=""I think, therefore I am"">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Z's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          UE code analysis: GConfig loading<a href="https://github.com/imzlp/blog-md/blob/en/_posts/2019-05-27-2386.md" class="post-edit-link" title="Edit this post" style="float: right;border-bottom: 0px;" rel="noopener" target="_blank"><i class="fa fa-pen-nib"></i></a><a href="https://imzlp.com/posts/2386/" class="post-l10n-link" title="切换至中文版本" style="float: left;border-bottom: 0px;" rel="noopener" target="_blank"><i class="fa fa-solid fa-language"></i></a>
        </h1>

        
          <div class="post-subtitle" style="text-align: center;line-height: 1;">
            <sub text-align="center" style="font-size: 15px;align-content: center;font-style: italic;bottom: 0em;">UE代码分析:GConfig的加载</sub>
          </div>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-05-27 22:57 22:57:58:57" itemprop="dateCreated datePublished" datetime="2019-05-27T22:57:58+00:00">2019-05-27 22:57</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-05-28 18:02 18:02:53:02" itemprop="dateModified" datetime="2020-05-28T18:02:53+00:00">2020-05-28 18:02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/UnrealEngine/" itemprop="url" rel="index"><span itemprop="name">UnrealEngine</span></a>
                </span>
            </span>

          
            <span id="/posts/2386/" class="post-meta-item leancloud_visitors" data-flag-title="UE code analysis: GConfig loading" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>2.1k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>5 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>The UE4 provides a mature configuration mechanism for INI files, and the engine uses ini as configuration files for both the engine and projects. This article will briefly analyze the loading of GConfig in the engine.</p>
<span id="more"></span>

<p>There are a set of global ini files defined in UE:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Runtime/Core/Private/Misc/CoreGlobals.cpp</span></span><br><span class="line">FString       GEngineIni;                         <span class="comment">/* Engine ini filename */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/** Editor ini file locations - stored per engine version (shared across all projects). Migrated between versions on first run. */</span></span><br><span class="line">FString       GEditorIni;                         <span class="comment">/* Editor ini filename */</span></span><br><span class="line">FString       GEditorKeyBindingsIni;                    <span class="comment">/* Editor Key Bindings ini file */</span></span><br><span class="line">FString       GEditorLayoutIni;                     <span class="comment">/* Editor UI Layout ini filename */</span></span><br><span class="line">FString       GEditorSettingsIni;                     <span class="comment">/* Editor Settings ini filename */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/** Editor per-project ini files - stored per project. */</span></span><br><span class="line">FString       GEditorPerProjectIni;                   <span class="comment">/* Editor User Settings ini filename */</span></span><br><span class="line"></span><br><span class="line">FString       GCompatIni;</span><br><span class="line">FString       GLightmassIni;                        <span class="comment">/* Lightmass settings ini filename */</span></span><br><span class="line">FString       GScalabilityIni;                      <span class="comment">/* Scalability settings ini filename */</span></span><br><span class="line">FString       GHardwareIni;                       <span class="comment">/* Hardware ini filename */</span></span><br><span class="line">FString       GInputIni;                          <span class="comment">/* Input ini filename */</span></span><br><span class="line">FString       GGameIni;                         <span class="comment">/* Game ini filename */</span></span><br><span class="line">FString       GGameUserSettingsIni;                   <span class="comment">/* User Game Settings ini filename */</span></span><br></pre></td></tr></table></figure>
<p>However, there is no direct hard-coded specification of where the ini files are located. The loading process occurs in <code>FEngineLoop::AppInit</code> (LaunchEngineLoop.cpp) by calling <code>FConfigCacheIni::InitializeConfigSystem</code>, defined in <code>ConfigCacheIni.cpp</code>:</p>
<h3 id="FConfigCacheIni-InitializeConfigSystem"><a href="#FConfigCacheIni-InitializeConfigSystem" class="headerlink" title="FConfigCacheIni::InitializeConfigSystem"></a>FConfigCacheIni::InitializeConfigSystem</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// --------------------------------</span></span><br><span class="line"><span class="comment">// # FConfigCacheIni::InitializeConfigSystem declaration</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Creates GConfig, loads the standard global ini files (Engine, Editor, etc),</span></span><br><span class="line"><span class="comment"> * fills out GEngineIni, etc. and marks GConfig as ready for use</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">InitializeConfigSystem</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">// --------------------------------</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">FConfigCacheIni::InitializeConfigSystem</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="comment">// Perform any upgrade we need before we load any configuration files</span></span><br><span class="line">  FConfigManifest::<span class="built_in">UpgradeFromPreviousVersions</span>();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// create GConfig</span></span><br><span class="line">  GConfig = <span class="keyword">new</span> <span class="built_in">FConfigCacheIni</span>(EConfigCacheType::DiskBacked);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// load the main .ini files (unless we&#x27;re running a program or a gameless UE4Editor.exe, DefaultEngine.ini is required).</span></span><br><span class="line">  <span class="type">const</span> <span class="type">bool</span> bIsGamelessExe = !FApp::<span class="built_in">HasProjectName</span>();</span><br><span class="line">  <span class="type">const</span> <span class="type">bool</span> bDefaultEngineIniRequired = !bIsGamelessExe &amp;&amp; (GIsGameAgnosticExe || FApp::<span class="built_in">IsProjectNameEmpty</span>());</span><br><span class="line">  <span class="type">bool</span> bEngineConfigCreated = FConfigCacheIni::<span class="built_in">LoadGlobalIniFile</span>(GEngineIni, <span class="built_in">TEXT</span>(<span class="string">&quot;Engine&quot;</span>), <span class="literal">nullptr</span>, bDefaultEngineIniRequired);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> ( !bIsGamelessExe )</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="comment">// Now check and see if our game is correct if this is a game agnostic binary</span></span><br><span class="line">    <span class="keyword">if</span> (GIsGameAgnosticExe &amp;&amp; !bEngineConfigCreated)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="type">const</span> FText AbsolutePath = FText::<span class="built_in">FromString</span>( IFileManager::<span class="built_in">Get</span>().<span class="built_in">ConvertToAbsolutePathForExternalAppForRead</span>(*FPaths::<span class="built_in">GetPath</span>(GEngineIni)) );</span><br><span class="line">      <span class="comment">//@todo this is too early to localize</span></span><br><span class="line">      <span class="type">const</span> FText Message = FText::<span class="built_in">Format</span>( <span class="built_in">NSLOCTEXT</span>(<span class="string">&quot;Core&quot;</span>, <span class="string">&quot;FirstCmdArgMustBeGameName&quot;</span>, <span class="string">&quot;&#x27;&#123;0&#125;&#x27; must exist and contain a DefaultEngine.ini.&quot;</span>), AbsolutePath );</span><br><span class="line">      <span class="keyword">if</span> (!GIsBuildMachine)</span><br><span class="line">      &#123;</span><br><span class="line">        FMessageDialog::<span class="built_in">Open</span>(EAppMsgType::Ok, Message);</span><br><span class="line">      &#125;</span><br><span class="line">      FApp::<span class="built_in">SetProjectName</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;&quot;</span>)); <span class="comment">// this disables part of the crash reporter to avoid writing log files to a bogus directory</span></span><br><span class="line">      <span class="keyword">if</span> (!GIsBuildMachine)</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">UE_LOG</span>(LogInit, Fatal,<span class="built_in">TEXT</span>(<span class="string">&quot;%s&quot;</span>), *Message.<span class="built_in">ToString</span>());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  FConfigCacheIni::<span class="built_in">LoadGlobalIniFile</span>(GGameIni, <span class="built_in">TEXT</span>(<span class="string">&quot;Game&quot;</span>));</span><br><span class="line">  FConfigCacheIni::<span class="built_in">LoadGlobalIniFile</span>(GInputIni, <span class="built_in">TEXT</span>(<span class="string">&quot;Input&quot;</span>));</span><br><span class="line"><span class="meta">#<span class="keyword">if</span> WITH_EDITOR</span></span><br><span class="line">  <span class="comment">// load some editor specific .ini files</span></span><br><span class="line"></span><br><span class="line">  FConfigCacheIni::<span class="built_in">LoadGlobalIniFile</span>(GEditorIni, <span class="built_in">TEXT</span>(<span class="string">&quot;Editor&quot;</span>));</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Upgrade editor user settings before loading the editor per project user settings</span></span><br><span class="line">  FConfigManifest::<span class="built_in">MigrateEditorUserSettings</span>();</span><br><span class="line">  FConfigCacheIni::<span class="built_in">LoadGlobalIniFile</span>(GEditorPerProjectIni, <span class="built_in">TEXT</span>(<span class="string">&quot;EditorPerProjectUserSettings&quot;</span>));</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Project agnostic editor ini files</span></span><br><span class="line">  <span class="type">static</span> <span class="type">const</span> FString EditorSettingsDir = FPaths::<span class="built_in">Combine</span>(*FPaths::<span class="built_in">GameAgnosticSavedDir</span>(), <span class="built_in">TEXT</span>(<span class="string">&quot;Config&quot;</span>)) + <span class="built_in">TEXT</span>(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">  FConfigCacheIni::<span class="built_in">LoadGlobalIniFile</span>(GEditorSettingsIni, <span class="built_in">TEXT</span>(<span class="string">&quot;EditorSettings&quot;</span>), <span class="literal">nullptr</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">true</span>, *EditorSettingsDir);</span><br><span class="line">  FConfigCacheIni::<span class="built_in">LoadGlobalIniFile</span>(GEditorLayoutIni, <span class="built_in">TEXT</span>(<span class="string">&quot;EditorLayout&quot;</span>), <span class="literal">nullptr</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">true</span>, *EditorSettingsDir);</span><br><span class="line">  FConfigCacheIni::<span class="built_in">LoadGlobalIniFile</span>(GEditorKeyBindingsIni, <span class="built_in">TEXT</span>(<span class="string">&quot;EditorKeyBindings&quot;</span>), <span class="literal">nullptr</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">true</span>, *EditorSettingsDir);</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> PLATFORM_DESKTOP</span></span><br><span class="line">  <span class="comment">// load some desktop only .ini files</span></span><br><span class="line">  FConfigCacheIni::<span class="built_in">LoadGlobalIniFile</span>(GCompatIni, <span class="built_in">TEXT</span>(<span class="string">&quot;Compat&quot;</span>));</span><br><span class="line">  FConfigCacheIni::<span class="built_in">LoadGlobalIniFile</span>(GLightmassIni, <span class="built_in">TEXT</span>(<span class="string">&quot;Lightmass&quot;</span>));</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Load scalability settings.</span></span><br><span class="line">  FConfigCacheIni::<span class="built_in">LoadGlobalIniFile</span>(GScalabilityIni, <span class="built_in">TEXT</span>(<span class="string">&quot;Scalability&quot;</span>));</span><br><span class="line">  <span class="comment">// Load driver blacklist</span></span><br><span class="line">  FConfigCacheIni::<span class="built_in">LoadGlobalIniFile</span>(GHardwareIni, <span class="built_in">TEXT</span>(<span class="string">&quot;Hardware&quot;</span>));</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// Load user game settings .ini, allowing merging. This also updates the user .ini if necessary.</span></span><br><span class="line">  FConfigCacheIni::<span class="built_in">LoadGlobalIniFile</span>(GGameUserSettingsIni, <span class="built_in">TEXT</span>(<span class="string">&quot;GameUserSettings&quot;</span>));</span><br><span class="line"></span><br><span class="line">  <span class="comment">// now we can make use of GConfig</span></span><br><span class="line">  GConfig-&gt;bIsReadyForUse = <span class="literal">true</span>;</span><br><span class="line">  FCoreDelegates::ConfigReadyForUse.<span class="built_in">Broadcast</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="FConfigCacheIni-LoadGlobalIniFile"><a href="#FConfigCacheIni-LoadGlobalIniFile" class="headerlink" title="FConfigCacheIni::LoadGlobalIniFile"></a>FConfigCacheIni::LoadGlobalIniFile</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// --------------------------------</span></span><br><span class="line"><span class="comment">// # FConfigCacheIni::LoadGlobalIniFile declaration</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Loads and generates a destination ini file and adds it to GConfig:</span></span><br><span class="line"><span class="comment"> *   - Looking on commandline for override source/dest .ini filenames</span></span><br><span class="line"><span class="comment"> *   - Generating the name for the engine to refer to the ini</span></span><br><span class="line"><span class="comment"> *   - Loading a source .ini file hierarchy</span></span><br><span class="line"><span class="comment"> *   - Filling out an FConfigFile</span></span><br><span class="line"><span class="comment"> *   - Save the generated ini</span></span><br><span class="line"><span class="comment"> *   - Adds the FConfigFile to GConfig</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param FinalIniFilename The output name of the generated .ini file (in Game\Saved\Config)</span></span><br><span class="line"><span class="comment"> * @param BaseIniName The &quot;base&quot; ini name, with no extension (ie, Engine, Game, etc)</span></span><br><span class="line"><span class="comment"> * @param Platform The platform to load the .ini for (if NULL, uses current)</span></span><br><span class="line"><span class="comment"> * @param bForceReload If true, the destination .in will be regenerated from the source, otherwise this will only process if the dest isn&#x27;t in GConfig</span></span><br><span class="line"><span class="comment"> * @param bRequireDefaultIni If true, the Default*.ini file is required to exist when generating the final ini file.</span></span><br><span class="line"><span class="comment"> * @param bAllowGeneratedIniWhenCooked If true, the engine will attempt to load the generated/user INI file when loading cooked games</span></span><br><span class="line"><span class="comment"> * @param GeneratedConfigDir The location where generated config files are made.</span></span><br><span class="line"><span class="comment"> * @return true if the final ini was created successfully.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">bool</span> <span class="title">LoadGlobalIniFile</span><span class="params">(FString&amp; FinalIniFilename, <span class="type">const</span> TCHAR* BaseIniName, <span class="type">const</span> TCHAR* Platform=<span class="literal">NULL</span>, <span class="type">bool</span> bForceReload=<span class="literal">false</span>, <span class="type">bool</span> bRequireDefaultIni=<span class="literal">false</span>, <span class="type">bool</span> bAllowGeneratedIniWhenCooked=<span class="literal">true</span>, <span class="type">const</span> TCHAR* GeneratedConfigDir = *FPaths::GeneratedConfigDir())</span></span>;</span><br><span class="line"><span class="comment">// --------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">FConfigCacheIni::LoadGlobalIniFile</span><span class="params">(FString&amp; FinalIniFilename, <span class="type">const</span> TCHAR* BaseIniName, <span class="type">const</span> TCHAR* Platform, <span class="type">bool</span> bForceReload, <span class="type">bool</span> bRequireDefaultIni, <span class="type">bool</span> bAllowGeneratedIniWhenCooked, <span class="type">const</span> TCHAR* GeneratedConfigDir)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="comment">// figure out where the end ini file is</span></span><br><span class="line">  FinalIniFilename = <span class="built_in">GetDestIniFilename</span>(BaseIniName, Platform, GeneratedConfigDir);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// Start the loading process for the remote config file when appropriate</span></span><br><span class="line">  <span class="keyword">if</span> (FRemoteConfig::<span class="built_in">Get</span>()-&gt;<span class="built_in">ShouldReadRemoteFile</span>(*FinalIniFilename))</span><br><span class="line">  &#123;</span><br><span class="line">    FRemoteConfig::<span class="built_in">Get</span>()-&gt;<span class="built_in">Read</span>(*FinalIniFilename, BaseIniName);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  FRemoteConfigAsyncIOInfo* RemoteInfo = FRemoteConfig::<span class="built_in">Get</span>()-&gt;<span class="built_in">FindConfig</span>(*FinalIniFilename);</span><br><span class="line">  <span class="keyword">if</span> (RemoteInfo &amp;&amp; (!RemoteInfo-&gt;bWasProcessed || !FRemoteConfig::<span class="built_in">Get</span>()-&gt;<span class="built_in">IsFinished</span>(*FinalIniFilename)))</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="comment">// Defer processing this remote config file to until it has finished its IO operation</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// need to check to see if the file already exists in the GConfigManager&#x27;s cache</span></span><br><span class="line">  <span class="comment">// if it does exist then we are done, nothing else to do</span></span><br><span class="line">  <span class="keyword">if</span> (!bForceReload &amp;&amp; GConfig-&gt;<span class="built_in">FindConfigFile</span>(*FinalIniFilename) != <span class="literal">nullptr</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="comment">//UE_LOG(LogConfig, Log,  TEXT( &quot;Request to load a config file that was already loaded: %s&quot; ), GeneratedIniFile );</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// make a new entry in GConfig (overwriting what&#x27;s already there)</span></span><br><span class="line">  FConfigFile&amp; NewConfigFile = GConfig-&gt;<span class="built_in">Add</span>(FinalIniFilename, <span class="built_in">FConfigFile</span>());</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">LoadExternalIniFile</span>(NewConfigFile, BaseIniName, *FPaths::<span class="built_in">EngineConfigDir</span>(), *FPaths::<span class="built_in">SourceConfigDir</span>(), <span class="literal">true</span>, Platform, bForceReload, <span class="literal">true</span>, bAllowGeneratedIniWhenCooked, GeneratedConfigDir);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="FConfigCacheIni-LoadLocalIniFile"><a href="#FConfigCacheIni-LoadLocalIniFile" class="headerlink" title="FConfigCacheIni::LoadLocalIniFile"></a>FConfigCacheIni::LoadLocalIniFile</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// --------------------------------</span></span><br><span class="line"><span class="comment">// # FConfigCacheIni::LoadLocalIniFile declaration</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Load an ini file directly into an FConfigFile, and nothing is written to GConfig or disk. </span></span><br><span class="line"><span class="comment"> * The passed in .ini name can be a &quot;base&quot; (Engine, Game) which will be modified by platform and/or commandline override,</span></span><br><span class="line"><span class="comment"> * or it can be a full ini filename (ie WrangleContent) loaded from the Source config directory</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param ConfigFile The output object to fill</span></span><br><span class="line"><span class="comment"> * @param IniName Either a Base ini name (Engine) or a full ini name (WrangleContent). NO PATH OR EXTENSION SHOULD BE USED!</span></span><br><span class="line"><span class="comment"> * @param bIsBaseIniName true if IniName is a Base name, which can be overridden on commandline, etc.</span></span><br><span class="line"><span class="comment"> * @param Platform The platform to use for Base ini names, NULL means to use the current platform</span></span><br><span class="line"><span class="comment"> * @param bForceReload force reload the ini file from disk this is required if you make changes to the ini file not using the config system as the hierarchy cache will not be updated in this case</span></span><br><span class="line"><span class="comment"> * @return true if the ini file was loaded successfully</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">bool</span> <span class="title">LoadLocalIniFile</span><span class="params">(FConfigFile&amp; ConfigFile, <span class="type">const</span> TCHAR* IniName, <span class="type">bool</span> bIsBaseIniName, <span class="type">const</span> TCHAR* Platform=<span class="literal">NULL</span>, <span class="type">bool</span> bForceReload=<span class="literal">false</span>)</span></span>;</span><br><span class="line"><span class="comment">// --------------------------------</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">FConfigCacheIni::LoadLocalIniFile</span><span class="params">(FConfigFile&amp; ConfigFile, <span class="type">const</span> TCHAR* IniName, <span class="type">bool</span> bIsBaseIniName, <span class="type">const</span> TCHAR* Platform, <span class="type">bool</span> bForceReload )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="built_in">DECLARE_SCOPE_CYCLE_COUNTER</span>( <span class="built_in">TEXT</span>( <span class="string">&quot;FConfigCacheIni::LoadLocalIniFile&quot;</span> ), STAT_FConfigCacheIni_LoadLocalIniFile, STATGROUP_LoadTime );</span><br><span class="line"></span><br><span class="line">  FString EngineConfigDir = FPaths::<span class="built_in">EngineConfigDir</span>();</span><br><span class="line">  FString SourceConfigDir = FPaths::<span class="built_in">SourceConfigDir</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (bIsBaseIniName)</span><br><span class="line">  &#123;</span><br><span class="line">    FConfigFile* BaseConfig = GConfig-&gt;<span class="built_in">FindConfigFileWithBaseName</span>(IniName);</span><br><span class="line">    <span class="comment">// If base ini, try to use an existing GConfig file to set the config directories instead of assuming defaults</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (BaseConfig)</span><br><span class="line">    &#123;</span><br><span class="line">      FIniFilename* EngineFilename = BaseConfig-&gt;SourceIniHierarchy.<span class="built_in">Find</span>(EConfigFileHierarchy::EngineDirBase);</span><br><span class="line">      <span class="keyword">if</span> (EngineFilename)</span><br><span class="line">      &#123;</span><br><span class="line">        EngineConfigDir = FPaths::<span class="built_in">GetPath</span>(EngineFilename-&gt;Filename) + <span class="built_in">TEXT</span>(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      FIniFilename* GameFilename = BaseConfig-&gt;SourceIniHierarchy.<span class="built_in">Find</span>(EConfigFileHierarchy::GameDirDefault);</span><br><span class="line">      <span class="keyword">if</span> (GameFilename)</span><br><span class="line">      &#123;</span><br><span class="line">        SourceConfigDir = FPaths::<span class="built_in">GetPath</span>(GameFilename-&gt;Filename) + <span class="built_in">TEXT</span>(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">LoadExternalIniFile</span>(ConfigFile, IniName, *EngineConfigDir, *SourceConfigDir, bIsBaseIniName, Platform, bForceReload, <span class="literal">false</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="FConfigCacheIni-LoadExternalIniFile"><a href="#FConfigCacheIni-LoadExternalIniFile" class="headerlink" title="FConfigCacheIni::LoadExternalIniFile"></a>FConfigCacheIni::LoadExternalIniFile</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// --------------------------------</span></span><br><span class="line"><span class="comment">// # FConfigCacheIni::LoadExternalIniFile declaration</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Load an ini file directly into an FConfigFile from the specified config folders, optionally writing to disk. </span></span><br><span class="line"><span class="comment"> * The passed in .ini name can be a &quot;base&quot; (Engine, Game) which will be modified by platform and/or commandline override,</span></span><br><span class="line"><span class="comment"> * or it can be a full ini filename (ie WrangleContent) loaded from the Source config directory</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param ConfigFile The output object to fill</span></span><br><span class="line"><span class="comment"> * @param IniName Either a Base ini name (Engine) or a full ini name (WrangleContent). NO PATH OR EXTENSION SHOULD BE USED!</span></span><br><span class="line"><span class="comment"> * @param EngineConfigDir Engine config directory.</span></span><br><span class="line"><span class="comment"> * @param SourceConfigDir Game config directory.</span></span><br><span class="line"><span class="comment"> * @param bIsBaseIniName true if IniName is a Base name, which can be overridden on commandline, etc.</span></span><br><span class="line"><span class="comment"> * @param Platform The platform to use for Base ini names</span></span><br><span class="line"><span class="comment"> * @param bForceReload force reload the ini file from disk this is required if you make changes to the ini file not using the config system as the hierarchy cache will not be updated in this case</span></span><br><span class="line"><span class="comment"> * @param bWriteDestIni write out a destination ini file to the Saved folder, only valid if bIsBaseIniName is true</span></span><br><span class="line"><span class="comment"> * @param bAllowGeneratedIniWhenCooked If true, the engine will attempt to load the generated/user INI file when loading cooked games</span></span><br><span class="line"><span class="comment"> * @param GeneratedConfigDir The location where generated config files are made.</span></span><br><span class="line"><span class="comment"> * @return true if the ini file was loaded successfully</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">bool</span> <span class="title">LoadExternalIniFile</span><span class="params">(FConfigFile&amp; ConfigFile, <span class="type">const</span> TCHAR* IniName, <span class="type">const</span> TCHAR* EngineConfigDir, <span class="type">const</span> TCHAR* SourceConfigDir, <span class="type">bool</span> bIsBaseIniName, <span class="type">const</span> TCHAR* Platform=<span class="literal">NULL</span>, <span class="type">bool</span> bForceReload=<span class="literal">false</span>, <span class="type">bool</span> bWriteDestIni=<span class="literal">false</span>, <span class="type">bool</span> bAllowGeneratedIniWhenCooked = <span class="literal">true</span>, <span class="type">const</span> TCHAR* GeneratedConfigDir = *FPaths::GeneratedConfigDir())</span></span>;</span><br><span class="line"><span class="comment">// --------------------------------</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">FConfigCacheIni::LoadExternalIniFile</span><span class="params">(FConfigFile&amp; ConfigFile, <span class="type">const</span> TCHAR* IniName, <span class="type">const</span> TCHAR* EngineConfigDir, <span class="type">const</span> TCHAR* SourceConfigDir, <span class="type">bool</span> bIsBaseIniName, <span class="type">const</span> TCHAR* Platform, <span class="type">bool</span> bForceReload, <span class="type">bool</span> bWriteDestIni, <span class="type">bool</span> bAllowGeneratedIniWhenCooked, <span class="type">const</span> TCHAR* GeneratedConfigDir)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="comment">// if bIsBaseIniName is false, that means the .ini is a ready-to-go .ini file, and just needs to be loaded into the FConfigFile</span></span><br><span class="line">  <span class="keyword">if</span> (!bIsBaseIniName)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="comment">// generate path to the .ini file (not a Default ini, IniName is the complete name of the file, without path)</span></span><br><span class="line">    FString SourceIniFilename = FString::<span class="built_in">Printf</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;%s/%s.ini&quot;</span>), SourceConfigDir, IniName);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// load the .ini file straight up</span></span><br><span class="line">    <span class="built_in">LoadAnIniFile</span>(*SourceIniFilename, ConfigFile);</span><br><span class="line"></span><br><span class="line">    ConfigFile.Name = IniName;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">  &#123;</span><br><span class="line">    FString DestIniFilename = <span class="built_in">GetDestIniFilename</span>(IniName, Platform, GeneratedConfigDir);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">GetSourceIniHierarchyFilenames</span>( IniName, Platform, EngineConfigDir, SourceConfigDir, ConfigFile.SourceIniHierarchy, <span class="literal">false</span> );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ( bForceReload )</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="built_in">ClearHierarchyCache</span>( IniName );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Keep a record of the original settings</span></span><br><span class="line">    ConfigFile.SourceConfigFile = <span class="keyword">new</span> <span class="built_in">FConfigFile</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// now generate and make sure it&#x27;s up to date (using IniName as a Base for an ini filename)</span></span><br><span class="line">    <span class="type">const</span> <span class="type">bool</span> bAllowGeneratedINIs = <span class="literal">true</span>;</span><br><span class="line">    <span class="type">bool</span> bNeedsWrite = <span class="built_in">GenerateDestIniFile</span>(ConfigFile, DestIniFilename, ConfigFile.SourceIniHierarchy, bAllowGeneratedIniWhenCooked, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">    ConfigFile.Name = IniName;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// don&#x27;t write anything to disk in cooked builds - we will always use re-generated INI files anyway.</span></span><br><span class="line">    <span class="keyword">if</span> (bWriteDestIni &amp;&amp; (!FPlatformProperties::<span class="built_in">RequiresCookedData</span>() || bAllowGeneratedIniWhenCooked)</span><br><span class="line">      <span class="comment">// We shouldn&#x27;t save config files when in multiprocess mode,</span></span><br><span class="line">      <span class="comment">// otherwise we get file contention in XGE shader builds.</span></span><br><span class="line">      &amp;&amp; !FParse::<span class="built_in">Param</span>(FCommandLine::<span class="built_in">Get</span>(), <span class="built_in">TEXT</span>(<span class="string">&quot;Multiprocess&quot;</span>)))</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="comment">// Check the config system for any changes made to defaults and propagate through to the saved.</span></span><br><span class="line">      ConfigFile.<span class="built_in">ProcessSourceAndCheckAgainstBackup</span>();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (bNeedsWrite)</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// if it was dirtied during the above function, save it out now</span></span><br><span class="line">        ConfigFile.<span class="built_in">Write</span>(DestIniFilename);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// GenerateDestIniFile returns true if nothing is loaded, so check if we actually loaded something</span></span><br><span class="line">  <span class="keyword">return</span> ConfigFile.<span class="built_in">Num</span>() &gt; <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The most important part of this function is the call to <code>GetSourceIniHierarchyFilenames</code>, which collects all ini files of the current baseName under the Engine and project.</p>
<p>This is why we see many ini files in <code>GConfig</code> that are in <code>Saved/Config</code> and contain empty content, yet how do we retrieve the settings from the project? This is because UE merges multiple ini files:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/2386/ue4-gather-ini-source-ini-hierachy.webp"></p>
<p>The content of these ini files will all be loaded.</p>
<p>This part is implemented in <code>FConfigFile::AddStaticLayersToHierarchy</code>, which traverses all ini files in <code>GConfigLayers</code> with rules:</p>
<figure class="highlight cpp"><figcaption><span>ConfigCacheIni.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">FConfigLayer</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">// Used by the editor to display in the ini-editor</span></span><br><span class="line">  <span class="type">const</span> TCHAR* EditorName;</span><br><span class="line">  <span class="comment">// Path to the ini file (with variables)</span></span><br><span class="line">  <span class="type">const</span> TCHAR* Path;</span><br><span class="line">  <span class="comment">// Special flag</span></span><br><span class="line">  EConfigLayerFlags Flag;</span><br><span class="line"></span><br><span class="line">&#125; GConfigLayers[] =</span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">/**************************************************</span></span><br><span class="line"><span class="comment">  **** CRITICAL NOTES</span></span><br><span class="line"><span class="comment">  **** If you change this array, you need to also change EnumerateConfigFileLocations() in ConfigHierarchy.cs!!!</span></span><br><span class="line"><span class="comment">  **** And maybe UObject::GetDefaultConfigFilename(), UObject::GetGlobalUserConfigFilename()</span></span><br><span class="line"><span class="comment">  **************************************************/</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Engine/Base.ini</span></span><br><span class="line">  &#123; <span class="built_in">TEXT</span>(<span class="string">&quot;AbsoluteBase&quot;</span>),       <span class="built_in">TEXT</span>(<span class="string">&quot;&#123;ENGINE&#125;/Config/Base.ini&quot;</span>), EConfigLayerFlags::Required | EConfigLayerFlags::NoExpand&#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// Engine/Base*.ini</span></span><br><span class="line">  &#123; <span class="built_in">TEXT</span>(<span class="string">&quot;Base&quot;</span>),           <span class="built_in">TEXT</span>(<span class="string">&quot;&#123;ENGINE&#125;/Config/Base&#123;TYPE&#125;.ini&quot;</span>) &#125;,</span><br><span class="line">  <span class="comment">// Engine/Platform/BasePlatform*.ini</span></span><br><span class="line">  &#123; <span class="built_in">TEXT</span>(<span class="string">&quot;BasePlatform&quot;</span>),       <span class="built_in">TEXT</span>(<span class="string">&quot;&#123;ENGINE&#125;/Config/&#123;PLATFORM&#125;/Base&#123;PLATFORM&#125;&#123;TYPE&#125;.ini&quot;</span>)  &#125;,</span><br><span class="line">  <span class="comment">// Project/Default*.ini</span></span><br><span class="line">  &#123; <span class="built_in">TEXT</span>(<span class="string">&quot;ProjectDefault&quot;</span>),     <span class="built_in">TEXT</span>(<span class="string">&quot;&#123;PROJECT&#125;/Config/Default&#123;TYPE&#125;.ini&quot;</span>), EConfigLayerFlags::AllowCommandLineOverride | EConfigLayerFlags::GenerateCacheKey &#125;,</span><br><span class="line">  <span class="comment">// Engine/Platform/Platform*.ini</span></span><br><span class="line">  &#123; <span class="built_in">TEXT</span>(<span class="string">&quot;EnginePlatform&quot;</span>),     <span class="built_in">TEXT</span>(<span class="string">&quot;&#123;ENGINE&#125;/Config/&#123;PLATFORM&#125;/&#123;PLATFORM&#125;&#123;TYPE&#125;.ini&quot;</span>) &#125;,</span><br><span class="line">  <span class="comment">// Project/Platform/Platform*.ini</span></span><br><span class="line">  &#123; <span class="built_in">TEXT</span>(<span class="string">&quot;ProjectPlatform&quot;</span>),      <span class="built_in">TEXT</span>(<span class="string">&quot;&#123;PROJECT&#125;/Config/&#123;PLATFORM&#125;/&#123;PLATFORM&#125;&#123;TYPE&#125;.ini&quot;</span>) &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// UserSettings/.../User*.ini</span></span><br><span class="line">  &#123; <span class="built_in">TEXT</span>(<span class="string">&quot;UserSettingsDir&quot;</span>),      <span class="built_in">TEXT</span>(<span class="string">&quot;&#123;USERSETTINGS&#125;Unreal Engine/Engine/Config/User&#123;TYPE&#125;.ini&quot;</span>), EConfigLayerFlags::NoExpand &#125;,</span><br><span class="line">  <span class="comment">// UserDir/.../User*.ini</span></span><br><span class="line">  &#123; <span class="built_in">TEXT</span>(<span class="string">&quot;UserDir&quot;</span>),          <span class="built_in">TEXT</span>(<span class="string">&quot;&#123;USER&#125;Unreal Engine/Engine/Config/User&#123;TYPE&#125;.ini&quot;</span>), EConfigLayerFlags::NoExpand &#125;,</span><br><span class="line">  <span class="comment">// Project/User*.ini</span></span><br><span class="line">  &#123; <span class="built_in">TEXT</span>(<span class="string">&quot;GameDirUser&quot;</span>),        <span class="built_in">TEXT</span>(<span class="string">&quot;&#123;PROJECT&#125;/Config/User&#123;TYPE&#125;.ini&quot;</span>), EConfigLayerFlags::GenerateCacheKey | EConfigLayerFlags::NoExpand &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>During usage, replacements will be performed:</p>
<figure class="highlight cpp"><figcaption><span>ConfigCacheIni.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">static</span> FString <span class="title">PerformBasicReplacements</span><span class="params">(<span class="type">const</span> FString&amp; InString, <span class="type">const</span> TCHAR* BaseIniName)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  FString OutString = InString.<span class="built_in">Replace</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;&#123;TYPE&#125;&quot;</span>), BaseIniName, ESearchCase::CaseSensitive);</span><br><span class="line">  OutString = OutString.<span class="built_in">Replace</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;&#123;USERSETTINGS&#125;&quot;</span>), FPlatformProcess::<span class="built_in">UserSettingsDir</span>(), ESearchCase::CaseSensitive);</span><br><span class="line">  OutString = OutString.<span class="built_in">Replace</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;&#123;USER&#125;&quot;</span>), FPlatformProcess::<span class="built_in">UserDir</span>(), ESearchCase::CaseSensitive);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> OutString;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>For example, if I want to load the ini for Windows platform Game, it will actually include:</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">../../../Engine/Config/Base.ini</span><br><span class="line">../../../Engine/Config/BaseGame.ini</span><br><span class="line">../../../Engine/Config/Windows/BaseWindowsGame.ini</span><br><span class="line">../../../ProjectName/Config/DefaultGame.ini</span><br><span class="line">../../../Engine/Config/Windows/WindowsGame.ini</span><br><span class="line">../../../ProjectName/Config/Windows/WindowsGame.ini</span><br><span class="line">C:/Users/lipengzha/AppData/Local/Unreal Engine/Engine/Config/UserGame.ini</span><br><span class="line">C:/Users/lipengzha/Documents/Unreal Engine/Engine/Config/UserGame.ini</span><br><span class="line">../../../ProjectName/Config/UserGame.ini</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Note: The last element of GConfigLayers has the <code>EConfigLayerFlags::GenerateCacheKey</code> FLAG, when processing, it concatenates all ini paths as a Key:</p>
</blockquote>
<figure class="highlight cpp"><figcaption><span>FConfigFile::AddStaticLayersToHierarchy</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// add this to the list!</span></span><br><span class="line">SourceIniHierarchy.<span class="built_in">AddStaticLayer</span>(</span><br><span class="line">  <span class="built_in">FIniFilename</span>(PlatformPath, bIsRequired, bGenerateCacheKey ?</span><br><span class="line">    <span class="built_in">GenerateHierarchyCacheKey</span>(SourceIniHierarchy, PlatformPath, InBaseIniName) :</span><br><span class="line">    <span class="built_in">FString</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;&quot;</span>))),</span><br><span class="line">  LayerIndex, ExpansionIndex, PlatformIndex);</span><br></pre></td></tr></table></figure>

<p>Finally, the list of paths for all loadable ini files will be executed in the <code>GenerateDestIniFile</code> function during the actual loading behavior (for the Engine example):<br><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/20211011112250.webp"></p>
<p>The loading stack of ini files:<br><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/20211011112154.webp"></p>
<p>Reading will occur in the order of the ini path list, indicating that the priorities of ini files are also according to the loading order.</p>
<h3 id="GetDestIniFilename"><a href="#GetDestIniFilename" class="headerlink" title="GetDestIniFilename"></a>GetDestIniFilename</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Runtime/Source/Core/Private/Misc/ConfigCacheIni.cpp</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Calculates the name of a dest (generated) .ini file for a given base (ie Engine, Game, etc)</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * @param IniBaseName Base name of the .ini (Engine, Game)</span></span><br><span class="line"><span class="comment"> * @param PlatformName Name of the platform to get the .ini path for (nullptr means to use the current platform)</span></span><br><span class="line"><span class="comment"> * @param GeneratedConfigDir The base folder that will contain the generated config files.</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * @return Standardized .ini filename</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="type">static</span> FString <span class="title">GetDestIniFilename</span><span class="params">(<span class="type">const</span> TCHAR* BaseIniName, <span class="type">const</span> TCHAR* PlatformName, <span class="type">const</span> TCHAR* GeneratedConfigDir)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="comment">// figure out what to look for on the commandline for an override</span></span><br><span class="line">  FString CommandLineSwitch = FString::<span class="built_in">Printf</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;%sINI=&quot;</span>), BaseIniName);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// if it&#x27;s not found on the commandline, then generate it</span></span><br><span class="line">  FString IniFilename;</span><br><span class="line">  <span class="keyword">if</span> (FParse::<span class="built_in">Value</span>(FCommandLine::<span class="built_in">Get</span>(), *CommandLineSwitch, IniFilename) == <span class="literal">false</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="function">FString <span class="title">Name</span><span class="params">(PlatformName ? PlatformName : ANSI_TO_TCHAR(FPlatformProperties::PlatformName()))</span></span>;</span><br><span class="line"></span><br><span class="line">    FString BaseIniNameString = BaseIniName;</span><br><span class="line">    <span class="keyword">if</span> (BaseIniNameString.<span class="built_in">Contains</span>(GeneratedConfigDir))</span><br><span class="line">    &#123;</span><br><span class="line">      IniFilename = BaseIniNameString;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="comment">// put it all together</span></span><br><span class="line">      IniFilename = FString::<span class="built_in">Printf</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;%s%s/%s.ini&quot;</span>), GeneratedConfigDir, *Name, BaseIniName);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// standardize it!</span></span><br><span class="line">  FPaths::<span class="built_in">MakeStandardFilename</span>(IniFilename);</span><br><span class="line">  <span class="keyword">return</span> IniFilename;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>And <code>FPaths::GeneratedConfigDir</code> retrieves the path under the current project’s <code>Saved</code> Config:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Paths.cpp</span></span><br><span class="line"><span class="function">FString <span class="title">FPaths::GeneratedConfigDir</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">if</span> PLATFORM_MAC</span></span><br><span class="line">  <span class="keyword">return</span> FPlatformProcess::<span class="built_in">UserPreferencesDir</span>();</span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line">  <span class="keyword">return</span> FPaths::<span class="built_in">ProjectSavedDir</span>() + <span class="built_in">TEXT</span>(<span class="string">&quot;Config/&quot;</span>);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>That is, the global <code>G*Ini</code> files read when the project starts on the Windows platform are all under <code>Saved/Config/Windows</code> <code>.ini</code>.<br>Moreover, in the implementation of <code>GetDestIniFilename</code>, it can also be seen that the configuration of <code>G*Ini</code> can be passed in through the CommandLine, allowing the default <code>.ini</code> under <code>Saved/Config/Platform</code> to be overridden:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// Using the specified Engine.ini</span><br><span class="line">UE4Editor.exe uprojectPath -EngineINI=<span class="string">&quot;D:\\CustomEngine.ini&quot;</span></span><br></pre></td></tr></table></figure>
<p><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/2386/ue-pass-custom-globalconfig-by-commandline.webp"><br><img data-src="https://img.imzlp.com/imgs/zlp/blog/posts/2386/ue-pass-custom-globalconfig-by-commandline-2.webp"></p>
<p><strong>Further Reading</strong></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://docs.unrealengine.com/en-US/Programming/Basics/ConfigurationFiles/index.html">ConfigurationFiles</a></li>
<li><a target="_blank" rel="noopener" href="https://wiki.unrealengine.com/Config_Files,_Read_%26_Write_to_Config_Files">Config Files, Read &amp; Write to Config Files</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.ch-wind.com/ue4-config-usage/">Using Config in UE4</a></li>
</ul>

    </div>

    
    
        
        
          
            <blockquote class="blockquote-center">
              
                The article is finished. If you have any questions, please comment and communicate.
              
            <br/>
            
                <div class="qr-code" onclick="return false">
                    <script src="/js/qrcode.min.js"></script>
                    <div id="qrcode">
                      
                        <img src="https://imzlp.com/images/wechat-qrcode.webp">
                      
                    <p>Scan the QR code on WeChat and follow me.</p>
                    </div>
                </div>
            
            </blockquote>
          
        

        
          <div class="postCopyright" style="clear:both;">
             <span>Title:</span><a href="/posts/2386/" target="_blank">UE code analysis: GConfig loading</a><br/>
             <span>Author:</span><a href="/about" target="_blank" title="查看 LIPENGZHA 的资料">LIPENGZHA</a><br/>
             <span>Publish Date:</span>2019/05/27 22:57<br/>
             
              <span>Update Date:</span>2020/05/28 18:02<br/>
             
             <span>Word Count:</span><span class="page-count">2.1k Words</span><br/>
             
             <span>Link:</span><a href="/posts/2386/" target="_blank" title="UE code analysis: GConfig loading">https://en.imzlp.com/posts/2386/</a>
             <span class="copy-path" data-clipboard-text="Link: https://en.imzlp.com/posts/2386/ Author: LIPENGZHA" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
             <script src="/js/jquery.min.js"></script>
             <script src="/js/clipboard.min.js"></script>
             <script> var clipboard = new Clipboard('.copy-path'); </script>
             <br/>
             
             <span>License:</span><i class="fab fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" title="Attribution-NonCommercial-ShareAlike 4.0 International">CC BY-NC-SA 4.0</a><br/>
             
             <span>Reprinting of the full article is prohibited.</span>
          </div>
        
    

        
  <div class="reward-container">
    <div>Your donation will encourage me to keep creating!</div>
    <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
      Donate
    </button>
    <div id="qr" style="display: none;">
        
        <div style="display: inline-block;">
          <img src="/images/reward/wechatpay.webp" alt="LIPENGZHA WeChat Pay">
          <p>WeChat Pay</p>
        </div>

    </div>
  </div>



      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/UnrealEngine/" rel="tag"># UnrealEngine</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/posts/3231/" rel="prev" title="UE access to SteamSDK and related information">
      <i class="fa fa-chevron-left"></i> UE access to SteamSDK and related information
    </a></div>
      <div class="post-nav-item">
    <a href="/posts/25331/" rel="next" title="UE development problem notes and data collection">
      UE development problem notes and data collection <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
      <div class="tabs tabs-comment">
        <ul class="nav-tabs">
            <li class="tab"><a href="#comment-utteranc">utteranc</a></li>
            <li class="tab"><a href="#comment-valine">valine</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane utteranc" id="comment-utteranc">
              
  
  <div class="comments">
  <script src="https://utteranc.es/client.js" repo="hxhb/blog-comments" issue-term="pathname" theme="github-light" crossorigin="anonymous" async></script>
  </div>
  
  
            </div>
            <div class="tab-pane valine" id="comment-valine">
              <div class="comments" id="valine-comments"></div>
            </div>
        </div>
      </div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#FConfigCacheIni-InitializeConfigSystem"><span class="nav-number">1.</span> <span class="nav-text">FConfigCacheIni::InitializeConfigSystem</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#FConfigCacheIni-LoadGlobalIniFile"><span class="nav-number">2.</span> <span class="nav-text">FConfigCacheIni::LoadGlobalIniFile</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#FConfigCacheIni-LoadLocalIniFile"><span class="nav-number">3.</span> <span class="nav-text">FConfigCacheIni::LoadLocalIniFile</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#FConfigCacheIni-LoadExternalIniFile"><span class="nav-number">4.</span> <span class="nav-text">FConfigCacheIni::LoadExternalIniFile</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#GetDestIniFilename"><span class="nav-number">5.</span> <span class="nav-text">GetDestIniFilename</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person" oncontextmenu="return false" οndragstart="return false">
    <img class="site-author-image" itemprop="image" alt="LIPENGZHA"
      src="https://img.imzlp.com/imgs/zlp/picgo/2023/202304152112902.webp">
  <p class="site-author-name" itemprop="name">LIPENGZHA</p>
  <div class="site-description" itemprop="description">"I think, therefore I am"</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
             
          <span class="site-state-item-count">190</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">95</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">190</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/hxhb" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;hxhb" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://linkedin.com/in/lipengzha" title="Linkedin → https:&#x2F;&#x2F;linkedin.com&#x2F;in&#x2F;lipengzha" rel="noopener" target="_blank"><i class="fab fa-linkedin fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.zhihu.com/people/imzlp" title="知乎 → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;imzlp" rel="noopener" target="_blank"><i class="fa fa-custom zhihu fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="/images/wechat-qrcode-offical.webp" title="微信公众号 → &#x2F;images&#x2F;wechat-qrcode-offical.webp"><i class="fab fa-weixin fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:imzlp@foxmail.com" title="E-Mail → mailto:imzlp@foxmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fa fa-rss fa-fw"></i></a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://consolehelp.imzlp.com/" title="https:&#x2F;&#x2F;consolehelp.imzlp.com&#x2F;" rel="noopener" target="_blank">UE Console Help</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://imzlp.com/opensource/" title="https:&#x2F;&#x2F;imzlp.com&#x2F;opensource&#x2F;" rel="noopener" target="_blank">Open Source Projects</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://imzlp.com/posts/11515/" title="https:&#x2F;&#x2F;imzlp.com&#x2F;posts&#x2F;11515&#x2F;" rel="noopener" target="_blank">UE C++ API Dash Documents</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://ue5wiki.com/" title="https:&#x2F;&#x2F;ue5wiki.com&#x2F;" rel="noopener" target="_blank">Unreal Engine Wiki</a>
        </li>
    </ul>
  </div>

      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2014 – 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">LIPENGZHA</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="Symbols count total">1.5m</span>
</div>
  <div class="powered-by-other">
    
	    <center>Github Pages | Actions | NeXT | Cloudflare | Hexo Deploy</center>
      
  </div>

<script>
function checkWebp(callback) {
    var img = new Image();
    img.onload = function () { callback((img.width > 0) && (img.height > 0)); };
    img.onerror = function () { callback(false); };
    img.src = 'data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA';
}
function showImage(useWebp) {
    var imgs = [].slice.call(document.querySelectorAll('img'));
    imgs.forEach(function (e) {
        if (!useWebp) {
            var src = e.getAttribute('data-src')
            src = src.replace(/\.webp$/, '.png');
            e.setAttribute('data-src', src);
        }
    });
}
checkWebp(showImage);
</script>

        








      </div>
    </footer>
  </div>

  
  <script src="//lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/animejs/3.2.1/anime.min.js"></script>
  <script src="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/jquery/3.5.1/jquery.min.js"></script>
  <script src="//lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/fancybox/3.5.7/jquery.fancybox.min.js"></script>
  <script src="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/lozad.js/1.16.0/lozad.min.js"></script>
  <script src="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/pangu/4.0.7/pangu.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>



<script src="/js/code-unfold.js"></script>

  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>




  
<script src="/js/local-search.js"></script>









<script>
document.querySelectorAll('.pdfobject-container').forEach(element => {
  let url = element.dataset.target;
  let pdfOpenParams = {
    navpanes : 0,
    toolbar  : 0,
    statusbar: 0,
    pagemode : 'thumbs',
    view     : 'FitH'
  };
  let pdfOpenFragment = '#' + Object.entries(pdfOpenParams).map(([key, value]) => `${key}=${encodeURIComponent(value)}`).join('&');
  let fullURL = `/lib/pdf/web/viewer.html?file=${encodeURIComponent(url)}${pdfOpenFragment}`;

  if (NexT.utils.supportsPDFs()) {
    element.innerHTML = `<embed class="pdfobject" src="${url + pdfOpenFragment}" type="application/pdf" style="height: ${element.dataset.height};">`;
  } else {
    element.innerHTML = `<iframe src="${fullURL}" style="height: ${element.dataset.height};" frameborder="0"></iframe>`;
  }
});
</script>


<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  

  
  <script src="//img.imzlp.com/imgs/zlp/picgo/2021/quicklink.umd.js"></script>
  <script>
      window.addEventListener('load', () => {
      quicklink({
        timeout : 3000,
        priority: true,
        ignores : [uri => uri.includes('#'),uri => uri === 'https://en.imzlp.com/posts/2386/',]
      });
      });
  </script>


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/valine/1.4.14/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    var requiredFields = 'nick';
    requiredFields = requiredFields.split(',');
    
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'oCE6RMVkVoi5MgUhvFsn1EvV-gzGzoHsz',
      appKey     : 'K9SOaNYJ8PV6xaoFggWG5xvv',
      placeholder: "Leave something behind~",
      avatar     : 'robohash',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : 'en' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : '',
      requiredFields: requiredFields
    });
  }, window.Valine);
});
</script>

</body>
</html>
