<!DOCTYPE html>
<html lang="en,default">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon-32x32-tilt-brush.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-tilt-brush.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-tilt-brush.png">
  <link rel="mask-icon" href="/images/favicon-32x32-tilt-brush.png" color="#222">
  <meta name="google-site-verification" content="ttIkhAIFZQM9Huj8roB0l95ePN2Tv2zv2wRFksi09WA">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noto Serif SC:300,300italic,400,400italic,700,700italic|Pacifico:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Roboto Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="//lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/5.15.2/css/all.min.css">
  <link rel="stylesheet" href="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/fancybox/3.5.7/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"en.imzlp.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false,"width":280},"copycode":{"enable":true,"show_result":true,"style":"flat"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"manual"},"fancybox":true,"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":false,"nav":null,"activeClass":"valine"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"code_unfold":{"enable":true,"CODE_MAX_HEIGHT":600},"path":"search.xml"};
  </script>

  <meta name="description" content="In the process of using UE development, specifying command line parameters is a frequently used feature that facilitates control over certain processes and toggles. UE also extensively uses Commandlin">
<meta property="og:type" content="article">
<meta property="og:title" content="Efficient Debugging: Start UE Android App with command line parameters">
<meta property="og:url" content="https://en.imzlp.com/posts/29169/index.html">
<meta property="og:site_name" content="Z&#39;s Blog">
<meta property="og:description" content="In the process of using UE development, specifying command line parameters is a frequently used feature that facilitates control over certain processes and toggles. UE also extensively uses Commandlin">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/picgo/2023/20230118171536.webp">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/picgo/2021/20220102125237.webp">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/picgo/2023/20230206102021.webp">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/picgo/2021/20220103151208.webp">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/picgo/2021/20220103151447.webp">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/picgo/2021/20220103153901.webp">
<meta property="article:published_time" content="2022-01-01T19:58:02.000Z">
<meta property="article:modified_time" content="2022-01-01T19:58:02.000Z">
<meta property="article:author" content="LIPENGZHA">
<meta property="article:tag" content="UnrealEngine">
<meta property="article:tag" content="插件开发">
<meta property="article:tag" content="Android">
<meta property="article:tag" content="Debugging">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img.imzlp.com/imgs/zlp/picgo/2023/20230118171536.webp">

<link rel="canonical" href="https://en.imzlp.com/posts/29169/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>Efficient Debugging: Start UE Android App with command line parameters | Z's Blog</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-FDCJ41EFP5"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-FDCJ41EFP5');
      }
    </script>






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.staticfile.org/lxgw-wenkai-screen-webfont/1.7.0/style.min.css" /><!-- hexo injector head_end end --><link rel="alternate" href="/atom.xml" title="Z's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Z's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        
            
  <li class="menu-item menu-item-notes">

    <a href="/notes/" rel="section"><i class="fa fa-edit fa-fw"></i>Notes</a>

  </li>


      
        
            
  <li class="menu-item menu-item-essay">

    <a href="/essay/" rel="section"><i class="fas fa-feather-alt fa-fw"></i>Essay</a>

  </li>


      
        
            
  <li class="menu-item menu-item-resources">

    <a href="/resources/" rel="section"><i class="fa fa-inbox fa-fw"></i>Resources</a>

  </li>


      
        <li class="menu-item menu-item-friends">

    <a href="/friends/" rel="section"><i class="fas fa-link fa-fw"></i>Friends</a>

  </li>
        
            
  <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About Me</a>

  </li>


      
        <li class="menu-item menu-item-showcase">

    <a href="/showcase/" rel="section"><i class="fa fa-solid fa-trophy fa-fw"></i>ShowCase</a>

  </li>
        <li class="menu-item menu-item-changelog">

    <a href="/changelog/" rel="section"><i class="fa fa-history fa-fw"></i>Site Log</a>

  </li>
        <li class="menu-item menu-item-opensource">

    <a href="/opensource/" rel="section"><i class="fas fa-code-branch fa-fw"></i>Open Source</a>

  </li>
        <li class="menu-item menu-item-uewiki">

    <a href="https://ue5wiki.com/" rel="noopener" target="_blank"><i class="fab fa-wikipedia-w fa-fw"></i>Unreal Wiki</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>



<script type="text/javascript">
  let domain='en.imzlp.com';
  let domain_str = atob(domain);
  let pathname = location.pathname;
  if (domain_str!= location.host.toLowerCase()){
        console.log(`this host is not safe,jump to https://${domain_str}${pathname}`);
        location.href=`https://${domain_str}${pathname}`;
  }
</script>

</div>
    </header>

    
  <div class="reading-progress-bar"></div>
  <div class="l10n-header-widget">
    <script>
      // 获取当前页面的 URL
      const currentUrl = window.location.href;
      // 替换 URL 中的部分内容
      const jumpToL10nLink = currentUrl.replace('en.imzlp.com', 'imzlp.com');
      // 将 jumpToL10nLink 绑定到一个全局变量
      window.jumpToL10nLink = jumpToL10nLink;
    </script>

    <a href="#" class="post-l10n-link" title="切换至中文版本" style="float: left;border-bottom: none;" rel="noopener" target="_blank" onclick="window.open(window.jumpToL10nLink, '_blank'); return false;">
      <i class="fa fa-solid fa-language"></i>
    </a>
  </div>



    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en"
  >
    <link itemprop="mainEntityOfPage" href="https://en.imzlp.com/posts/29169/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://img.imzlp.com/imgs/zlp/picgo/2023/202304152112902.webp">
      <meta itemprop="name" content="LIPENGZHA">
      <meta itemprop="description" content=""I think, therefore I am"">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Z's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Efficient Debugging: Start UE Android App with command line parameters<a href="https://github.com/imzlp/blog-md/blob/en/_posts/2022-01-01-29169.md" class="post-edit-link" title="Edit this post" style="float: right;border-bottom: 0px;" rel="noopener" target="_blank"><i class="fa fa-pen-nib"></i></a><a href="https://imzlp.com/posts/29169/" class="post-l10n-link" title="切换至中文版本" style="float: left;border-bottom: 0px;" rel="noopener" target="_blank"><i class="fa fa-solid fa-language"></i></a>
        </h1>

        
          <div class="post-subtitle" style="text-align: center;line-height: 1;">
            <sub text-align="center" style="font-size: 15px;align-content: center;font-style: italic;bottom: 0em;">高效调试：命令行参数启动UE Android App</sub>
          </div>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-01-01 19:58 19:58:02:58" itemprop="dateCreated datePublished" datetime="2022-01-01T19:58:02+00:00">2022-01-01 19:58</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/UnrealEngine/" itemprop="url" rel="index"><span itemprop="name">UnrealEngine</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/UnrealEngine/%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">插件开发</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/UnrealEngine/%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/Debugging/" itemprop="url" rel="index"><span itemprop="name">Debugging</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/UnrealEngine/%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/Debugging/Android/" itemprop="url" rel="index"><span itemprop="name">Android</span></a>
                </span>
            </span>

          
            <span id="/posts/29169/" class="post-meta-item leancloud_visitors" data-flag-title="Efficient Debugging: Start UE Android App with command line parameters" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>5.8k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>14 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>In the process of using UE development, specifying command line parameters is a frequently used feature that facilitates control over certain processes and toggles. UE also extensively uses Commandline to control the behavior of the engine. The official documentation: <a target="_blank" rel="noopener" href="https://docs.unrealengine.com/4.27/en-US/ProductionPipelines/CommandLineArguments/">Command-Line Arguments</a>, allows different modules to read or check parameters from the Commandline, implementing custom command line parameter functionalities.</p>
<p>However, for the mobile Android platform, it is not very convenient to specify startup parameters; editing the <code>ue4commandline.txt</code> file is quite cumbersome.</p>
<p>Based on this pain point, I developed a UE Android plugin during the New Year holiday that allows Android applications to start and specify command line parameters as conveniently as on PC, without needing to modify the engine. Once the plugin is activated, you can package the APK for use. The project is open-sourced on GitHub: <a target="_blank" rel="noopener" href="https://github.com/hxhb/AppCmderUE">hxhb/AppCmderUE</a>.</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2023/20230118171536.webp"></p>
<p>This article analyzes how UE reads Commandline on the Android side and introduces the implementation principles and usage methods of the <a target="_blank" rel="noopener" href="https://github.com/hxhb/AppCmderUE">AppCmderUE</a> plugin.</p>
<span id="more"></span>

<p>On desktop platforms like Windows and Mac, you only need to specify the application path and parameters in a script environment like CMD or bash:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">UE4Editor.exe D:\UnrealProject\BlankGame.uproject -game</span><br><span class="line">BlankGame.exe -<span class="built_in">log</span></span><br></pre></td></tr></table></figure>

<p>They will all be passed to the default program entry <code>main</code> function:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>** argv)</span></span>;</span><br></pre></td></tr></table></figure>

<p>Then, it sets the command line for the engine using <code>FCommandLine::Set</code> for runtime use.</p>
<p>As previously mentioned, using <a target="_blank" rel="noopener" href="https://imzlp.com/posts/14154/">Unreal Insights</a> also requires specifying <code>-tracehost</code> and <code>-trace=cpu</code> for controlling the types of profiling data collected and the machine IP to which it is transmitted.</p>
<p><strong>However</strong>, there is no convenient method to specify startup parameters for mobile applications developed with UE. UE provides a default mechanism to edit a <code>ue4commandline.txt</code> file, filling in the command line parameters. When the engine starts, it will load this file and append it to the FCommandline of the engine.</p>
<p>I have introduced this method in my previous wiki: <a target="_blank" rel="noopener" href="https://ue5wiki.com/wiki/26262/">Mobile Startup Parameters</a>.</p>
<p>This method is not elegant and has several issues:</p>
<ol>
<li>The <code>ue4commandline.txt</code> file does not exist by default and must be created manually;</li>
<li>Each modification of the parameters requires accessing the file on the device, modifying it, and saving it;</li>
<li>If you do not want to use startup parameters, you must delete it manually;</li>
<li>On Android 11, tighter permission controls prevent access to the data directory on PC;</li>
</ol>
<p>Since these pain points were discovered, I attempted to create a new project to address them. To avoid reinventing the wheel and to see what workflows could be leveraged in the engine, I found through code review that besides <code>ue4commandline.txt</code>, there are two other ways to add command line parameters in UE.</p>
<h3 id="AndroidConfigRuleSystem"><a href="#AndroidConfigRuleSystem" class="headerlink" title="AndroidConfigRuleSystem"></a>AndroidConfigRuleSystem</h3><ol>
<li>Through AndroidConfigRuleSystem, <a target="_blank" rel="noopener" href="https://docs.unrealengine.com/4.27/zh-CN/SharingAndReleasing/Mobile/Android/AndroidConfigRulesSystem/">Android Configuration Rules System</a>, it is read in <a target="_blank" rel="noopener" href="https://github.com/EpicGames/UnrealEngine/blob/9e0f5f2a419a75b83392c44bf75462366ca8c1e2/Engine/Build/Android/Java/src/com/epicgames/ue4/GameActivity.java.template#L1579">GameActivity.java.template#L1579</a> and passed to the engine’s C++ side via JNI (<a target="_blank" rel="noopener" href="https://github.com/EpicGames/UnrealEngine/blob/99b6e203a15d04fc7bbbf554c421a985c1ccb8f1/Engine/Source/Runtime/Core/Private/Android/AndroidPlatformMisc.cpp#L2490">Java_com_epicgames_ue4_GameActivity_nativeSetConfigRulesVariables</a>), ultimately being retrieved in <code>InitCommandLine</code> and appended to the engine’s command line parameters.</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Launch/Private/Android/LaunchAndroid.<span class="function">cpp</span></span><br><span class="line"><span class="function"><span class="title">if</span> <span class="params">(FString* ConfigRulesCmdLineAppend = FAndroidMisc::GetConfigRulesVariable(TEXT(<span class="string">&quot;cmdline&quot;</span>)))</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	FCommandLine::<span class="built_in">Append</span>(**ConfigRulesCmdLineAppend);</span><br><span class="line">	FPlatformMisc::<span class="built_in">LowLevelOutputDebugStringf</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;ConfigRules appended: %s&quot;</span>), **ConfigRulesCmdLineAppend);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>However, it is not possible to dynamically set it within the engine; it can only be set at the packaging stage and read at runtime.</p>
<h3 id="adb-shell-setprop"><a href="#adb-shell-setprop" class="headerlink" title="adb shell setprop"></a>adb shell setprop</h3><ol start="2">
<li>The <code>setprop</code> command can be used to set a property named <code>debug.ue4.commandline</code> via adb, filling the parameter in, which will be appended to the startup parameters. Support for this was only added in the UE4.26 engine, so it cannot be used in UE4.25 and earlier.</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Name of the UE4 commandline append setprop</span></span><br><span class="line"><span class="type">static</span> <span class="keyword">constexpr</span> <span class="type">char</span> UE4CommandLineSetprop[] = <span class="string">&quot;debug.ue4.commandline&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">char</span> CommandLineSetpropAppend[CMD_LINE_MAX];</span><br><span class="line"><span class="keyword">if</span> (__system_property_get(UE4CommandLineSetprop, CommandLineSetpropAppend) &gt; <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">	FCommandLine::<span class="built_in">Append</span>(<span class="built_in">UTF8_TO_TCHAR</span>(<span class="string">&quot; &quot;</span>));</span><br><span class="line">	FCommandLine::<span class="built_in">Append</span>(<span class="built_in">UTF8_TO_TCHAR</span>(CommandLineSetpropAppend));</span><br><span class="line">	FPlatformMisc::<span class="built_in">LowLevelOutputDebugStringf</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;UE4 setprop appended: %s&quot;</span>), <span class="built_in">UTF8_TO_TCHAR</span>(CommandLineSetpropAppend));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Usage example:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adb shell setprop debug.ue4.commandline <span class="string">&#x27;-test123&#x27;</span></span><br><span class="line">adb shell am start com.tencent.tmgp.fmgame/com.epicgames.ue4.GameActivity</span><br></pre></td></tr></table></figure>
<p>If the LaunchImage at startup is enabled:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bool</span> bShowLaunchImage = <span class="literal">false</span>;</span><br><span class="line">Ini.GetBool(<span class="string">&quot;/Script/AndroidRuntimeSettings.AndroidRuntimeSettings&quot;</span>, <span class="string">&quot;bShowLaunchImage&quot;</span>, <span class="keyword">out</span> bShowLaunchImage);</span><br></pre></td></tr></table></figure>
<p>the launched Activity will change from <code>com.epicgames.ue4.GameActivity</code> to <code>com.epicgames.ue4.SplashActivity</code>.</p>
<p>However, this approach also has drawbacks:</p>
<ol>
<li>Requires executing two commands.</li>
<li>After <code>setprop</code>, this property persists until the next reboot.</li>
<li>Engines prior to 4.25 cannot use it.</li>
</ol>
<h3 id="AppCmderUE"><a href="#AppCmderUE" class="headerlink" title="AppCmderUE"></a>AppCmderUE</h3><p>I have implemented a solution based on UPL and JNI that combines the advantages of both methods. Just place the plugin in the project, enable it, and package it without any further configuration.</p>
<p>Let’s look at the final effect; the startup command:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">append_cmd.bat com.imzlp.gworld <span class="string">&quot;-test123&quot;</span> <span class="string">&quot;-test456&quot;</span> <span class="string">&quot;-test789&quot;</span></span><br></pre></td></tr></table></figure>

<p>UE Log:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Final commandline: ../../../Blank426/Blank426.uproject -test123 -test456 -test789</span><br></pre></td></tr></table></figure>

<p>Implementation principles:</p>
<ol>
<li>The Java side receives parameters via Intent with <code>-e</code>.</li>
<li>In <code>OnCreate</code>, it uses JNI to interact with the engine layer and adds Intent parameters to the AndroidConfigRuleSystem.</li>
<li>Utilizing UE’s own support for the AndroidConfigRuleSystem, the engine can automatically append them to FCommandLine.</li>
</ol>
<p>The code is not extensive, but by leveraging the Java-side GameActivity and the engine’s UPL, JNI, and other execution workflows, all functionalities can be realized without modifying the engine.</p>
<p><code>append_cmd.bat</code> is a script I wrapped around the adb command for ease of use:</p>
<figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">setlocal</span> enabledelayedexpansion</span><br><span class="line"><span class="built_in">set</span> PROGRAM_NAME = %<span class="number">0</span></span><br><span class="line"><span class="built_in">set</span> PACKAGE_NAME=%<span class="number">1</span></span><br><span class="line"><span class="built_in">set</span> CMD_LINE_ARGS=&quot; &quot;</span><br><span class="line"></span><br><span class="line"><span class="keyword">FOR</span> <span class="variable">%%I</span> <span class="keyword">IN</span> (%*) <span class="keyword">do</span> (</span><br><span class="line"><span class="comment">    @REM echo %%I</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">NOT</span> &quot;<span class="variable">%PROGRAM_NAME%</span>&quot; == &quot;<span class="variable">%%I</span>&quot; (</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">NOT</span> &quot;<span class="variable">%PACKAGE_NAME%</span>&quot; == &quot;<span class="variable">%%I</span>&quot; (</span><br><span class="line">            <span class="keyword">if</span> <span class="variable">!CMD_LINE_ARGS!</span> == &quot; &quot; (</span><br><span class="line">                <span class="built_in">set</span> CMD_LINE_ARGS=<span class="variable">%%I</span></span><br><span class="line"><span class="comment">                @REM echo %CMD_LINE_ARGS%</span></span><br><span class="line">            ) <span class="keyword">else</span> (</span><br><span class="line">                <span class="built_in">set</span> CMD_LINE_ARGS=<span class="variable">!CMD_LINE_ARGS!</span>/.,;/<span class="variable">%%I</span></span><br><span class="line"><span class="comment">                @REM echo %CMD_LINE_ARGS%</span></span><br><span class="line">            )</span><br><span class="line">        )</span><br><span class="line">    )</span><br><span class="line">)</span><br><span class="line"><span class="comment">@REM echo adb shell am start -a android.intent.action.MAIN -n %PACKAGE_NAME%/com.epicgames.ue4.GameActivity --es cmdline %CMD_LINE_ARGS%</span></span><br><span class="line">adb shell am <span class="built_in">start</span> -a android.intent.action.MAIN -n <span class="variable">%PACKAGE_NAME%</span>/com.epicgames.ue4.GameActivity --es cmdline <span class="variable">%CMD_LINE_ARGS%</span></span><br></pre></td></tr></table></figure>

<p>This command requires passing two parameters:</p>
<ol>
<li>The package name of the UE packaged APK, such as <code>com.imzlp.gworld</code>;</li>
<li>A list of parameters, separated by spaces. Each parameter needs to be wrapped in double quotes (<code>&quot;&quot;</code>). When the script forwards to adb, <code>append_cmd.bat</code> will modify the parameters to be separated by <code>/.,;/</code> to avoid interference with the included symbols.</li>
</ol>
<p>For example:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">append_cmd.bat com.imzlp.gworld <span class="string">&quot;-tracehost=127.0.0.1&quot;</span> <span class="string">&quot;-trace=cpu&quot;</span></span><br></pre></td></tr></table></figure>

<p>The actual adb command will be:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell am start -a android.intent.action.MAIN -n com.imzlp.gworld/com.epicgames.ue4.GameActivity --es cmdline <span class="string">&quot;-tracehost=127.0.0.1&quot;</span>/.,;/<span class="string">&quot;-trace=cpu&quot;</span></span><br></pre></td></tr></table></figure>

<p>On the engine side, it will automatically parse and append them to FCommandLine in the original format. After executing the above command, profiling data can be directly seen on the PC:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/20220102125237.webp"></p>
<p>Additionally, on the Android 11 system, because system permissions have tightened, a non-rooted system cannot directly access files in UE’s sandbox path (<code>Android/data/com.xxx.xxxx</code>). If game data paths are in the sandbox directory, it is not convenient to retrieve log files from the device. With the AppCmderUE plugin, you can easily specify UE’s log to another path without modifications to the project.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">append_cmd.bat com.imzlp.GWorld &quot;-abslog=/storage/emulated/0/GWorld.log&quot;</span><br></pre></td></tr></table></figure>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2023/20230206102021.webp"></p>
<p>Thus, executing the <code>append_cmd.bat</code> script will automatically launch the app on the phone and append the parameters, achieving similar functionality to PC.</p>
<p>This approach applies only to Android; a similar solution for iOS can be explored further given time.</p>
<h3 id="ADB-over-Wi-Fi"><a href="#ADB-over-Wi-Fi" class="headerlink" title="ADB over Wi-Fi"></a>ADB over Wi-Fi</h3><p>In addition to using a USB connection to Android devices, adb also supports Wi-Fi mode. Based on this article’s <a target="_blank" rel="noopener" href="https://github.com/hxhb/AppCmderUE">hxhb/AppCmderUE</a> project and ADB over Wi-Fi, remote profiling becomes very convenient.</p>
<ol start="0">
<li>Connect the device via USB.</li>
<li>Let the device’s <code>adbd</code> daemon listen on port 5555, waiting for PC connections.</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb tcpip 5555</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>Check the device IP to get the <code>wlan0</code> IP address.</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell ifconfig</span><br></pre></td></tr></table></figure>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/20220103151208.webp"></p>
<ol start="3">
<li><p>Disconnect the USB connection to the device.</p>
</li>
<li><p>Connect to the device remotely via adb.</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adb connect DEVICE_IP:5555</span><br><span class="line"><span class="comment"># adb connect 192.168.31.172:5555</span></span><br></pre></td></tr></table></figure>
<ol start="5">
<li>By using <code>adb devices</code>, you can see the connected remote device.</li>
</ol>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/20220103151447.webp"></p>
<p>Once the remote adb environment is set up, you can use <code>append_cmd.bat</code> to remotely start and profile the UE project:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">append_cmd.bat com.imzlp.gworld <span class="string">&quot;-tracehost=192.168.31.175&quot;</span> <span class="string">&quot;-trace=cpu&quot;</span></span><br></pre></td></tr></table></figure>
<p>The profiling data can also be captured on the PC using Unreal Insights:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/20220103153901.webp"></p>
<h3 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h3><p>Based on the <a target="_blank" rel="noopener" href="https://github.com/hxhb/AppCmderUE">hxhb/AppCmderUE</a> project, it becomes extremely convenient to pass startup parameters to apps developed with UE, greatly enhancing efficiency in development debugging and performance analysis.</p>

    </div>

    
    
        
        
          
            <blockquote class="blockquote-center">
              
                The article is finished. If you have any questions, please comment and communicate.
              
            <br/>
            
                <div class="qr-code" onclick="return false">
                    <script src="/js/qrcode.min.js"></script>
                    <div id="qrcode">
                      
                        <img src="https://imzlp.com/images/wechat-qrcode.webp">
                      
                    <p>Scan the QR code on WeChat and follow me.</p>
                    </div>
                </div>
            
            </blockquote>
          
        

        
          <div class="postCopyright" style="clear:both;">
             <span>Title:</span><a href="/posts/29169/" target="_blank">Efficient Debugging: Start UE Android App with command line parameters</a><br/>
             <span>Author:</span><a href="/about" target="_blank" title="查看 LIPENGZHA 的资料">LIPENGZHA</a><br/>
             <span>Publish Date:</span>2022/01/01 19:58<br/>
             
             <span>Word Count:</span><span class="page-count">5.8k Words</span><br/>
             
             <span>Link:</span><a href="/posts/29169/" target="_blank" title="Efficient Debugging: Start UE Android App with command line parameters">https://en.imzlp.com/posts/29169/</a>
             <span class="copy-path" data-clipboard-text="Link: https://en.imzlp.com/posts/29169/ Author: LIPENGZHA" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
             <script src="/js/jquery.min.js"></script>
             <script src="/js/clipboard.min.js"></script>
             <script> var clipboard = new Clipboard('.copy-path'); </script>
             <br/>
             
             <span>License:</span><i class="fab fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" title="Attribution-NonCommercial-ShareAlike 4.0 International">CC BY-NC-SA 4.0</a><br/>
             
             <span>Reprinting of the full article is prohibited.</span>
          </div>
        
    

        
  <div class="reward-container">
    <div>Your donation will encourage me to keep creating!</div>
    <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
      Donate
    </button>
    <div id="qr" style="display: none;">
        
        <div style="display: inline-block;">
          <img src="/images/reward/wechatpay.webp" alt="LIPENGZHA WeChat Pay">
          <p>WeChat Pay</p>
        </div>

    </div>
  </div>



      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/UnrealEngine/" rel="tag"># UnrealEngine</a>
              <a href="/tags/%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/" rel="tag"># 插件开发</a>
              <a href="/tags/Android/" rel="tag"># Android</a>
              <a href="/tags/Debugging/" rel="tag"># Debugging</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/posts/24725/" rel="prev" title="Shader compression scheme based on ZSTD dictionary">
      <i class="fa fa-chevron-left"></i> Shader compression scheme based on ZSTD dictionary
    </a></div>
      <div class="post-nav-item">
    <a href="/posts/22570/" rel="next" title="UE Resource Management: Engine Packaging Resource Analysis">
      UE Resource Management: Engine Packaging Resource Analysis <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
      <div class="tabs tabs-comment">
        <ul class="nav-tabs">
            <li class="tab"><a href="#comment-utteranc">utteranc</a></li>
            <li class="tab"><a href="#comment-valine">valine</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane utteranc" id="comment-utteranc">
              
  
  <div class="comments">
  <script src="https://utteranc.es/client.js" repo="hxhb/blog-comments" issue-term="pathname" theme="github-light" crossorigin="anonymous" async></script>
  </div>
  
  
            </div>
            <div class="tab-pane valine" id="comment-valine">
              <div class="comments" id="valine-comments"></div>
            </div>
        </div>
      </div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#AndroidConfigRuleSystem"><span class="nav-number">1.</span> <span class="nav-text">AndroidConfigRuleSystem</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#adb-shell-setprop"><span class="nav-number">2.</span> <span class="nav-text">adb shell setprop</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AppCmderUE"><span class="nav-number">3.</span> <span class="nav-text">AppCmderUE</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ADB-over-Wi-Fi"><span class="nav-number">4.</span> <span class="nav-text">ADB over Wi-Fi</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Conclusion"><span class="nav-number">5.</span> <span class="nav-text">Conclusion</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person" oncontextmenu="return false" οndragstart="return false">
    <img class="site-author-image" itemprop="image" alt="LIPENGZHA"
      src="https://img.imzlp.com/imgs/zlp/picgo/2023/202304152112902.webp">
  <p class="site-author-name" itemprop="name">LIPENGZHA</p>
  <div class="site-description" itemprop="description">"I think, therefore I am"</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
             
          <span class="site-state-item-count">190</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">95</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">190</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/hxhb" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;hxhb" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://linkedin.com/in/lipengzha" title="Linkedin → https:&#x2F;&#x2F;linkedin.com&#x2F;in&#x2F;lipengzha" rel="noopener" target="_blank"><i class="fab fa-linkedin fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.zhihu.com/people/imzlp" title="知乎 → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;imzlp" rel="noopener" target="_blank"><i class="fa fa-custom zhihu fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="/images/wechat-qrcode-offical.webp" title="微信公众号 → &#x2F;images&#x2F;wechat-qrcode-offical.webp"><i class="fab fa-weixin fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:imzlp@foxmail.com" title="E-Mail → mailto:imzlp@foxmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fa fa-rss fa-fw"></i></a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://consolehelp.imzlp.com/" title="https:&#x2F;&#x2F;consolehelp.imzlp.com&#x2F;" rel="noopener" target="_blank">UE Console Help</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://imzlp.com/opensource/" title="https:&#x2F;&#x2F;imzlp.com&#x2F;opensource&#x2F;" rel="noopener" target="_blank">Open Source Projects</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://imzlp.com/posts/11515/" title="https:&#x2F;&#x2F;imzlp.com&#x2F;posts&#x2F;11515&#x2F;" rel="noopener" target="_blank">UE C++ API Dash Documents</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://ue5wiki.com/" title="https:&#x2F;&#x2F;ue5wiki.com&#x2F;" rel="noopener" target="_blank">Unreal Engine Wiki</a>
        </li>
    </ul>
  </div>

      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2014 – 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">LIPENGZHA</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="Symbols count total">1.5m</span>
</div>
  <div class="powered-by-other">
    
	    <center>Github Pages | Actions | NeXT | Cloudflare | Hexo Deploy</center>
      
  </div>

<script>
function checkWebp(callback) {
    var img = new Image();
    img.onload = function () { callback((img.width > 0) && (img.height > 0)); };
    img.onerror = function () { callback(false); };
    img.src = 'data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA';
}
function showImage(useWebp) {
    var imgs = [].slice.call(document.querySelectorAll('img'));
    imgs.forEach(function (e) {
        if (!useWebp) {
            var src = e.getAttribute('data-src')
            src = src.replace(/\.webp$/, '.png');
            e.setAttribute('data-src', src);
        }
    });
}
checkWebp(showImage);
</script>

        








      </div>
    </footer>
  </div>

  
  <script src="//lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/animejs/3.2.1/anime.min.js"></script>
  <script src="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/jquery/3.5.1/jquery.min.js"></script>
  <script src="//lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/fancybox/3.5.7/jquery.fancybox.min.js"></script>
  <script src="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/lozad.js/1.16.0/lozad.min.js"></script>
  <script src="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/pangu/4.0.7/pangu.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>



<script src="/js/code-unfold.js"></script>

  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>




  
<script src="/js/local-search.js"></script>









<script>
document.querySelectorAll('.pdfobject-container').forEach(element => {
  let url = element.dataset.target;
  let pdfOpenParams = {
    navpanes : 0,
    toolbar  : 0,
    statusbar: 0,
    pagemode : 'thumbs',
    view     : 'FitH'
  };
  let pdfOpenFragment = '#' + Object.entries(pdfOpenParams).map(([key, value]) => `${key}=${encodeURIComponent(value)}`).join('&');
  let fullURL = `/lib/pdf/web/viewer.html?file=${encodeURIComponent(url)}${pdfOpenFragment}`;

  if (NexT.utils.supportsPDFs()) {
    element.innerHTML = `<embed class="pdfobject" src="${url + pdfOpenFragment}" type="application/pdf" style="height: ${element.dataset.height};">`;
  } else {
    element.innerHTML = `<iframe src="${fullURL}" style="height: ${element.dataset.height};" frameborder="0"></iframe>`;
  }
});
</script>


<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  

  
  <script src="//img.imzlp.com/imgs/zlp/picgo/2021/quicklink.umd.js"></script>
  <script>
      window.addEventListener('load', () => {
      quicklink({
        timeout : 3000,
        priority: true,
        ignores : [uri => uri.includes('#'),uri => uri === 'https://en.imzlp.com/posts/29169/',]
      });
      });
  </script>


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/valine/1.4.14/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    var requiredFields = 'nick';
    requiredFields = requiredFields.split(',');
    
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'oCE6RMVkVoi5MgUhvFsn1EvV-gzGzoHsz',
      appKey     : 'K9SOaNYJ8PV6xaoFggWG5xvv',
      placeholder: "Leave something behind~",
      avatar     : 'robohash',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : 'en' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : '',
      requiredFields: requiredFields
    });
  }, window.Valine);
});
</script>

</body>
</html>
