<!DOCTYPE html>
<html lang="en,default">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon-32x32-tilt-brush.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-tilt-brush.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-tilt-brush.png">
  <link rel="mask-icon" href="/images/favicon-32x32-tilt-brush.png" color="#222">
  <meta name="google-site-verification" content="ttIkhAIFZQM9Huj8roB0l95ePN2Tv2zv2wRFksi09WA">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noto Serif SC:300,300italic,400,400italic,700,700italic|Pacifico:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Roboto Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="//lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/5.15.2/css/all.min.css">
  <link rel="stylesheet" href="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/fancybox/3.5.7/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"en.imzlp.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false,"width":280},"copycode":{"enable":true,"show_result":true,"style":"flat"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"manual"},"fancybox":true,"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":false,"nav":null,"activeClass":"valine"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"code_unfold":{"enable":true,"CODE_MAX_HEIGHT":600},"path":"search.xml"};
  </script>

  <meta name="description" content="ASTC stands for Adaptive Scalable Texture Compression, which is a popular texture compression scheme on mobile platforms. When the platform uses ASTC packaging, UE defaults to using the Intel ISPC Tex">
<meta property="og:type" content="article">
<meta property="og:title" content="ASTC texture compression analysis and efficiency optimization in UE">
<meta property="og:url" content="https://en.imzlp.com/posts/7181/index.html">
<meta property="og:site_name" content="Z&#39;s Blog">
<meta property="og:description" content="ASTC stands for Adaptive Scalable Texture Compression, which is a popular texture compression scheme on mobile platforms. When the platform uses ASTC packaging, UE defaults to using the Intel ISPC Tex">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/picgo/2023/20230204123239.webp">
<meta property="article:published_time" content="2022-09-08T19:01:53.000Z">
<meta property="article:modified_time" content="2022-09-08T19:01:53.000Z">
<meta property="article:author" content="LIPENGZHA">
<meta property="article:tag" content="UnrealEngine">
<meta property="article:tag" content="Android">
<meta property="article:tag" content="ASTC">
<meta property="article:tag" content="贴图压缩">
<meta property="article:tag" content="包体优化">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img.imzlp.com/imgs/zlp/picgo/2023/20230204123239.webp">

<link rel="canonical" href="https://en.imzlp.com/posts/7181/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>ASTC texture compression analysis and efficiency optimization in UE | Z's Blog</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-FDCJ41EFP5"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-FDCJ41EFP5');
      }
    </script>






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.staticfile.org/lxgw-wenkai-screen-webfont/1.7.0/style.min.css" /><!-- hexo injector head_end end --><link rel="alternate" href="/atom.xml" title="Z's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Z's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        
            
  <li class="menu-item menu-item-notes">

    <a href="/notes/" rel="section"><i class="fa fa-edit fa-fw"></i>Notes</a>

  </li>


      
        
            
  <li class="menu-item menu-item-essay">

    <a href="/essay/" rel="section"><i class="fas fa-feather-alt fa-fw"></i>Essay</a>

  </li>


      
        
            
  <li class="menu-item menu-item-resources">

    <a href="/resources/" rel="section"><i class="fa fa-inbox fa-fw"></i>Resources</a>

  </li>


      
        <li class="menu-item menu-item-friends">

    <a href="/friends/" rel="section"><i class="fas fa-link fa-fw"></i>Friends</a>

  </li>
        
            
  <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About Me</a>

  </li>


      
        <li class="menu-item menu-item-showcase">

    <a href="/showcase/" rel="section"><i class="fa fa-solid fa-trophy fa-fw"></i>ShowCase</a>

  </li>
        <li class="menu-item menu-item-changelog">

    <a href="/changelog/" rel="section"><i class="fa fa-history fa-fw"></i>Site Log</a>

  </li>
        <li class="menu-item menu-item-opensource">

    <a href="/opensource/" rel="section"><i class="fas fa-code-branch fa-fw"></i>Open Source</a>

  </li>
        <li class="menu-item menu-item-uewiki">

    <a href="https://ue5wiki.com/" rel="noopener" target="_blank"><i class="fab fa-wikipedia-w fa-fw"></i>Unreal Wiki</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>



<script type="text/javascript">
  let domain='en.imzlp.com';
  let domain_str = atob(domain);
  let pathname = location.pathname;
  if (domain_str!= location.host.toLowerCase()){
        console.log(`this host is not safe,jump to https://${domain_str}${pathname}`);
        location.href=`https://${domain_str}${pathname}`;
  }
</script>

</div>
    </header>

    
  <div class="reading-progress-bar"></div>
  <div class="l10n-header-widget">
    <script>
      // 获取当前页面的 URL
      const currentUrl = window.location.href;
      // 替换 URL 中的部分内容
      const jumpToL10nLink = currentUrl.replace('en.imzlp.com', 'imzlp.com');
      // 将 jumpToL10nLink 绑定到一个全局变量
      window.jumpToL10nLink = jumpToL10nLink;
    </script>

    <a href="#" class="post-l10n-link" title="切换至中文版本" style="float: left;border-bottom: none;" rel="noopener" target="_blank" onclick="window.open(window.jumpToL10nLink, '_blank'); return false;">
      <i class="fa fa-solid fa-language"></i>
    </a>
  </div>



    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en"
  >
    <link itemprop="mainEntityOfPage" href="https://en.imzlp.com/posts/7181/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://img.imzlp.com/imgs/zlp/picgo/2023/202304152112902.webp">
      <meta itemprop="name" content="LIPENGZHA">
      <meta itemprop="description" content=""I think, therefore I am"">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Z's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          ASTC texture compression analysis and efficiency optimization in UE<a href="https://github.com/imzlp/blog-md/blob/en/_posts/2022-09-08-7181.md" class="post-edit-link" title="Edit this post" style="float: right;border-bottom: 0px;" rel="noopener" target="_blank"><i class="fa fa-pen-nib"></i></a><a href="https://imzlp.com/posts/7181/" class="post-l10n-link" title="切换至中文版本" style="float: left;border-bottom: 0px;" rel="noopener" target="_blank"><i class="fa fa-solid fa-language"></i></a>
        </h1>

        
          <div class="post-subtitle" style="text-align: center;line-height: 1;">
            <sub text-align="center" style="font-size: 15px;align-content: center;font-style: italic;bottom: 0em;">UE中ASTC贴图压缩分析及效率优化</sub>
          </div>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-09-08 19:01 19:01:53:01" itemprop="dateCreated datePublished" datetime="2022-09-08T19:01:53+00:00">2022-09-08 19:01</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/UnrealEngine/" itemprop="url" rel="index"><span itemprop="name">UnrealEngine</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/UnrealEngine/ASTC/" itemprop="url" rel="index"><span itemprop="name">ASTC</span></a>
                </span>
            </span>

          
            <span id="/posts/7181/" class="post-meta-item leancloud_visitors" data-flag-title="ASTC texture compression analysis and efficiency optimization in UE" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>8.4k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>21 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p><code>ASTC</code> stands for <code>Adaptive Scalable Texture Compression</code>, which is a popular texture compression scheme on mobile platforms. When the platform uses ASTC packaging, UE defaults to using the <a target="_blank" rel="noopener" href="https://github.com/GameTechDev/ISPCTextureCompressor">Intel ISPC Texture Compressor</a> for texture compression. However, it has some limitations, only supporting compression specifications of <code>8x8</code> and above, while <code>10x10</code> and <code>12x12</code> are not supported. If specified in the project, it will still use the <code>8x8</code> specification. In addition to <a target="_blank" rel="noopener" href="https://github.com/GameTechDev/ISPCTextureCompressor">ISPC</a>, the engine also provides ARM’s <a target="_blank" rel="noopener" href="https://github.com/ARM-software/astc-encoder">astc-encoder</a> compression method, which supports specifications below <code>8x8</code>, but is not enabled by default. Moreover, the integrated compression efficiency in the engine is very low, and using <a target="_blank" rel="noopener" href="https://github.com/ARM-software/astc-encoder">astc-encoder</a> to compress textures can pose a significant challenge to Cook time in large-scale resources.</p>
<p>This article analyzes the settings for using ASTC compression for textures in UE, as well as the compression efficiency and optimization ideas for the <a target="_blank" rel="noopener" href="https://github.com/ARM-software/astc-encoder">astc-encoder</a> in the engine.</p>
<span id="more"></span>

<h2 id="Texture-Compression-Configuration"><a href="#Texture-Compression-Configuration" class="headerlink" title="Texture Compression Configuration"></a>Texture Compression Configuration</h2><p>In <code>Project Settings</code>-<code>Cooker</code>-<code>Texture</code>, you can set the default resource quality and size levels: <a target="_blank" rel="noopener" href="https://cs.github.com/EpicGames/UnrealEngine/blob/d9d435c9c280b99a6c679b517adedd3f4b02cfd7/Engine/Source/Developer/DeveloperToolSettings/Classes/CookerSettings.h?q=ASTC+Compression+vs+Size#L161">CookerSettings.h</a></p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2022/image-20220909155342437.webp"></p>
<p>Comparison with ASTC block sizes:</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">0=12x12 </span><br><span class="line">1=10x10 </span><br><span class="line">2=8x8 </span><br><span class="line">3=6x6 </span><br><span class="line">4=4x4 </span><br></pre></td></tr></table></figure>
<p>The default value in the engine is 3: <a target="_blank" rel="noopener" href="https://cs.github.com/EpicGames/UnrealEngine/blob/d9d435c9c280b99a6c679b517adedd3f4b02cfd7/Engine/Config/BaseEngine.ini?q=DefaultASTCQualityBySize#L2665">Engine/Config/BaseEngine.ini</a></p>
<p>In the Texture resource editing, you can also set a specific Texture individually:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/blog/notes/ue/index/2020/20210112154624.webp">  </p>
<p>Lowest-&gt;Highest corresponds to values <code>0-4</code>, using Default will follow the settings in the project configuration.  </p>
<p>Also, the type of <code>Compression Settings</code> you set will affect the type of resource compression; Default refers to the parameters in project settings, while setting it to NormalMap type will result in <code>ASTC_4x4</code>.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.nvidia.com/astc-texture-compression-for-game-assets#_Toc398571904">Using ASTC Texture Compression for Game Assets</a> </li>
<li><a target="_blank" rel="noopener" href="https://docs.unrealengine.com/en-US/RenderingAndGraphics/Textures/TextureCompressionSettings/index.html">Texture Compression Settings</a></li>
</ul>
<h2 id="Intel-ISPC"><a href="#Intel-ISPC" class="headerlink" title="Intel ISPC"></a>Intel ISPC</h2><p>Intel ISPC is the default ASTC compressor in the engine, but it only supports a maximum block size of 8x8; higher sizes like 10x10 and 12x12 are not supported.</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2022/20220905143615.webp"></p>
<p>Its GitHub README introduces:</p>
<blockquote>
<p>ASTC (LDR, block sizes up to 8x8)</p>
</blockquote>
<p>There is also a specific description in the <a target="_blank" rel="noopener" href="https://img.imzlp.com/imgs/zlp/picgo/2022/ASTC_USER_GUIDE.pdf">Adaptive Scalable Texture Compression User Guide</a>:</p>
<blockquote>
<p>The Intel ISPC Texture Compressor is a compression library developed by Intel, supporting multiple texture formats including ASTC. It uses the Intel ISPC (Implicit SPMD Program Compiler) compiler to parallelize key parts of the compressor implementation for the target CPU SIMD instruction set.<br>The ASTC support in the tool only supports the 2D LDR profile and block sizes up to 8x8. It has image quality that is similar to astcenc -fast for photographic imagery, but can be up to three times faster at compressing. Its quality is measurably worse than astcenc -fast for non-photographic imagery, such as normal maps, mask maps, or cartoon-like color data.</p>
</blockquote>
<p>This means that in UE, using ASTC with project configuration settings set above <code>8x8</code> will be ineffective, because the ISPC compression method only supports a maximum of 8x8.</p>
<p>The implementation in the UE code is the same: <a target="_blank" rel="noopener" href="https://cs.github.com/EpicGames/UnrealEngine/blob/d9d435c9c280b99a6c679b517adedd3f4b02cfd7/Engine/Source/Developer/TextureFormatIntelISPCTexComp/Private/TextureFormatIntelISPCTexComp.cpp?q=GetQualityFormat#L422">Engine/Source/Developer/TextureFormatIntelISPCTexComp/Private/TextureFormatIntelISPCTexComp.cpp</a></p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2022/20220905151355.webp"></p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2022/20220905154510.webp"></p>
<h2 id="ARM-astcenc"><a href="#ARM-astcenc" class="headerlink" title="ARM astcenc"></a>ARM astcenc</h2><p>UE also provides another set of ASTC Texture compression: ARM’s <a target="_blank" rel="noopener" href="https://github.com/ARM-software/astc-encoder">astc-encoder</a>. If ISPC is not used, it will utilize this.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Developer\TextureFormatASTC\Private\TextureFormatASTC.cpp</span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> PLATFORM_WINDOWS || PLATFORM_LINUX || PLATFORM_MAC</span></span><br><span class="line">	<span class="meta">#<span class="keyword">define</span> SUPPORTS_ISPC_ASTC	1</span></span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line">	<span class="meta">#<span class="keyword">define</span> SUPPORTS_ISPC_ASTC	0</span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure>

<p>Engine code: <a target="_blank" rel="noopener" href="https://cs.github.com/EpicGames/UnrealEngine/blob/d9d435c9c280b99a6c679b517adedd3f4b02cfd7/Engine/Source/Developer/TextureFormatASTC/Private/TextureFormatASTC.cpp?q=SUPPORTS_ISPC_ASTC#L450">TextureFormatASTC.cpp#L450</a></p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2022/20220908172407937.webp"></p>
<p>By default, in UE4 versions, you can only switch this off by modifying the value of the <code>SUPPORTS_ISPC_ASTC</code> macro definition or modifying the engine’s <code>CompressImage</code> code implementation.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">static</span> <span class="type">bool</span> <span class="title">UseArmASTCCompressor</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">bool</span> bUseArmASTC = <span class="literal">false</span>;</span><br><span class="line">	GConfig-&gt;<span class="built_in">GetBool</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;/Script/UnrealEd.CookerSettings&quot;</span>), <span class="built_in">TEXT</span>(<span class="string">&quot;UsArmASTCCompressor&quot;</span>), bUseArmASTC, GEngineIni);</span><br><span class="line">	<span class="keyword">return</span> bUseArmASTC;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// for CompressImage</span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> SUPPORTS_ISPC_ASTC</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="built_in">UseArmASTCCompressor</span>())</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> IntelISPCTexCompFormat.<span class="built_in">CompressImage</span>(InImage, BuildSettings, bImageHasAlphaChannel, OutCompressedImage);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="comment">// arm astcenc...</span></span><br></pre></td></tr></table></figure>
<p>Editing <code>DefaultEngine.ini</code> allows for control of the switch:</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[/Script/UnrealEd.CookerSettings]</span></span><br><span class="line"><span class="attr">UsArmASTCCompressor</span>=<span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>When ISPC compression is disabled, the alternative ARM astcenc will invoke the engine’s <code>Binaries/ThirdParty</code> directory’s <code>astsenc</code> program to compress textures:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2022/20220908173014.webp"></p>
<p>Call stack:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2022/20220909093607.webp"></p>
<p>The separate process execution is not executed within the UE process. During the execution of astcenc for compression, the default Cook process in UE operates on a per-resource basis; while the DDC cache process can be asynchronous, from the Cook perspective, the current resource remains blocking execution. Moreover, because it invokes a separate process for handling, there may be significant overhead from process startups and switches, making this process very slow. It may take several minutes even for compressing a single texture, posing a substantial challenge to build time.</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2022/20220909132605743.webp"></p>
<p>The execution of <code>astcenc</code> constructs the command line parameters based on the texture settings:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 4x4</span></span><br><span class="line">../../../Engine/Binaries/ThirdParty/ARM/Win32/astcenc.exe -c <span class="string">&quot;D:/UnrealProjects/AstcExample/Intermediate/Cache/60c572f7-471422f1-24309fb0-45c3d4f9-RGBToASTCIn.webp&quot;</span> <span class="string">&quot;D:/UnrealProjects/AstcExample/Intermediate/Cache/60c572f7-471422f1-24309fb0-45c3d4f9-RGBToASTCOut.astc&quot;</span> 4x4 -thorough  -esw bgr1 -ch 1 1 1 0 <span class="string">&quot;</span></span><br><span class="line"><span class="string"># 12x12</span></span><br><span class="line"><span class="string">../../../Engine/Binaries/ThirdParty/ARM/Win32/astcenc.exe -c &quot;</span>D:/UnrealProjects/AstcExample/Intermediate/Cache/ea8ed05a-4371fffd-333d47a1-cf7b6490-RGBToASTCIn.webp<span class="string">&quot; &quot;</span>D:/UnrealProjects/AstcExample/Intermediate/Cache/ea8ed05a-4371fffd-333d47a1-cf7b6490-RGBToASTCOut.astc<span class="string">&quot; 12x12 -thorough -normal_percep -esw bbbg -dsw rgba&quot;</span></span><br></pre></td></tr></table></figure>

<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2022/image-20220908201044125.webp"></p>
<p>Invoking multiple processes compresses different Mip levels of the textures separately:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2022/image-20220909094931319.webp"></p>
<p>Each Mip corresponds to a separate <code>astcenc</code> processing process. Call stack:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2022/image-20220909105954190.webp"></p>
<blockquote>
<p>Note: The compression parameters for different Mip levels are exactly the same, but the images being processed for compression are different. This is something to note, which can also be seen from the call stack above.</p>
</blockquote>
<h2 id="UE5"><a href="#UE5" class="headerlink" title="UE5"></a>UE5</h2><p>In UE5, ASTC default is also the ISPC compressor, but can be controlled through <a target="_blank" rel="noopener" href="https://github.com/EpicGames/UnrealEngine/blob/5.1/Engine/Source/Developer/TextureFormatASTC/Private/TextureFormatASTC.cpp#L37">cook.ASTCTextureCompressor</a>, where 0 is ISPC and 1 is ARM.</p>
<p>Additionally, the default compressor in <code>Project Settings</code>-<code>Cooker</code> can be configured:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2022/20220908165210.webp"></p>
<h2 id="Efficiency-Analysis-amp-Optimization"><a href="#Efficiency-Analysis-amp-Optimization" class="headerlink" title="Efficiency Analysis &amp; Optimization"></a>Efficiency Analysis &amp; Optimization</h2><h3 id="DDC-Log"><a href="#DDC-Log" class="headerlink" title="DDC Log"></a>DDC Log</h3><p>Analyzing the texture compression process, you can enable <code>Log</code> and <code>LogTexture</code> <code>Verbose</code> logging:</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">; DefaultEngine.ini</span></span><br><span class="line"><span class="section">[Core.Log]</span></span><br><span class="line"><span class="attr">LogDerivedDataCache</span>=Verbose</span><br><span class="line"><span class="attr">LogTexture</span>=Verbose</span><br></pre></td></tr></table></figure>
<p>During the Cook process, the following information will be output:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">LogDerivedDataCache: Verbose: GetSynchronous TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CBBEBEB5538C060A_07_0000803F0000803F0000803F000000000000803F00000000000000000000803F0000000000000000020000000100000100000000000101000000040000803FFFFFFFFF00000000FF00FF00FFFF8180803B from &#x27;/Game/ExampleContent/Landscapes/Textures/T_ForestGround_D.T_ForestGround_D&#x27;</span><br><span class="line">LogDerivedDataCache: Verbose: ../../../Engine/DerivedDataCache CachedDataProbablyExists=0 for TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CB__EA6A229E23092C6517F13F71B2BF5C2E8C64457A</span><br><span class="line">LogDerivedDataCache: Verbose: AsyncPutWrapper (HierarchicalDerivedDataBackend) Cache miss on TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CB__EA6A229E23092C6517F13F71B2BF5C2E8C64457A</span><br><span class="line">LogTexture: Display: Building textures: T_ForestGround_D (ASTC_RGBAuto, 2048X2048)</span><br><span class="line">LogTextureFormatASTC: Display: Compressing to ASTC (options = &#x27;6x6 -fast  -esw bgra -ch 1 1 1 1&#x27;)...</span><br><span class="line">LogTextureFormatASTC: Display: Compressing to ASTC (options = &#x27;6x6 -fast  -esw bgra -ch 1 1 1 1&#x27;)...</span><br><span class="line">LogTextureFormatASTC: Display: Compressing to ASTC (options = &#x27;6x6 -fast  -esw bgra -ch 1 1 1 1&#x27;)...</span><br><span class="line">LogTextureFormatASTC: Display: Compressing to ASTC (options = &#x27;6x6 -fast  -esw bgra -ch 1 1 1 1&#x27;)...</span><br><span class="line">LogTextureFormatASTC: Display: Compressing to ASTC (options = &#x27;6x6 -fast  -esw bgra -ch 1 1 1 1&#x27;)...</span><br><span class="line">LogTextureFormatASTC: Display: Compressing to ASTC (options = &#x27;6x6 -fast  -esw bgra -ch 1 1 1 1&#x27;)...</span><br><span class="line">LogTextureFormatASTC: Display: Compressing to ASTC (options = &#x27;6x6 -fast  -esw bgra -ch 1 1 1 1&#x27;)...</span><br><span class="line">LogTextureFormatASTC: Display: Compressing to ASTC (options = &#x27;6x6 -fast  -esw bgra -ch 1 1 1 1&#x27;)...</span><br><span class="line">LogTextureFormatASTC: Display: Compressing to ASTC (options = &#x27;6x6 -fast  -esw bgra -ch 1 1 1 1&#x27;)...</span><br><span class="line">LogTextureFormatASTC: Display: Compressing to ASTC (options = &#x27;6x6 -fast  -esw bgra -ch 1 1 1 1&#x27;)...</span><br><span class="line">LogTextureFormatASTC: Display: Compressing to ASTC (options = &#x27;6x6 -fast  -esw bgra -ch 1 1 1 1&#x27;)...</span><br><span class="line">LogTextureFormatASTC: Display: Compressing to ASTC (options = &#x27;6x6 -fast  -esw bgra -ch 1 1 1 1&#x27;)...</span><br><span class="line">LogDerivedDataCache: Verbose: Put TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CBBEBEB5538C060A_07_0000803F0000803F0000803F000000000000803F00000000000000000000803F0000000000000000020000000100000100000000000101000000040000803FFFFFFFFF00000000FF00FF00FFFF8180803B_MIP0_2048x2048 from &#x27;/Game/ExampleContent/Landscapes/Textures/T_ForestGround_D.T_ForestGround_D&#x27;</span><br><span class="line">LogDerivedDataCache: Verbose: AsyncPutWrapper (HierarchicalDerivedDataBackend) queueing TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CB__47BCD9955FA7DFF7F5CFEFB8D7FBCF9D3D9B6312 for put</span><br><span class="line">LogDerivedDataCache: Verbose: Put TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CBBEBEB5538C060A_07_0000803F0000803F0000803F000000000000803F00000000000000000000803F0000000000000000020000000100000100000000000101000000040000803FFFFFFFFF00000000FF00FF00FFFF8180803B_MIP1_1024x1024 from &#x27;/Game/ExampleContent/Landscapes/Textures/T_ForestGround_D.T_ForestGround_D&#x27;</span><br><span class="line">LogDerivedDataCache: Verbose: ../../../Engine/DerivedDataCache CachedDataProbablyExists=0 for TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CB__47BCD9955FA7DFF7F5CFEFB8D7FBCF9D3D9B6312</span><br><span class="line">LogDerivedDataCache: Verbose: AsyncPutWrapper (HierarchicalDerivedDataBackend) queueing TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CB__F5074C647712694523D5FA76B15A7517E5FCEDF5 for put</span><br><span class="line">LogDerivedDataCache: Verbose: Put TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CBBEBEB5538C060A_07_0000803F0000803F0000803F000000000000803F00000000000000000000803F0000000000000000020000000100000100000000000101000000040000803FFFFFFFFF00000000FF00FF00FFFF8180803B_MIP2_512x512 from &#x27;/Game/ExampleContent/Landscapes/Textures/T_ForestGround_D.T_ForestGround_D&#x27;</span><br><span class="line">LogDerivedDataCache: Verbose: AsyncPutWrapper (HierarchicalDerivedDataBackend) queueing TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CB__AFC2F7816F8391CA659275BFD85152D17743C125 for put</span><br><span class="line">LogDerivedDataCache: Verbose: Put TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CBBEBEB5538C060A_07_0000803F0000803F0000803F000000000000803F00000000000000000000803F0000000000000000020000000100000100000000000101000000040000803FFFFFFFFF00000000FF00FF00FFFF8180803B_MIP3_256x256 from &#x27;/Game/ExampleContent/Landscapes/Textures/T_ForestGround_D.T_ForestGround_D&#x27;</span><br><span class="line">LogDerivedDataCache: Verbose: ../../../Engine/DerivedDataCache CachedDataProbablyExists=0 for TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CB__F5074C647712694523D5FA76B15A7517E5FCEDF5</span><br><span class="line">LogDerivedDataCache: Verbose: AsyncPutWrapper (HierarchicalDerivedDataBackend) queueing TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CB__C1072EE744DD250899FAB02DB01DEEB85A98C532 for put</span><br><span class="line">LogDerivedDataCache: Verbose: ../../../Engine/DerivedDataCache CachedDataProbablyExists=0 for TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CB__AFC2F7816F8391CA659275BFD85152D17743C125</span><br><span class="line">LogDerivedDataCache: Verbose: Put TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CBBEBEB5538C060A_07_0000803F0000803F0000803F000000000000803F00000000000000000000803F0000000000000000020000000100000100000000000101000000040000803FFFFFFFFF00000000FF00FF00FFFF8180803B_MIP4_128x128 from &#x27;/Game/ExampleContent/Landscapes/Textures/T_ForestGround_D.T_ForestGround_D&#x27;</span><br><span class="line">LogDerivedDataCache: Verbose: ../../../Engine/DerivedDataCache CachedDataProbablyExists=0 for TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CB__AFC2F7816F8391CA659275BFD85152D17743C125</span><br><span class="line">LogDerivedDataCache: Verbose: AsyncPutWrapper (HierarchicalDerivedDataBackend) queueing TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CB__4190A033AE05AC24DA30E7B5AD2E6827F260A716 for put</span><br><span class="line">LogDerivedDataCache: Verbose: ../../../Engine/DerivedDataCache CachedDataProbablyExists=0 for TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CB__C1072EE744DD250899FAB02DB01DEEB85A98C532</span><br><span class="line">LogDerivedDataCache: Verbose: ../../../Engine/DerivedDataCache CachedDataProbablyExists=0 for TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CB__C1072EE744DD250899FAB02DB01DEEB85A98C532</span><br><span class="line">LogDerivedDataCache: Verbose: Put TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CBBEBEB5538C060A_07_0000803F0000803F0000803F000000000000803F00000000000000000000803F0000000000000000020000000100000100000000000101000000040000803FFFFFFFFF00000000FF00FF00FFFF8180803B from &#x27;/Game/ExampleContent/Landscapes/Textures/T_ForestGround_D.T_ForestGround_D&#x27;</span><br><span class="line">LogDerivedDataCache: Verbose: ../../../Engine/DerivedDataCache CachedDataProbablyExists=0 for TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CB__4190A033AE05AC24DA30E7B5AD2E6827F260A716</span><br><span class="line">LogDerivedDataCache: Verbose: ../../../Engine/DerivedDataCache CachedDataProbablyExists=0 for TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CB__F5074C647712694523D5FA76B15A7517E5FCEDF5</span><br><span class="line">LogDerivedDataCache: Verbose: AsyncPutWrapper (HierarchicalDerivedDataBackend) queueing TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CB__EA6A229E23092C6517F13F71B2BF5C2E8C64457A for put</span><br><span class="line">LogDerivedDataCache: Verbose: ../../../Engine/DerivedDataCache CachedDataProbablyExists=0 for TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CB__4190A033AE05AC24DA30E7B5AD2E6827F260A716</span><br><span class="line">LogTexture: Verbose: Storing texture in DDC:</span><br><span class="line">  Key: TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CBBEBEB5538C060A_07_0000803F0000803F0000803F000000000000803F00000000000000000000803F0000000000000000020000000100000100000000000101000000040000803FFFFFFFFF00000000FF00FF00FFFF8180803B</span><br><span class="line">  Format: ASTC_6x6</span><br><span class="line">  Mip0 2048x2048 1871424 bytes TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CBBEBEB5538C060A_07_0000803F0000803F0000803F000000000000803F00000000000000000000803F0000000000000000020000000100000100000000000101000000040000803FFFFFFFFF00000000FF00FF00FFFF8180803B_MIP0_2048x2048</span><br><span class="line">  Mip1 1024x1024 467856 bytes TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CBBEBEB5538C060A_07_0000803F0000803F0000803F000000000000803F00000000000000000000803F0000000000000000020000000100000100000000000101000000040000803FFFFFFFFF00000000FF00FF00FFFF8180803B_MIP1_1024x1024</span><br><span class="line">  Mip2 512x512 118336 bytes TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CBBEBEB5538C060A_07_0000803F0000803F0000803F000000000000803F00000000000000000000803F0000000000000000020000000100000100000000000101000000040000803FFFFFFFFF00000000FF00FF00FFFF8180803B_MIP2_512x512</span><br><span class="line">  Mip3 256x256 29584 bytes TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CBBEBEB5538C060A_07_0000803F0000803F0000803F000000000000803F00000000000000000000803F0000000000000000020000000100000100000000000101000000040000803FFFFFFFFF00000000FF00FF00FFFF8180803B_MIP3_256x256</span><br><span class="line">  Mip4 128x128 7744 bytes TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CBBEBEB5538C060A_07_0000803F0000803F0000803F000000000000803F00000000000000000000803F0000000000000000020000000100000100000000000101000000040000803FFFFFFFFF00000000FF00FF00FFFF8180803B_MIP4_128x128</span><br><span class="line">  Mip5 64x64 1936 bytes [inline] TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CBBEBEB5538C060A_07_0000803F0000803F0000803F000000000000803F00000000000000000000803F0000000000000000020000000100000100000000000101000000040000803FFFFFFFFF00000000FF00FF00FFFF8180803B_MIP5_64x64</span><br><span class="line">  Mip6 32x32 576 bytes [inline] TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CBBEBEB5538C060A_07_0000803F0000803F0000803F000000000000803F00000000000000000000803F0000000000000000020000000100000100000000000101000000040000803FFFFFFFFF00000000FF00FF00FFFF8180803B_MIP6_32x32</span><br><span class="line">  Mip7 16x16 144 bytes [inline] TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CBBEBEB5538C060A_07_0000803F0000803F0000803F000000000000803F00000000000000000000803F0000000000000000020000000100000100000000000101000000040000803FFFFFFFFF00000000FF00FF00FFFF8180803B_MIP7_16x16</span><br><span class="line">  Mip8 8x8 64 bytes [inline] TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CBBEBEB5538C060A_07_0000803F0000803F0000803F000000000000803F00000000000000000000803F0000000000000000020000000100000100000000000101000000040000803FFFFFFFFF00000000FF00FF00FFFF8180803B_MIP8_8x8</span><br><span class="line">  Mip9 4x4 16 bytes [inline] TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CBBEBEB5538C060A_07_0000803F0000803F0000803F000000000000803F00000000000000000000803F0000000000000000020000000100000100000000000101000000040000803FFFFFFFFF00000000FF00FF00FFFF8180803B_MIP9_4x4</span><br><span class="line">  Mip10 2x2 16 bytes [inline] TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CBBEBEB5538C060A_07_0000803F0000803F0000803F000000000000803F00000000000000000000803F0000000000000000020000000100000100000000000101000000040000803FFFFFFFFF00000000FF00FF00FFFF8180803B_MIP10_2x2</span><br><span class="line">  Mip11 1x1 16 bytes [inline] TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CBBEBEB5538C060A_07_0000803F0000803F0000803F000000000000803F00000000000000000000803F0000000000000000020000000100000100000000000101000000040000803FFFFFFFFF00000000FF00FF00FFFF8180803B_MIP11_1x1</span><br><span class="line">  Derived Data: 4648 bytes</span><br><span class="line">LogDerivedDataCache: Verbose: GetAsynchronous TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CBBEBEB5538C060A_07_0000803F0000803F0000803F000000000000803F00000000000000000000803F0000000000000000020000000100000100000000000101000000040000803FFFFFFFFF00000000FF00FF00FFFF8180803B_MIP0_2048x2048 from &#x27;/Game/ExampleContent/Landscapes/Textures/T_ForestGround_D.T_ForestGround_D&#x27;, Handle 19506</span><br><span class="line">LogDerivedDataCache: Verbose: ../../../Engine/DerivedDataCache CachedDataProbablyExists=0 for TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CB__AFC2F7816F8391CA659275BFD85152D17743C125</span><br><span class="line">LogDerivedDataCache: Verbose: GetAsynchronous TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CBBEBEB5538C060A_07_0000803F0000803F0000803F000000000000803F00000000000000000000803F0000000000000000020000000100000100000000000101000000040000803FFFFFFFFF00000000FF00FF00FFFF8180803B_MIP1_1024x1024 from &#x27;/Game/ExampleContent/Landscapes/Textures/T_ForestGround_D.T_ForestGround_D&#x27;, Handle 19507</span><br><span class="line">LogDerivedDataCache: Verbose: GetAsynchronous TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CBBEBEB5538C060A_07_0000803F0000803F0000803F000000000000803F00000000000000000000803F0000000000000000020000000100000100000000000101000000040000803FFFFFFFFF00000000FF00FF00FFFF8180803B_MIP2_512x512 from &#x27;/Game/ExampleContent/Landscapes/Textures/T_ForestGround_D.T_ForestGround_D&#x27;, Handle 19508</span><br><span class="line">LogDerivedDataCache: Verbose: GetAsynchronous TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CBBEBEB5538C060A_07_0000803F0000803F0000803F000000000000803F00000000000000000000803F0000000000000000020000000100000100000000000101000000040000803FFFFFFFFF00000000FF00FF00FFFF8180803B_MIP3_256x256 from &#x27;/Game/ExampleContent/Landscapes/Textures/T_ForestGround_D.T_ForestGround_D&#x27;, Handle 19509</span><br><span class="line">LogDerivedDataCache: Verbose: GetAsynchronous TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CBBEBEB5538C060A_07_0000803F0000803F0000803F000000000000803F00000000000000000000803F0000000000000000020000000100000100000000000101000000040000803FFFFFFFFF00000000FF00FF00FFFF8180803B_MIP4_128x128 from &#x27;/Game/ExampleContent/Landscapes/Textures/T_ForestGround_D.T_ForestGround_D&#x27;, Handle 19510</span><br><span class="line">LogDerivedDataCache: Verbose: AsyncPutWrapper (HierarchicalDerivedDataBackend) CacheHit from InFlightCache on TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CB__47BCD9955FA7DFF7F5CFEFB8D7FBCF9D3D9B6312</span><br><span class="line">LogDerivedDataCache: Verbose: WaitAsynchronousCompletion, Handle 19506</span><br><span class="line">LogDerivedDataCache: Verbose: AsyncPutWrapper (HierarchicalDerivedDataBackend) CacheHit from InFlightCache on TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CB__F5074C647712694523D5FA76B15A7517E5FCEDF5</span><br><span class="line">LogDerivedDataCache: Verbose: GetAsynchronousResults, bDataWasBuilt: 0, Handle 19506, SUCCESS</span><br><span class="line">LogDerivedDataCache: Verbose: AsyncPutWrapper (HierarchicalDerivedDataBackend) CacheHit from InFlightCache on TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CB__AFC2F7816F8391CA659275BFD85152D17743C125</span><br><span class="line">LogDerivedDataCache: Verbose: AsyncPutWrapper (HierarchicalDerivedDataBackend) CacheHit from InFlightCache on TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CB__C1072EE744DD250899FAB02DB01DEEB85A98C532</span><br><span class="line">LogDerivedDataCache: Verbose: AsyncPutWrapper (HierarchicalDerivedDataBackend) CacheHit from InFlightCache on TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CB__4190A033AE05AC24DA30E7B5AD2E6827F260A716</span><br><span class="line">LogDerivedDataCache: Verbose: ../../../Engine/DerivedDataCache CachedDataProbablyExists=0 for TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CB__47BCD9955FA7DFF7F5CFEFB8D7FBCF9D3D9B6312</span><br><span class="line">LogDerivedDataCache: Verbose: ../../../Engine/DerivedDataCache CachedDataProbablyExists=0 for TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CB__4190A033AE05AC24DA30E7B5AD2E6827F260A716</span><br><span class="line">LogDerivedDataCache: Verbose: WaitAsynchronousCompletion, Handle 19507</span><br><span class="line">LogDerivedDataCache: Verbose: ../../../Engine/DerivedDataCache CachedDataProbablyExists=0 for TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CB__F5074C647712694523D5FA76B15A7517E5FCEDF5</span><br><span class="line">LogDerivedDataCache: Verbose: GetAsynchronousResults, bDataWasBuilt: 0, Handle 19507, SUCCESS</span><br><span class="line">LogDerivedDataCache: Verbose: ../../../Engine/DerivedDataCache CachedDataProbablyExists=0 for TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CB__C1072EE744DD250899FAB02DB01DEEB85A98C532</span><br><span class="line">LogDerivedDataCache: Verbose: WaitAsynchronousCompletion, Handle 19508</span><br><span class="line">LogDerivedDataCache: Verbose: GetAsynchronousResults, bDataWasBuilt: 0, Handle 19508, SUCCESS</span><br><span class="line">LogDerivedDataCache: Verbose: ../../../Engine/DerivedDataCache CachedDataProbablyExists=1 for TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CB__AFC2F7816F8391CA659275BFD85152D17743C125</span><br><span class="line">LogDerivedDataCache: Verbose: WaitAsynchronousCompletion, Handle 19510</span><br><span class="line">LogDerivedDataCache: Verbose: GetAsynchronousResults, bDataWasBuilt: 0, Handle 19510, SUCCESS</span><br><span class="line">LogDerivedDataCache: Verbose: ../../../Engine/DerivedDataCache CachedDataProbablyExists=0 for TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CB__EA6A229E23092C6517F13F71B2BF5C2E8C64457A</span><br><span class="line">LogDerivedDataCache: Verbose: GetAsynchronousResults, bDataWasBuilt: 0, Handle 19510, SUCCESS</span><br><span class="line">LogDerivedDataCache: Verbose: ../../../Engine/DerivedDataCache CachedDataProbablyExists=0 for TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CB__47BCD9955FA7DFF7F5CFEFB8D7FBCF9D3D9B6312</span><br><span class="line">LogDerivedDataCache: Verbose: ../../../Engine/DerivedDataCache: Successful cache put of TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CB__4190A033AE05AC24DA30E7B5AD2E6827F260A716 to ../../../Engine/DerivedDataCache/7/7/2/TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAUTO_25638_39DF77B84020C752CB__AFC2F7816F8391CA659275BFD85152D17743C125.udd</span><br><span class="line">LogDerivedDataCache: Verbose: GetAsynchronousResults, bDataWasBuilt: 0, Handle 19508, SUCCESS</span><br><span class="line">LogDerivedDataCache: Verbose: WaitAsynchronousCompletion, Handle 19509</span><br><span class="line">LogDerivedDataCache: Verbose: GetAsynchronousResults, bDataWasBuilt: 0, Handle 19509, SUCCESS</span><br><span class="line">LogDerivedDataCache: Verbose: ../../../Engine/DerivedDataCache CachedDataProbablyExists=1 for TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CB__AFC2F7816F8391CA659275BFD85152D17743C125</span><br><span class="line">LogDerivedDataCache: Verbose: WaitAsynchronousCompletion, Handle 19510</span><br><span class="line">LogDerivedDataCache: Verbose: ../../../Engine/DerivedDataCache: Successful cache put of TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CB__EA6A229E23092C6517F13F71B2BF5C2E8C64457A to ../../../Engine/DerivedDataCache/5/8/2/TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAUTO_25638_39DF77B84020C752CB__EA6A229E23092C6517F13F71B2BF5C2E8C64457A.udd</span><br><span class="line">LogDerivedDataCache: Verbose: ../../../Engine/DerivedDataCache: Successful cache put of TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CB__C1072EE744DD250899FAB02DB01DEEB85A98C532 to ../../../Engine/DerivedDataCache/2/1/5/TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAUTO_25638_39DF77B84020C752CB__C1072EE744DD250899FAB02DB01DEEB85A98C532.udd</span><br><span class="line">LogDerivedDataCache: Verbose: ../../../Engine/DerivedDataCache CachedDataProbablyExists=1 for TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CB__EA6A229E23092C6517F13F71B2BF5C2E8C64457A</span><br><span class="line">LogDerivedDataCache: Verbose: ../../../Engine/DerivedDataCache: Successful cache put of TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CB__47BCD9955FA7DFF7F5CFEFB8D7FBCF9D3D9B6312 to ../../../Engine/DerivedDataCache/2/6/1/TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAUTO_25638_39DF77B84020C752CB__47BCD9955FA7DFF7F5CFEFB8D7FBCF9D3D9B6312.udd</span><br><span class="line">LogDerivedDataCache: Verbose: ../../../Engine/DerivedDataCache CachedDataProbablyExists=1 for TEXTURE_564290F8998644E39A2118D5C683187B_ASTC_RGBAuto_25638_39DF77B84020C752CB__C1072EE744DD250899FAB02DB01DEEB85A98C532</span><br></pre></td></tr></table></figure>
<p>It facilitates viewing detailed information during the DDC and texture compression process.</p>
<h3 id="Main-Time-Consumption"><a href="#Main-Time-Consumption" class="headerlink" title="Main Time Consumption"></a>Main Time Consumption</h3><p>Based on the previous analysis, while using ARM astcenc for texture compression during Cook, the overhead for a single texture roughly consists of the following parts:</p>
<ol>
<li>Serialization of the file (noting that it needs to be saved/read during compression)</li>
<li>Cold start of the compression process</li>
<li>Waiting for compression to complete (compression process exit)</li>
<li>Multiple Mip levels can start multiple processes</li>
</ol>
<p>In the original Cook process of UE, which handles resources one at a time, it cannot effectively utilize the multi-core advantages of hardware. Essentially, it cooks one texture at a time, compressing it Mip by Mip, resulting in a serial loop process.</p>
<p>Using HotPatcher for a single texture ARM astcenc test takes anywhere from a few seconds to several minutes:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Display: Package /Game/ExampleContent/Landscapes/Textures/T_ForestGround_D Time : <span class="number">29.767000</span>s</span><br><span class="line">Display: Package /Game/ExampleContent/Landscapes/Textures/T_ForestGround_N Time : <span class="number">145.753000</span>s</span><br><span class="line">Display: Package /Game/ExampleContent/ScriptExamples/PivotPainter/Textures/T_PalmTree_N Time : <span class="number">232.641000</span>s</span><br></pre></td></tr></table></figure>
<p>Cooking 28 textures took <strong>14 minutes</strong>:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2022/image-20220909132759447.webp"></p>
<p>Textures are the largest resource type in the project; in the case of a complete DDC miss, the Cook time is unimaginable, reaching several dozen hours.### Replacing astcenc</p>
<p>In UE4, the engine’s default precompiled <code>astcenc</code> is a very old version <code>1.3</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ASTC codec version 1.3</span><br><span class="line">Copyright (C) 2011-2013 ARM Limited</span><br><span class="line">All rights reserved. Use of this software is subject to terms of its license.</span><br></pre></td></tr></table></figure>
<p>Moreover, it is 32-bit and lacks SSE/SSE2 instruction set optimizations:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">FILE HEADER VALUES</span><br><span class="line">             14C machine (x86)</span><br><span class="line">               5 number of sections</span><br><span class="line">        515B0518 time date stamp Wed Apr  3 00:19:36 2013</span><br><span class="line">               0 file pointer to symbol table</span><br><span class="line">               0 number of symbols</span><br><span class="line">              E0 size of optional header</span><br><span class="line">             102 characteristics</span><br><span class="line">                   Executable</span><br><span class="line">                   32 bit word machine</span><br></pre></td></tr></table></figure>

<h4 id="Upgrading-astcenc-Version"><a href="#Upgrading-astcenc-Version" class="headerlink" title="Upgrading astcenc Version"></a>Upgrading astcenc Version</h4><p>Looking at the release notes on Github and some articles, newer versions of astcenc have shown significant improvements in compression performance.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://community.arm.com/arm-community-blogs/b/graphics-gaming-and-vr-blog/posts/astcenc-31-high-performance-astc-texture-compressor">astcenc 3.1: high performance texture compression</a></li>
</ul>
<blockquote>
<p>In UE5, the integrated astcenc is <code>3.2.0</code>, and it is a 64-bit version with SSE instruction set optimizations. However, the astcenc in UE5 cannot be directly used in UE4; there are significant differences in parameters between versions, necessitating the porting of UE5’s implementation to UE4, aligning the old engine’s constructed astcenc parameters with the new version.</p>
</blockquote>
<h4 id="Compile-x64-SSE-Version"><a href="#Compile-x64-SSE-Version" class="headerlink" title="Compile x64 SSE Version"></a>Compile x64 SSE Version</h4><p>This method allows for maintaining compatibility of the engine’s astcenc parameters without altering the engine’s implementation, simply requiring the compilation of a 64-bit SSE instruction set optimized version.</p>
<blockquote>
<p>Note: When compiling 64-bit, SSE instruction set optimization is enabled by default, and there’s no need to specify <code>/arch:sse</code> separately.</p>
</blockquote>
<p>Before Optimization:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2022/image-20220909181632045.webp"></p>
<p>After Optimization:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2022/image-20220909171652073.webp"></p>
<p>From the original <code>7m12s</code> to <code>1m24s</code>, saving about 80% of the time—a substantial improvement.</p>
<table>
<thead>
<tr>
<th></th>
<th>Win32</th>
<th>Win64 SSE</th>
</tr>
</thead>
<tbody><tr>
<td>Time (s)</td>
<td>432</td>
<td>84</td>
</tr>
</tbody></table>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2022/202209121004187.webp"></p>
<h3 id="Parallel-Cache-DDC"><a href="#Parallel-Cache-DDC" class="headerlink" title="Parallel Cache DDC"></a>Parallel Cache DDC</h3><p>Replacing astcenc can improve the compression efficiency of a single texture, but the process of handling resources one at a time still limits performance. Even if all Mips are processed in parallel, the maximum number of astcenc processes will correspond to the number of Mips, and it cannot fully utilize the performance of high-core CPUs.</p>
<p>Therefore, the Cooking process for a single resource can be broken down, caching resources’ DDC in batches without performing serialization operations. By using asynchronous tasks to launch astcenc for the actual compression process, an individual UE process can simultaneously handle multiple texture compression tasks.</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2022/image-20220909142352756.webp"></p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2022/20220909142610.webp"></p>
<p>This can fully leverage the performance of multi-core CPUs while avoiding the inefficiencies of executing per-resource and per-Mip processes, where performance is not maximized and the CPU idles.</p>
<p>However, under this single Cook process scenario, parallel compressing textures requires a higher performance from the machine’s CPU. In simple terms, if a 4-core CPU is tasked with running significantly more tasks than its core count, it will not only fail to accelerate the process but may slow down due to frequent context switching (increased system process scheduling overhead, competition for CPU among processes, etc.).</p>
<p>A reasonable approach is to determine the number of tasks based on the core count to utilize the CPU fully while avoiding overload. However, the physical performance of a machine is ultimately limited, making it difficult to balance massive resources and local machine bottlenecks.</p>
<p>Thus, I implemented a multi-machine parallel Cook solution, differing from implementations like FastBuild and IB that are limited to code and Shader compilation and cannot be applied to other resource types. In this case, the time for texture compression has already far exceeded the time for Shader compilation.</p>
<p>Single machine operation simulation:<br><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2022/20220905164130.webp"></p>
<p>In multi-machine mode, each Agent can allocate a certain amount of resources based on machine performance, avoiding the limitations of a single machine’s capabilities. Moreover, machines can share the DDC data produced by each other, achieving true parallel Cook.</p>
<h2 id="Related-Materials"><a href="#Related-Materials" class="headerlink" title="Related Materials"></a>Related Materials</h2><ul>
<li><a target="_blank" rel="noopener" href="https://developer.arm.com/documentation/100959/0100">ARM Guide for Unreal Engine 4 Optimizing Mobile Gaming Graphics Version 1.0</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.unrealengine.com/4.26/en-US/SharingAndReleasing/Mobile/Android/Reference/">Android Development Reference</a></li>
<li><a target="_blank" rel="noopener" href="https://community.arm.com/arm-community-blogs/b/graphics-gaming-and-vr-blog/posts/astcenc-31-high-performance-astc-texture-compressor">astcenc 3.1: high performance texture compression</a></li>
<li><a target="_blank" rel="noopener" href="https://img.imzlp.com/imgs/zlp/picgo/2022/ASTC_USER_GUIDE.pdf">ARM ASTC user guide</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/158740249">Detailed Explanation of ASTC Texture Compression Format</a></li>
</ul>

    </div>

    
    
        
        
          
            <blockquote class="blockquote-center">
              
                The article is finished. If you have any questions, please comment and communicate.
              
            <br/>
            
                <div class="qr-code" onclick="return false">
                    <script src="/js/qrcode.min.js"></script>
                    <div id="qrcode">
                      
                        <img src="https://imzlp.com/images/wechat-qrcode.webp">
                      
                    <p>Scan the QR code on WeChat and follow me.</p>
                    </div>
                </div>
            
            </blockquote>
          
        

        
          <div class="postCopyright" style="clear:both;">
             <span>Title:</span><a href="/posts/7181/" target="_blank">ASTC texture compression analysis and efficiency optimization in UE</a><br/>
             <span>Author:</span><a href="/about" target="_blank" title="查看 LIPENGZHA 的资料">LIPENGZHA</a><br/>
             <span>Publish Date:</span>2022/09/08 19:01<br/>
             
             <span>Word Count:</span><span class="page-count">8.4k Words</span><br/>
             
             <span>Link:</span><a href="/posts/7181/" target="_blank" title="ASTC texture compression analysis and efficiency optimization in UE">https://en.imzlp.com/posts/7181/</a>
             <span class="copy-path" data-clipboard-text="Link: https://en.imzlp.com/posts/7181/ Author: LIPENGZHA" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
             <script src="/js/jquery.min.js"></script>
             <script src="/js/clipboard.min.js"></script>
             <script> var clipboard = new Clipboard('.copy-path'); </script>
             <br/>
             
             <span>License:</span><i class="fab fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" title="Attribution-NonCommercial-ShareAlike 4.0 International">CC BY-NC-SA 4.0</a><br/>
             
             <span>Reprinting of the full article is prohibited.</span>
          </div>
        
    

        
  <div class="reward-container">
    <div>Your donation will encourage me to keep creating!</div>
    <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
      Donate
    </button>
    <div id="qr" style="display: none;">
        
        <div style="display: inline-block;">
          <img src="/images/reward/wechatpay.webp" alt="LIPENGZHA WeChat Pay">
          <p>WeChat Pay</p>
        </div>

    </div>
  </div>



      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/UnrealEngine/" rel="tag"># UnrealEngine</a>
              <a href="/tags/Android/" rel="tag"># Android</a>
              <a href="/tags/ASTC/" rel="tag"># ASTC</a>
              <a href="/tags/%E8%B4%B4%E5%9B%BE%E5%8E%8B%E7%BC%A9/" rel="tag"># 贴图压缩</a>
              <a href="/tags/%E5%8C%85%E4%BD%93%E4%BC%98%E5%8C%96/" rel="tag"># 包体优化</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/posts/23932/" rel="prev" title="How to write a good technical article">
      <i class="fa fa-chevron-left"></i> How to write a good technical article
    </a></div>
      <div class="post-nav-item">
    <a href="/posts/22655/" rel="next" title="Multi-stage automated resource inspection scheme in UE">
      Multi-stage automated resource inspection scheme in UE <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
      <div class="tabs tabs-comment">
        <ul class="nav-tabs">
            <li class="tab"><a href="#comment-utteranc">utteranc</a></li>
            <li class="tab"><a href="#comment-valine">valine</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane utteranc" id="comment-utteranc">
              
  
  <div class="comments">
  <script src="https://utteranc.es/client.js" repo="hxhb/blog-comments" issue-term="pathname" theme="github-light" crossorigin="anonymous" async></script>
  </div>
  
  
            </div>
            <div class="tab-pane valine" id="comment-valine">
              <div class="comments" id="valine-comments"></div>
            </div>
        </div>
      </div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Texture-Compression-Configuration"><span class="nav-number">1.</span> <span class="nav-text">Texture Compression Configuration</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Intel-ISPC"><span class="nav-number">2.</span> <span class="nav-text">Intel ISPC</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ARM-astcenc"><span class="nav-number">3.</span> <span class="nav-text">ARM astcenc</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#UE5"><span class="nav-number">4.</span> <span class="nav-text">UE5</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Efficiency-Analysis-amp-Optimization"><span class="nav-number">5.</span> <span class="nav-text">Efficiency Analysis &amp; Optimization</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#DDC-Log"><span class="nav-number">5.1.</span> <span class="nav-text">DDC Log</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Main-Time-Consumption"><span class="nav-number">5.2.</span> <span class="nav-text">Main Time Consumption</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Upgrading-astcenc-Version"><span class="nav-number">5.2.1.</span> <span class="nav-text">Upgrading astcenc Version</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Compile-x64-SSE-Version"><span class="nav-number">5.2.2.</span> <span class="nav-text">Compile x64 SSE Version</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Parallel-Cache-DDC"><span class="nav-number">5.3.</span> <span class="nav-text">Parallel Cache DDC</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Related-Materials"><span class="nav-number">6.</span> <span class="nav-text">Related Materials</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person" oncontextmenu="return false" οndragstart="return false">
    <img class="site-author-image" itemprop="image" alt="LIPENGZHA"
      src="https://img.imzlp.com/imgs/zlp/picgo/2023/202304152112902.webp">
  <p class="site-author-name" itemprop="name">LIPENGZHA</p>
  <div class="site-description" itemprop="description">"I think, therefore I am"</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
             
          <span class="site-state-item-count">190</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">95</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">190</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/hxhb" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;hxhb" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://linkedin.com/in/lipengzha" title="Linkedin → https:&#x2F;&#x2F;linkedin.com&#x2F;in&#x2F;lipengzha" rel="noopener" target="_blank"><i class="fab fa-linkedin fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.zhihu.com/people/imzlp" title="知乎 → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;imzlp" rel="noopener" target="_blank"><i class="fa fa-custom zhihu fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="/images/wechat-qrcode-offical.webp" title="微信公众号 → &#x2F;images&#x2F;wechat-qrcode-offical.webp"><i class="fab fa-weixin fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:imzlp@foxmail.com" title="E-Mail → mailto:imzlp@foxmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fa fa-rss fa-fw"></i></a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://consolehelp.imzlp.com/" title="https:&#x2F;&#x2F;consolehelp.imzlp.com&#x2F;" rel="noopener" target="_blank">UE Console Help</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://imzlp.com/opensource/" title="https:&#x2F;&#x2F;imzlp.com&#x2F;opensource&#x2F;" rel="noopener" target="_blank">Open Source Projects</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://imzlp.com/posts/11515/" title="https:&#x2F;&#x2F;imzlp.com&#x2F;posts&#x2F;11515&#x2F;" rel="noopener" target="_blank">UE C++ API Dash Documents</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://ue5wiki.com/" title="https:&#x2F;&#x2F;ue5wiki.com&#x2F;" rel="noopener" target="_blank">Unreal Engine Wiki</a>
        </li>
    </ul>
  </div>

      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2014 – 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">LIPENGZHA</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="Symbols count total">1.5m</span>
</div>
  <div class="powered-by-other">
    
	    <center>Github Pages | Actions | NeXT | Cloudflare | Hexo Deploy</center>
      
  </div>

<script>
function checkWebp(callback) {
    var img = new Image();
    img.onload = function () { callback((img.width > 0) && (img.height > 0)); };
    img.onerror = function () { callback(false); };
    img.src = 'data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA';
}
function showImage(useWebp) {
    var imgs = [].slice.call(document.querySelectorAll('img'));
    imgs.forEach(function (e) {
        if (!useWebp) {
            var src = e.getAttribute('data-src')
            src = src.replace(/\.webp$/, '.png');
            e.setAttribute('data-src', src);
        }
    });
}
checkWebp(showImage);
</script>

        








      </div>
    </footer>
  </div>

  
  <script src="//lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/animejs/3.2.1/anime.min.js"></script>
  <script src="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/jquery/3.5.1/jquery.min.js"></script>
  <script src="//lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/fancybox/3.5.7/jquery.fancybox.min.js"></script>
  <script src="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/lozad.js/1.16.0/lozad.min.js"></script>
  <script src="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/pangu/4.0.7/pangu.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>



<script src="/js/code-unfold.js"></script>

  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>




  
<script src="/js/local-search.js"></script>









<script>
document.querySelectorAll('.pdfobject-container').forEach(element => {
  let url = element.dataset.target;
  let pdfOpenParams = {
    navpanes : 0,
    toolbar  : 0,
    statusbar: 0,
    pagemode : 'thumbs',
    view     : 'FitH'
  };
  let pdfOpenFragment = '#' + Object.entries(pdfOpenParams).map(([key, value]) => `${key}=${encodeURIComponent(value)}`).join('&');
  let fullURL = `/lib/pdf/web/viewer.html?file=${encodeURIComponent(url)}${pdfOpenFragment}`;

  if (NexT.utils.supportsPDFs()) {
    element.innerHTML = `<embed class="pdfobject" src="${url + pdfOpenFragment}" type="application/pdf" style="height: ${element.dataset.height};">`;
  } else {
    element.innerHTML = `<iframe src="${fullURL}" style="height: ${element.dataset.height};" frameborder="0"></iframe>`;
  }
});
</script>


<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  

  
  <script src="//img.imzlp.com/imgs/zlp/picgo/2021/quicklink.umd.js"></script>
  <script>
      window.addEventListener('load', () => {
      quicklink({
        timeout : 3000,
        priority: true,
        ignores : [uri => uri.includes('#'),uri => uri === 'https://en.imzlp.com/posts/7181/',]
      });
      });
  </script>


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/valine/1.4.14/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    var requiredFields = 'nick';
    requiredFields = requiredFields.split(',');
    
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'oCE6RMVkVoi5MgUhvFsn1EvV-gzGzoHsz',
      appKey     : 'K9SOaNYJ8PV6xaoFggWG5xvv',
      placeholder: "Leave something behind~",
      avatar     : 'robohash',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : 'en' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : '',
      requiredFields: requiredFields
    });
  }, window.Valine);
});
</script>

</body>
</html>
