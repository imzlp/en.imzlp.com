<!DOCTYPE html>
<html lang="en,default">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon-32x32-tilt-brush.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-tilt-brush.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-tilt-brush.png">
  <link rel="mask-icon" href="/images/favicon-32x32-tilt-brush.png" color="#222">
  <meta name="google-site-verification" content="ttIkhAIFZQM9Huj8roB0l95ePN2Tv2zv2wRFksi09WA">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noto Serif SC:300,300italic,400,400italic,700,700italic|Pacifico:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Roboto Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="//lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/5.15.2/css/all.min.css">
  <link rel="stylesheet" href="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/fancybox/3.5.7/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"en.imzlp.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false,"width":280},"copycode":{"enable":true,"show_result":true,"style":"flat"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"manual"},"fancybox":true,"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":false,"nav":null,"activeClass":"valine"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"code_unfold":{"enable":true,"CODE_MAX_HEIGHT":600},"path":"search.xml"};
  </script>

  <meta name="description" content="For the resource inspection requirements in the project, it needs to be simple and convenient to configure, automate execution, and be able to promptly locate related personnel. Based on this requirem">
<meta property="og:type" content="article">
<meta property="og:title" content="Automated Resource Scanning and Inspection with ResScannerUE">
<meta property="og:url" content="https://en.imzlp.com/posts/20376/index.html">
<meta property="og:site_name" content="Z&#39;s Blog">
<meta property="og:description" content="For the resource inspection requirements in the project, it needs to be simple and convenient to configure, automate execution, and be able to promptly locate related personnel. Based on this requirem">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://img.imzlp.com/imgs/zlp/picgo/2022/202302051834278.webp">
<meta property="article:published_time" content="2021-10-25T15:49:18.000Z">
<meta property="article:modified_time" content="2021-10-25T15:49:18.000Z">
<meta property="article:author" content="LIPENGZHA">
<meta property="article:tag" content="UnrealEngine">
<meta property="article:tag" content="资源管理">
<meta property="article:tag" content="ResScanner">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img.imzlp.com/imgs/zlp/picgo/2022/202302051834278.webp">

<link rel="canonical" href="https://en.imzlp.com/posts/20376/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>Automated Resource Scanning and Inspection with ResScannerUE | Z's Blog</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-FDCJ41EFP5"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-FDCJ41EFP5');
      }
    </script>






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.staticfile.org/lxgw-wenkai-screen-webfont/1.7.0/style.min.css" /><!-- hexo injector head_end end --><link rel="alternate" href="/atom.xml" title="Z's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Z's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        
            
  <li class="menu-item menu-item-notes">

    <a href="/notes/" rel="section"><i class="fa fa-edit fa-fw"></i>Notes</a>

  </li>


      
        
            
  <li class="menu-item menu-item-essay">

    <a href="/essay/" rel="section"><i class="fas fa-feather-alt fa-fw"></i>Essay</a>

  </li>


      
        
            
  <li class="menu-item menu-item-resources">

    <a href="/resources/" rel="section"><i class="fa fa-inbox fa-fw"></i>Resources</a>

  </li>


      
        <li class="menu-item menu-item-friends">

    <a href="/friends/" rel="section"><i class="fas fa-link fa-fw"></i>Friends</a>

  </li>
        
            
  <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About Me</a>

  </li>


      
        <li class="menu-item menu-item-showcase">

    <a href="/showcase/" rel="section"><i class="fa fa-solid fa-trophy fa-fw"></i>ShowCase</a>

  </li>
        <li class="menu-item menu-item-changelog">

    <a href="/changelog/" rel="section"><i class="fa fa-history fa-fw"></i>Site Log</a>

  </li>
        <li class="menu-item menu-item-opensource">

    <a href="/opensource/" rel="section"><i class="fas fa-code-branch fa-fw"></i>Open Source</a>

  </li>
        <li class="menu-item menu-item-uewiki">

    <a href="https://ue5wiki.com/" rel="noopener" target="_blank"><i class="fab fa-wikipedia-w fa-fw"></i>Unreal Wiki</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>



<script type="text/javascript">
  let domain='en.imzlp.com';
  let domain_str = atob(domain);
  let pathname = location.pathname;
  if (domain_str!= location.host.toLowerCase()){
        console.log(`this host is not safe,jump to https://${domain_str}${pathname}`);
        location.href=`https://${domain_str}${pathname}`;
  }
</script>

</div>
    </header>

    
  <div class="reading-progress-bar"></div>
  <div class="l10n-header-widget">
    <script>
      // 获取当前页面的 URL
      const currentUrl = window.location.href;
      // 替换 URL 中的部分内容
      const jumpToL10nLink = currentUrl.replace('en.imzlp.com', 'imzlp.com');
      // 将 jumpToL10nLink 绑定到一个全局变量
      window.jumpToL10nLink = jumpToL10nLink;
    </script>

    <a href="#" class="post-l10n-link" title="切换至中文版本" style="float: left;border-bottom: none;" rel="noopener" target="_blank" onclick="window.open(window.jumpToL10nLink, '_blank'); return false;">
      <i class="fa fa-solid fa-language"></i>
    </a>
  </div>



    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en"
  >
    <link itemprop="mainEntityOfPage" href="https://en.imzlp.com/posts/20376/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://img.imzlp.com/imgs/zlp/picgo/2023/202304152112902.webp">
      <meta itemprop="name" content="LIPENGZHA">
      <meta itemprop="description" content=""I think, therefore I am"">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Z's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Automated Resource Scanning and Inspection with ResScannerUE<a href="https://github.com/imzlp/blog-md/blob/en/_posts/2021-10-25-20376.md" class="post-edit-link" title="Edit this post" style="float: right;border-bottom: 0px;" rel="noopener" target="_blank"><i class="fa fa-pen-nib"></i></a><a href="https://imzlp.com/posts/20376/" class="post-l10n-link" title="切换至中文版本" style="float: left;border-bottom: 0px;" rel="noopener" target="_blank"><i class="fa fa-solid fa-language"></i></a>
        </h1>

        
          <div class="post-subtitle" style="text-align: center;line-height: 1;">
            <sub text-align="center" style="font-size: 15px;align-content: center;font-style: italic;bottom: 0em;">基于ResScannerUE的资源检查自动化实践</sub>
          </div>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-10-25 15:49 15:49:18:49" itemprop="dateCreated datePublished" datetime="2021-10-25T15:49:18+00:00">2021-10-25 15:49</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/UnrealEngine/" itemprop="url" rel="index"><span itemprop="name">UnrealEngine</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/UnrealEngine/%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86/" itemprop="url" rel="index"><span itemprop="name">资源管理</span></a>
                </span>
            </span>

          
            <span id="/posts/20376/" class="post-meta-item leancloud_visitors" data-flag-title="Automated Resource Scanning and Inspection with ResScannerUE" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>7.8k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>19 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>For the resource inspection requirements in the project, it needs to be simple and convenient to configure, automate execution, and be able to promptly locate related personnel. Based on this requirement, I have open-sourced a resource compliance scanning tool <a target="_blank" rel="noopener" href="https://imzlp.com/posts/11750/">ResScannerUE</a>, with configuration documentation: <a target="_blank" rel="noopener" href="https://imzlp.com/posts/11750/">UE Resource Compliance Inspection Tool ResScannerUE</a>.<br>This article will introduce how to achieve automated resource scanning through this tool, provide support for incremental detection combined with Git, use Commandlet to automatically trigger and execute detection rules for Content content changes on CI platforms, and be able to locate the most recent committers of problematic resources, achieving precise positioning and real-time scanning report sending to corporate WeChat, reminding relevant personnel to take action.<br>Additionally, I also provide a Git-based Pre-Commit Hook implementation, allowing detection of non-compliant resources before submitting and prohibiting the submission, thus avoiding the contamination of remote repositories with problematic resources. The overall solution has been meticulously designed and extensively optimized for experience and enhanced automation support, making it very convenient to configure and integrate, capable of meeting various resource scanning needs.</p>
<span id="more"></span>
<p>In the plugin, it is possible to configure paths and resource lists for each rule, and it also provides global resource paths and resource lists used for all rules, supporting the suppression of configurations in each rule.</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/20211025165419.webp"></p>
<p>By controlling <strong>global resources</strong> and suppressing resource configurations in single rules, it can precisely control which resources undergo all rules checks, which is the basis for achieving <strong>automated resource scanning</strong>.</p>
<p>To implement <strong>automated resource scanning</strong>, it can be divided into two parts based on different needs:</p>
<ol>
<li>Full scan</li>
<li>Incremental scan</li>
</ol>
<p>The full scan goes without saying; you simply need to specify the global resource <code>/Game</code> and other Root directories in the plugin, suppress the resources configured in the rules, and export a configuration. For incremental scans, I provide two solutions in the plugin: detection based on a file list and detection based on Git version comparison.</p>
<h3 id="File-List-Detection"><a href="#File-List-Detection" class="headerlink" title="File List Detection"></a>File List Detection</h3><p>If you want to dynamically specify which resources to check rather than pre-specifying them in the configuration, I have provided functionality in the <code>ResScanner</code> commandlet to specify a file list. You can add <code>-filecheck</code> and <code>-filelist</code> to the execution parameters to specify the file list, separating files with a comma.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UE4Editor.exe Project.uproject -run=<span class="string">&quot;ResScanner&quot;</span> -config=<span class="string">&quot;ScannerConfig.json&quot;</span> -filecheck -filelist=<span class="string">&quot;Asset/A.uasset,Asset/B.uasset&quot;</span></span><br></pre></td></tr></table></figure>

<p>This method requires passing all files to be checked externally.</p>
<h3 id="Git-Version-Comparison-Detection"><a href="#Git-Version-Comparison-Detection" class="headerlink" title="Git Version Comparison Detection"></a>Git Version Comparison Detection</h3><p>Typically, project repositories are divided into two parts:</p>
<ol>
<li>Code repository: basic project structure, code, configurations, etc.</li>
<li>Resource repository: Content</li>
</ol>
<p>This is used to isolate the working environments of art and programming from each other. For most resource management situations, version control tools like Git are used for management. Therefore, it is necessary to extract the file list from each commit in the <strong>resource repository</strong> managed by Git and pass it to ResScanner for specific resource checks.</p>
<p>The original Git comparison between two commits can be done using the following command:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff --name-only HEAD~ HEAD</span><br></pre></td></tr></table></figure>

<p>This can be used to get the file changes between the last two commits, thus obtaining the original list of changed files.</p>
<p>Usually, this part of the logic would be implemented through scripts such as Python, but since this demand is relatively general, I provide support directly in <a target="_blank" rel="noopener" href="https://imzlp.com/posts/11750/">ResScannerUE</a>. When we want to perform rule checks using Git versions, we can enable the provided <code>GitChecker</code> through the plugin.</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/20211025165457.webp"></p>
<p>Git’s version comparison and committer retrieval are based on a tool I previously open-sourced: <a target="_blank" rel="noopener" href="https://github.com/hxhb/GitControllerUE">GitControllerUE</a>, which is a plugin for UE capable of obtaining Git repository version information.<br><img data-src="https://imgs.imzlp.com/imgs/zlp/blog/notes/ue/index/UE4/git-diff-in-ue4-no-runtime.webp"></p>
<p>Based on it, <a target="_blank" rel="noopener" href="https://imzlp.com/posts/11750/">ResScannerUE</a> can automatically scan the most recent commit record changes in files and check for non-compliance in submissions. By default, it checks the most recent commit, but if you want to specify more commits, you only need to modify the hash value of the starting commit in the configuration.</p>
<p>The following configuration example scans the files of the latest Git commit for texture naming checks:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">	<span class="attr">&quot;configName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Full Resource Scan&quot;</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;bByGlobalScanFilters&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;bBlockRuleFilter&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;globalScanFilters&quot;</span><span class="punctuation">:</span></span><br><span class="line">	<span class="punctuation">&#123;</span></span><br><span class="line">		<span class="attr">&quot;filters&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;assets&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span></span><br><span class="line">	<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;globalIgnoreFilters&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;gitChecker&quot;</span><span class="punctuation">:</span></span><br><span class="line">	<span class="punctuation">&#123;</span></span><br><span class="line">		<span class="attr">&quot;bGitCheck&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;bRecordCommiter&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;bDiffCommit&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;repoDir&quot;</span><span class="punctuation">:</span></span><br><span class="line">		<span class="punctuation">&#123;</span></span><br><span class="line">			<span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;[PROJECT_CONTENT_DIR]&quot;</span></span><br><span class="line">		<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;beginCommitHash&quot;</span><span class="punctuation">:</span> <span class="string">&quot;HEAD~&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;endCommitHash&quot;</span><span class="punctuation">:</span> <span class="string">&quot;HEAD&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;bUncommitFiles&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">	<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;bUseRulesTable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;importRulesTable&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;scannerRules&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">		<span class="punctuation">&#123;</span></span><br><span class="line">			<span class="attr">&quot;ruleName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Texture Naming Norms&quot;</span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;ruleDescribe&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Textures should start with T_&quot;</span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;bEnableRule&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;priority&quot;</span><span class="punctuation">:</span> <span class="string">&quot;GENERAL&quot;</span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;scanFilters&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;scanAssetType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Class&#x27;/Script/Engine.Texture2D&#x27;&quot;</span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;recursiveClasses&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;nameMatchRules&quot;</span><span class="punctuation">:</span></span><br><span class="line">			<span class="punctuation">&#123;</span></span><br><span class="line">				<span class="attr">&quot;rules&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">					<span class="punctuation">&#123;</span></span><br><span class="line">						<span class="attr">&quot;matchMode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;StartWith&quot;</span><span class="punctuation">,</span></span><br><span class="line">						<span class="attr">&quot;matchLogic&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Necessary&quot;</span><span class="punctuation">,</span></span><br><span class="line">						<span class="attr">&quot;rules&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">							<span class="punctuation">&#123;</span></span><br><span class="line">								<span class="attr">&quot;ruleText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;T_&quot;</span><span class="punctuation">,</span></span><br><span class="line">								<span class="attr">&quot;bReverseCheck&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">							<span class="punctuation">&#125;</span></span><br><span class="line">						<span class="punctuation">]</span></span><br><span class="line">					<span class="punctuation">&#125;</span></span><br><span class="line">				<span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">				<span class="attr">&quot;bReverseCheck&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">			<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;pathMatchRules&quot;</span><span class="punctuation">:</span></span><br><span class="line">			<span class="punctuation">&#123;</span></span><br><span class="line">				<span class="attr">&quot;rules&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">				<span class="attr">&quot;bReverseCheck&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">			<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;propertyMatchRules&quot;</span><span class="punctuation">:</span></span><br><span class="line">			<span class="punctuation">&#123;</span></span><br><span class="line">				<span class="attr">&quot;matchRules&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">				<span class="attr">&quot;bReverseCheck&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">			<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;customRules&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;ignoreFilters&quot;</span><span class="punctuation">:</span></span><br><span class="line">			<span class="punctuation">&#123;</span></span><br><span class="line">				<span class="attr">&quot;filters&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">				<span class="attr">&quot;assets&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span></span><br><span class="line">			<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;bEnablePostProcessor&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;postProcessors&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span></span><br><span class="line">		<span class="punctuation">&#125;</span></span><br><span class="line">	<span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;bSaveConfig&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;bSaveResult&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;savePath&quot;</span><span class="punctuation">:</span></span><br><span class="line">	<span class="punctuation">&#123;</span></span><br><span class="line">		<span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;[PROJECT_SAVED_DIR]/ResScanner&quot;</span></span><br><span class="line">	<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;bStandaloneMode&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;additionalExecCommand&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>You just need to specify this config when executing the Commandlet:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UE4Editor.exe Project.uproject -run=<span class="string">&quot;ResScanner&quot;</span> -config=<span class="string">&quot;Full_Scan_Config.json&quot;</span></span><br></pre></td></tr></table></figure>

<p>Additionally, in the <code>GitChecker</code> configuration, there is an option to record the submitter of the files. Here, I made a trick: in the storage structure of the scanning results, there are two arrays:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">USTRUCT</span>(BlueprintType)</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">FFileCommiter</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">GENERATED_USTRUCT_BODY</span>()</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">UPROPERTY</span>(EditAnywhere,BlueprintReadWrite)</span><br><span class="line">	FString File;</span><br><span class="line">	<span class="built_in">UPROPERTY</span>(EditAnywhere,BlueprintReadWrite)</span><br><span class="line">	FString Commiter;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">USTRUCT</span>(BlueprintType)</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">FRuleMatchedInfo</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">GENERATED_USTRUCT_BODY</span>()</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="built_in">UPROPERTY</span>(EditAnywhere,BlueprintReadWrite)</span><br><span class="line">    TArray&lt;FString&gt; AssetPackageNames;</span><br><span class="line">    <span class="built_in">UPROPERTY</span>(EditAnywhere,BlueprintReadWrite)</span><br><span class="line">    TArray&lt;FFileCommiter&gt; AssetsCommiter;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>The scanning result will be serialized into JSON. By default, both arrays will be serialized, but this is not our requirement. When <code>bRecordCommiter</code> is off, only the <code>AssetPackageNames</code> of the scanned resources will be serialized; conversely, <code>AssetsCommiter</code> will be serialized. We can control the serialization based on whether <code>FProperty</code> has the <code>CPF_Transient</code> FLAG. If this FLAG is included, the Property will not be serialized.</p>
<p>Thus, before each serialization of the scanning result, I will perform a marking action, deciding which property to add <code>CPF_Transient</code> based on the configuration:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// set CPF_Transient to AssetPackageNames or AssetsCommiter</span></span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">SetSerializeTransient</span><span class="params">(<span class="type">bool</span> bCommiter)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  FString NotSerializeName = bCommiter ? <span class="built_in">TEXT</span>(<span class="string">&quot;AssetPackageNames&quot;</span>) : <span class="built_in">TEXT</span>(<span class="string">&quot;AssetsCommiter&quot;</span>);</span><br><span class="line">  <span class="keyword">for</span>(TFieldIterator&lt;FProperty&gt; <span class="built_in">PropertyIter</span>(FRuleMatchedInfo::<span class="built_in">StaticStruct</span>());PropertyIter;++PropertyIter)</span><br><span class="line">  &#123;</span><br><span class="line">    FProperty* PropertyIns = *PropertyIter;</span><br><span class="line">    <span class="keyword">if</span>(NotSerializeName.<span class="built_in">Equals</span>(*PropertyIns-&gt;<span class="built_in">GetName</span>()))</span><br><span class="line">    &#123;</span><br><span class="line">      PropertyIns-&gt;<span class="built_in">SetPropertyFlags</span>(CPF_Transient);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// clear CPF_Transient</span></span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">ResetTransient</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  TArray&lt;FString&gt; NotSerializeNames = &#123;<span class="built_in">TEXT</span>(<span class="string">&quot;AssetsCommiter&quot;</span>),<span class="built_in">TEXT</span>(<span class="string">&quot;AssetPackageNames&quot;</span>)&#125;;</span><br><span class="line">  <span class="keyword">for</span>(TFieldIterator&lt;FProperty&gt; <span class="built_in">PropertyIter</span>(FRuleMatchedInfo::<span class="built_in">StaticStruct</span>());PropertyIter;++PropertyIter)</span><br><span class="line">  &#123;</span><br><span class="line">    FProperty* PropertyIns = *PropertyIter;</span><br><span class="line">    <span class="keyword">if</span>(NotSerializeNames.<span class="built_in">Contains</span>(*PropertyIns-&gt;<span class="built_in">GetName</span>()) &amp;&amp; PropertyIns-&gt;<span class="built_in">HasAnyPropertyFlags</span>(CPF_Transient))</span><br><span class="line">    &#123;</span><br><span class="line">    PropertyIns-&gt;<span class="built_in">ClearPropertyFlags</span>(CPF_Transient);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Call these two functions before each serialization:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">FRuleMatchedInfo::<span class="built_in">ResetTransient</span>();</span><br><span class="line">FRuleMatchedInfo::<span class="built_in">SetSerializeTransient</span>(<span class="built_in">GetScannerConfig</span>()-&gt;GitChecker.bGitCheck &amp;&amp; <span class="built_in">GetScannerConfig</span>()-&gt;GitChecker.bRecordCommiter);</span><br></pre></td></tr></table></figure>

<p>Thus achieving on-demand serialization effect:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/20211025205135.webp"></p>
<h3 id="Detection-of-Uncommitted-Files"><a href="#Detection-of-Uncommitted-Files" class="headerlink" title="Detection of Uncommitted Files"></a>Detection of Uncommitted Files</h3><p>The previous section introduced detection of resource changes between two committed versions. If the resources are not committed, another mechanism needs to be employed.</p>
<p>Uncommitted files refer to those files with local modifications that have not been committed:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Your branch is behind <span class="string">&#x27;origin/master&#x27;</span> by 49 commits, and can be fast-forwarded.</span><br><span class="line">  (use <span class="string">&quot;git pull&quot;</span> to update your <span class="built_in">local</span> branch)</span><br><span class="line"></span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">&quot;git restore --staged &lt;file&gt;...&quot;</span> to unstage)</span><br><span class="line">        modified:   Assets/Scene/BaseMaterials/4X4_MRA.uasset</span><br></pre></td></tr></table></figure>

<p>Based on the detection of uncommitted files, it is possible to perform resource scanning before submitting and prohibit non-compliant submissions. This will be detailed in the following implementation of the pre-commit hook.</p>
<p>In the plugin, there are options in the <code>GitChecker</code> configuration:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;gitChecker&quot;</span><span class="punctuation">:</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">	<span class="attr">&quot;bGitCheck&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;bRecordCommiter&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;bDiffCommit&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;repoDir&quot;</span><span class="punctuation">:</span></span><br><span class="line">	<span class="punctuation">&#123;</span></span><br><span class="line">		<span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;[PROJECT_CONTENT_DIR]&quot;</span></span><br><span class="line">	<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;beginCommitHash&quot;</span><span class="punctuation">:</span> <span class="string">&quot;HEAD~&quot;</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;endCommitHash&quot;</span><span class="punctuation">:</span> <span class="string">&quot;HEAD&quot;</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;bUncommitFiles&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>There are two modes for Git detection:</p>
<ul>
<li><strong>bDiffCommit</strong>: comparison of resource scans based on the two Commit HASH versions</li>
<li><strong>bUncommitFiles</strong>: scanning uncommitted resources</li>
</ul>
<p>Both modes can be enabled as needed; typically, scheduled scans will enable <code>bDiffCommit</code>, while pre-submission checks will use <code>bUncommitFiles</code>.</p>
<h3 id="Commandlet-Parameter-Replacement"><a href="#Commandlet-Parameter-Replacement" class="headerlink" title="Commandlet Parameter Replacement"></a>Commandlet Parameter Replacement</h3><p>To further facilitate executing scan tasks through Commandlet, I have also added parameter replacement functionality to the commandlet of <a target="_blank" rel="noopener" href="https://imzlp.com/posts/11750/">ResScannerUE</a>. You can dynamically replace options in the configuration file while specifying it through command line parameters, achieving more powerful automation capabilities.</p>
<p>For example, you can disable global resource configurations or choose whether to store scan results via the command line:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UE4Editor.exe Project.uproject -run=<span class="string">&quot;ResScanner&quot;</span> -config=<span class="string">&quot;Full_Scan_Config.json&quot;</span> -bByGlobalScanFilters=<span class="literal">false</span> -savePath.path=<span class="string">&quot;D:\&quot;</span></span><br></pre></td></tr></table></figure>

<p>And you can specify the starting commit HASH for Git version scans:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UE4Editor.exe Project.uproject -run=<span class="string">&quot;ResScanner&quot;</span> -config=<span class="string">&quot;Full_Scan_Config.json&quot;</span> -gitChecker.bGitCheck=<span class="literal">true</span> -gitchecker.beginCommitHash=HEAD~ -gitchecker.endCommitHash=HEAD</span><br></pre></td></tr></table></figure>

<p>Properties in the plugin can be specified in the manner of <code>-ProjectName=Value</code>. This way, it achieves the requirement of providing a basic configuration, while dynamically controlling the behavior of parameters in the configuration via the command line, exposing more optional parameters when integrated into CI systems.</p>
<h3 id="Corporate-WeChat-Reminder"><a href="#Corporate-WeChat-Reminder" class="headerlink" title="Corporate WeChat Reminder"></a>Corporate WeChat Reminder</h3><p>Based on the commandlet mechanism of <a target="_blank" rel="noopener" href="https://imzlp.com/posts/11750/">ResScannerUE</a>, it is very convenient to integrate corporate WeChat reminders. After submitting resources, the system automatically checks the submitted resources and sends group notifications:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/20211111105351.webp"></p>
<p>The entire process only requires:</p>
<ol>
<li>Python to launch the commandlet of <a target="_blank" rel="noopener" href="https://imzlp.com/posts/11750/">ResScannerUE</a></li>
<li>Check the return value of the commandlet for any hit resources (returns <code>-1</code>)</li>
<li>Read the <code>Saved/ResScanner/*_result.json</code> file</li>
<li>Use Python to send corporate WeChat messages</li>
</ol>
<p>Here, I provide an example:</p>
<figure class="highlight python"><figcaption><span>resscanner_notice.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> chardet</span><br><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"><span class="keyword">import</span> codecs</span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="keyword">from</span> notice_robot_py <span class="keyword">import</span> robot</span><br><span class="line"></span><br><span class="line">commandlets_args = argparse.ArgumentParser(description=<span class="string">&quot;do commandlet&quot;</span>)</span><br><span class="line">commandlets_args.add_argument(<span class="string">&#x27;--enginedir&#x27;</span>,<span class="built_in">help</span>=<span class="string">&#x27;engine root directory&#x27;</span>)</span><br><span class="line">commandlets_args.add_argument(<span class="string">&#x27;--projectdir&#x27;</span>,<span class="built_in">help</span>=<span class="string">&#x27;project root directory&#x27;</span>)</span><br><span class="line">commandlets_args.add_argument(<span class="string">&#x27;--projectname&#x27;</span>,<span class="built_in">help</span>=<span class="string">&#x27;project name,match projectname.uproject&#x27;</span>)</span><br><span class="line">commandlets_args.add_argument(<span class="string">&#x27;--config&#x27;</span>,<span class="built_in">help</span>=<span class="string">&#x27;config&#x27;</span>)</span><br><span class="line">commandlets_args.add_argument(<span class="string">&#x27;--notice&#x27;</span>,default=<span class="string">&quot;false&quot;</span>,<span class="built_in">help</span>=<span class="string">&#x27;is enable notice to wechat&#x27;</span>)</span><br><span class="line"></span><br><span class="line">wechat_robot_id = <span class="string">&quot;xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx&quot;</span></span><br><span class="line">MentionList = [<span class="string">&quot;&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">notice_to_wechat</span>(<span class="params">Msg,bToWechat</span>):</span><br><span class="line">    URlStr = <span class="string">&quot;https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=%s&quot;</span> % (wechat_robot_id)</span><br><span class="line">    MsgType = <span class="string">&quot;text&quot;</span>    </span><br><span class="line">    <span class="keyword">if</span> bToWechat:</span><br><span class="line">        robot.Robot.set_robot_config(URlStr, MsgType, MentionList)</span><br><span class="line">        res = robot.Robot.notice(Msg)</span><br><span class="line">        <span class="keyword">if</span> res <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="built_in">print</span>(res)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_args_by_name</span>(<span class="params">parser_args,ArgName</span>):</span><br><span class="line">    args_pairs = parser_args.__dict__</span><br><span class="line">    <span class="keyword">for</span> key,value <span class="keyword">in</span> args_pairs.items():</span><br><span class="line">        <span class="keyword">if</span> key == ArgName:</span><br><span class="line">            <span class="keyword">return</span> value</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">ue_commandlet</span>(<span class="params">cmd_params</span>):</span><br><span class="line">    parser_args = commandlets_args.parse_args()</span><br><span class="line">    engine_dir = get_args_by_name(parser_args,<span class="string">&quot;enginedir&quot;</span>)</span><br><span class="line">    project_dir = get_args_by_name(parser_args,<span class="string">&quot;projectdir&quot;</span>)</span><br><span class="line">    project_name = get_args_by_name(parser_args,<span class="string">&quot;projectname&quot;</span>)</span><br><span class="line"></span><br><span class="line">    engine_cmd_exe_path = <span class="string">&quot;\&quot;%s/Engine/Binaries/Win64/UE4Editor-cmd.exe\&quot;&quot;</span> % (engine_dir)</span><br><span class="line">    uproject_path = <span class="string">&quot;\&quot;%s/%s.uproject\&quot;&quot;</span> % (project_dir,project_name)</span><br><span class="line"></span><br><span class="line">    final_cmdlet = <span class="string">&quot;%s %s %s&quot;</span> % (engine_cmd_exe_path,uproject_path,cmd_params)</span><br><span class="line">    <span class="built_in">print</span>(final_cmdlet)</span><br><span class="line">    ps = subprocess.Popen(final_cmdlet)</span><br><span class="line">    ps.wait()</span><br><span class="line">    </span><br><span class="line">    exit_code = ps.returncode <span class="comment"># os.system(final_cmdlet)</span></span><br><span class="line">    <span class="keyword">return</span> exit_code</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    parser_args = commandlets_args.parse_args()</span><br><span class="line">    config = get_args_by_name(parser_args,<span class="string">&quot;config&quot;</span>)</span><br><span class="line">    project_dir = get_args_by_name(parser_args,<span class="string">&quot;projectdir&quot;</span>)</span><br><span class="line">    result_saved_dir = os.path.join(project_dir,<span class="string">&quot;Saved&quot;</span>,<span class="string">&quot;ResScanner&quot;</span>,<span class="string">&quot;ResScanner_result.json&quot;</span>)</span><br><span class="line">    cmd_params = <span class="string">&quot;-run=ResScanner -config=\&quot;%s\&quot;&quot;</span> % (config)</span><br><span class="line">    </span><br><span class="line">    exit_code = ue_commandlet(cmd_params)</span><br><span class="line">    <span class="keyword">if</span> exit_code != <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">if</span> os.path.exists(result_saved_dir):</span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(result_saved_dir, encoding=<span class="string">&#x27;utf-8&#x27;</span>, errors=<span class="string">&#x27;ignore&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                s = f.read()</span><br><span class="line">                lines = s.splitlines()</span><br><span class="line">                <span class="keyword">for</span> line <span class="keyword">in</span> lines:</span><br><span class="line">                    splited_line = line.rsplit(<span class="string">&#x27;,&#x27;</span>,<span class="number">1</span>)</span><br><span class="line">                    <span class="keyword">if</span> <span class="built_in">len</span>(splited_line) == <span class="number">2</span> <span class="keyword">and</span> splited_line[<span class="number">1</span>]:</span><br><span class="line">                        match_role = splited_line[<span class="number">1</span>]</span><br><span class="line">                        match_role = match_role.strip()</span><br><span class="line">                        <span class="keyword">if</span> match_role <span class="keyword">not</span> <span class="keyword">in</span> MentionList:</span><br><span class="line">                            MentionList.append(match_role)</span><br><span class="line">                msg = <span class="string">&quot;Triggered resource scan, having non-compliant resources\n%s&quot;</span> %(s)</span><br><span class="line">                bIsNotice = str2bool(get_args_by_name(parser_args,<span class="string">&quot;notice&quot;</span>))</span><br><span class="line">                notice_to_wechat(msg,bIsNotice)</span><br><span class="line">                f.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">   main()</span><br></pre></td></tr></table></figure>

<p>Usage method:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">python3 resscanner_notice.py</span><br><span class="line">--enginedir C:\Program Files\Epic Games\UE_4.26</span><br><span class="line">--projectdir D:\UnrealProjects\Client </span><br><span class="line">--projectname PROJECT_NAME</span><br><span class="line">--config D:\UnrealProjects\Client\ResScannerConfig.json</span><br><span class="line">--notice <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>By passing these parameters, you can launch ResScanner for scanning and notify the results to corporate WeChat.</p>
<h3 id="Pre-Commit-Hook"><a href="#Pre-Commit-Hook" class="headerlink" title="Pre-Commit Hook"></a>Pre-Commit Hook</h3><p>The previous automation process primarily triggered detection and report sending after submission. Essentially it’s a process of <strong>problem occurs first</strong>, <strong>problem solved later</strong>.</p>
<p>So, can we eliminate the contamination of erroneous resources to the trunk at an early stage, detecting whether resources are compliant before everyone submits? If non-compliant, submission should be prohibited.</p>
<p>The answer is yes. We can combine the <code>GitChecker.bUncommitFiles</code> provided by <a target="_blank" rel="noopener" href="https://imzlp.com/posts/11750/">ResScannerUE</a> (see <a target="_blank" rel="noopener" href="https://imzlp.com/posts/20376/#Detection-of-Uncommitted-Files">Detection of Uncommitted Files</a>) with Git’s Pre-Commit Hook mechanism to achieve:</p>
<ol>
<li>Execute the Hook script during Commit</li>
<li>The Hook script launches the commandlet of ResScannerUE to conduct compliance scanning of <strong>uncommitted resources</strong> (<code>GitChecker.bUncommitFiles = true</code>)</li>
<li>Obtain the exit code of the commandlet. If there are non-compliant resources, stop the commit and prompt about the non-compliance.</li>
</ol>
<p>The script to be executed by the Git Pre-Commit Hook is as follows:</p>
<figure class="highlight python"><figcaption><span>res_rescanner_pre_commit_hook.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding=utf-8</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"></span><br><span class="line"><span class="comment"># handle encoding convert</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">conv_encoding</span>(<span class="params">content_str</span>):</span><br><span class="line">    <span class="comment"># return content_str.decode(&#x27;utf-8&#x27;).encode(&#x27;gbk&#x27;)</span></span><br><span class="line">    <span class="keyword">return</span> content_str</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">   engine_cmd_exe_path = <span class="string">&quot;D:/UnrealEngine/Engine/Engine/Binaries/Win64/UE4Editor-cmd.exe&quot;</span></span><br><span class="line">   uproject_path = <span class="string">&quot;D:/UnrealProjects/Client/FGame.uproject&quot;</span></span><br><span class="line">   config_path = <span class="string">&quot;D:/UnrealProjects/Client/CommandletConfig/PRE_COMMIT_HOOK.json&quot;</span></span><br><span class="line">   cmd_params = <span class="string">&quot;-run=ResScanner -config=\&quot;%s\&quot; -bDiffCommit=false -bUncommitFiles=true&quot;</span> % (config_path)</span><br><span class="line">   result_saved_dir = <span class="string">&quot;D:/UnrealProjects/Client/Saved/ResScanner/PRE_COMMIT_HOOK_result.json&quot;</span></span><br><span class="line"></span><br><span class="line">   final_cmdlet = <span class="string">&quot;%s %s %s&quot;</span> % (engine_cmd_exe_path,uproject_path,cmd_params)</span><br><span class="line">   FNULL = <span class="built_in">open</span>(os.devnull, <span class="string">&#x27;w&#x27;</span>)</span><br><span class="line">   ps = subprocess.Popen(conv_encoding(final_cmdlet),stdout=FNULL,stderr=subprocess.STDOUT)</span><br><span class="line">   ps.wait()</span><br><span class="line">   exit_code = ps.returncode</span><br><span class="line"></span><br><span class="line">   <span class="keyword">if</span> exit_code != <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">if</span> os.path.exists(result_saved_dir):</span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(result_saved_dir) <span class="keyword">as</span> f:</span><br><span class="line">                s = f.read()</span><br><span class="line">                lines = s.splitlines()</span><br><span class="line">                <span class="keyword">for</span> line <span class="keyword">in</span> lines:</span><br><span class="line">                    splited_line = line.rsplit(<span class="string">&#x27;,&#x27;</span>,<span class="number">1</span>)</span><br><span class="line">                    <span class="keyword">if</span> splited_line[<span class="number">1</span>]:</span><br><span class="line">                        MentionList.append(splited_line[<span class="number">1</span>])</span><br><span class="line">                msg = <span class="string">&quot;This submission has non-compliant resources:\n%s&quot;</span> %(s.decode(encoding = <span class="string">&quot;utf-8-sig&quot;</span>).encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">                <span class="built_in">print</span>(conv_encoding(msg))</span><br><span class="line">                f.close()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;%s file not found!&quot;</span> % (result_saved_dir))</span><br><span class="line"></span><br><span class="line">   exit(exit_code)</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">   main()</span><br></pre></td></tr></table></figure>

<p>Place it in the root directory of <code>Content</code>, create a <code>pre-commit</code> file under <code>Content/.git/hooks</code>, and fill it with the following sh script:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">python res_rescanner_pre_commit_hook.py</span><br><span class="line">exitCode=<span class="string">&quot;$?&quot;</span></span><br><span class="line"><span class="built_in">exit</span> <span class="variable">$exitCode</span></span><br></pre></td></tr></table></figure>

<p>Execution effect:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/20211112104259.webp"></p>
<p>Combining with some Git GUI clients can achieve a friendly prompt effect:</p>
<p><img data-src="https://img.imzlp.com/imgs/zlp/picgo/2021/20211119165626.webp"></p>
<h3 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h3><p>This article introduces the engineering practice of automating resource scanning based on <a target="_blank" rel="noopener" href="https://imzlp.com/posts/11750/">ResScannerUE</a>, which can easily integrate resource scanning into various processes of the development pipeline.</p>

    </div>

    
    
        
        
          
            <blockquote class="blockquote-center">
              
                The article is finished. If you have any questions, please comment and communicate.
              
            <br/>
            
                <div class="qr-code" onclick="return false">
                    <script src="/js/qrcode.min.js"></script>
                    <div id="qrcode">
                      
                        <img src="https://imzlp.com/images/wechat-qrcode.webp">
                      
                    <p>Scan the QR code on WeChat and follow me.</p>
                    </div>
                </div>
            
            </blockquote>
          
        

        
          <div class="postCopyright" style="clear:both;">
             <span>Title:</span><a href="/posts/20376/" target="_blank">Automated Resource Scanning and Inspection with ResScannerUE</a><br/>
             <span>Author:</span><a href="/about" target="_blank" title="查看 LIPENGZHA 的资料">LIPENGZHA</a><br/>
             <span>Publish Date:</span>2021/10/25 15:49<br/>
             
             <span>Word Count:</span><span class="page-count">7.8k Words</span><br/>
             
             <span>Link:</span><a href="/posts/20376/" target="_blank" title="Automated Resource Scanning and Inspection with ResScannerUE">https://en.imzlp.com/posts/20376/</a>
             <span class="copy-path" data-clipboard-text="Link: https://en.imzlp.com/posts/20376/ Author: LIPENGZHA" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
             <script src="/js/jquery.min.js"></script>
             <script src="/js/clipboard.min.js"></script>
             <script> var clipboard = new Clipboard('.copy-path'); </script>
             <br/>
             
             <span>License:</span><i class="fab fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" title="Attribution-NonCommercial-ShareAlike 4.0 International">CC BY-NC-SA 4.0</a><br/>
             
             <span>Reprinting of the full article is prohibited.</span>
          </div>
        
    

        
  <div class="reward-container">
    <div>Your donation will encourage me to keep creating!</div>
    <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
      Donate
    </button>
    <div id="qr" style="display: none;">
        
        <div style="display: inline-block;">
          <img src="/images/reward/wechatpay.webp" alt="LIPENGZHA WeChat Pay">
          <p>WeChat Pay</p>
        </div>

    </div>
  </div>



      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/UnrealEngine/" rel="tag"># UnrealEngine</a>
              <a href="/tags/%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86/" rel="tag"># 资源管理</a>
              <a href="/tags/ResScanner/" rel="tag"># ResScanner</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/posts/3635/" rel="prev" title="Open Source an Unreal Engine launcher Project:UE Launcher">
      <i class="fa fa-chevron-left"></i> Open Source an Unreal Engine launcher Project:UE Launcher
    </a></div>
      <div class="post-nav-item">
    <a href="/posts/26919/" rel="next" title="Details Panel Customization in Unreal Engine">
      Details Panel Customization in Unreal Engine <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
      <div class="tabs tabs-comment">
        <ul class="nav-tabs">
            <li class="tab"><a href="#comment-utteranc">utteranc</a></li>
            <li class="tab"><a href="#comment-valine">valine</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane utteranc" id="comment-utteranc">
              
  
  <div class="comments">
  <script src="https://utteranc.es/client.js" repo="hxhb/blog-comments" issue-term="pathname" theme="github-light" crossorigin="anonymous" async></script>
  </div>
  
  
            </div>
            <div class="tab-pane valine" id="comment-valine">
              <div class="comments" id="valine-comments"></div>
            </div>
        </div>
      </div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#File-List-Detection"><span class="nav-number">1.</span> <span class="nav-text">File List Detection</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Git-Version-Comparison-Detection"><span class="nav-number">2.</span> <span class="nav-text">Git Version Comparison Detection</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Detection-of-Uncommitted-Files"><span class="nav-number">3.</span> <span class="nav-text">Detection of Uncommitted Files</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Commandlet-Parameter-Replacement"><span class="nav-number">4.</span> <span class="nav-text">Commandlet Parameter Replacement</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Corporate-WeChat-Reminder"><span class="nav-number">5.</span> <span class="nav-text">Corporate WeChat Reminder</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Pre-Commit-Hook"><span class="nav-number">6.</span> <span class="nav-text">Pre-Commit Hook</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Conclusion"><span class="nav-number">7.</span> <span class="nav-text">Conclusion</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person" oncontextmenu="return false" οndragstart="return false">
    <img class="site-author-image" itemprop="image" alt="LIPENGZHA"
      src="https://img.imzlp.com/imgs/zlp/picgo/2023/202304152112902.webp">
  <p class="site-author-name" itemprop="name">LIPENGZHA</p>
  <div class="site-description" itemprop="description">"I think, therefore I am"</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
             
          <span class="site-state-item-count">190</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">95</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">190</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/hxhb" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;hxhb" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://linkedin.com/in/lipengzha" title="Linkedin → https:&#x2F;&#x2F;linkedin.com&#x2F;in&#x2F;lipengzha" rel="noopener" target="_blank"><i class="fab fa-linkedin fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.zhihu.com/people/imzlp" title="知乎 → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;imzlp" rel="noopener" target="_blank"><i class="fa fa-custom zhihu fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="/images/wechat-qrcode-offical.webp" title="微信公众号 → &#x2F;images&#x2F;wechat-qrcode-offical.webp"><i class="fab fa-weixin fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:imzlp@foxmail.com" title="E-Mail → mailto:imzlp@foxmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fa fa-rss fa-fw"></i></a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://consolehelp.imzlp.com/" title="https:&#x2F;&#x2F;consolehelp.imzlp.com&#x2F;" rel="noopener" target="_blank">UE Console Help</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://imzlp.com/opensource/" title="https:&#x2F;&#x2F;imzlp.com&#x2F;opensource&#x2F;" rel="noopener" target="_blank">Open Source Projects</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://imzlp.com/posts/11515/" title="https:&#x2F;&#x2F;imzlp.com&#x2F;posts&#x2F;11515&#x2F;" rel="noopener" target="_blank">UE C++ API Dash Documents</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://ue5wiki.com/" title="https:&#x2F;&#x2F;ue5wiki.com&#x2F;" rel="noopener" target="_blank">Unreal Engine Wiki</a>
        </li>
    </ul>
  </div>

      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2014 – 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">LIPENGZHA</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="Symbols count total">1.5m</span>
</div>
  <div class="powered-by-other">
    
	    <center>Github Pages | Actions | NeXT | Cloudflare | Hexo Deploy</center>
      
  </div>

<script>
function checkWebp(callback) {
    var img = new Image();
    img.onload = function () { callback((img.width > 0) && (img.height > 0)); };
    img.onerror = function () { callback(false); };
    img.src = 'data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA';
}
function showImage(useWebp) {
    var imgs = [].slice.call(document.querySelectorAll('img'));
    imgs.forEach(function (e) {
        if (!useWebp) {
            var src = e.getAttribute('data-src')
            src = src.replace(/\.webp$/, '.png');
            e.setAttribute('data-src', src);
        }
    });
}
checkWebp(showImage);
</script>

        








      </div>
    </footer>
  </div>

  
  <script src="//lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/animejs/3.2.1/anime.min.js"></script>
  <script src="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/jquery/3.5.1/jquery.min.js"></script>
  <script src="//lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/fancybox/3.5.7/jquery.fancybox.min.js"></script>
  <script src="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/lozad.js/1.16.0/lozad.min.js"></script>
  <script src="//lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/pangu/4.0.7/pangu.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>



<script src="/js/code-unfold.js"></script>

  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>




  
<script src="/js/local-search.js"></script>









<script>
document.querySelectorAll('.pdfobject-container').forEach(element => {
  let url = element.dataset.target;
  let pdfOpenParams = {
    navpanes : 0,
    toolbar  : 0,
    statusbar: 0,
    pagemode : 'thumbs',
    view     : 'FitH'
  };
  let pdfOpenFragment = '#' + Object.entries(pdfOpenParams).map(([key, value]) => `${key}=${encodeURIComponent(value)}`).join('&');
  let fullURL = `/lib/pdf/web/viewer.html?file=${encodeURIComponent(url)}${pdfOpenFragment}`;

  if (NexT.utils.supportsPDFs()) {
    element.innerHTML = `<embed class="pdfobject" src="${url + pdfOpenFragment}" type="application/pdf" style="height: ${element.dataset.height};">`;
  } else {
    element.innerHTML = `<iframe src="${fullURL}" style="height: ${element.dataset.height};" frameborder="0"></iframe>`;
  }
});
</script>


<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  

  
  <script src="//img.imzlp.com/imgs/zlp/picgo/2021/quicklink.umd.js"></script>
  <script>
      window.addEventListener('load', () => {
      quicklink({
        timeout : 3000,
        priority: true,
        ignores : [uri => uri.includes('#'),uri => uri === 'https://en.imzlp.com/posts/20376/',]
      });
      });
  </script>


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/valine/1.4.14/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    var requiredFields = 'nick';
    requiredFields = requiredFields.split(',');
    
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'oCE6RMVkVoi5MgUhvFsn1EvV-gzGzoHsz',
      appKey     : 'K9SOaNYJ8PV6xaoFggWG5xvv',
      placeholder: "Leave something behind~",
      avatar     : 'robohash',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : 'en' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : '',
      requiredFields: requiredFields
    });
  }, window.Valine);
});
</script>

</body>
</html>
